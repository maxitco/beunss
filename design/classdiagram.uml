<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="20131001" xmlns:xmi="http://www.omg.org/spec/XMI/20131001" xmlns:PapyrusJava="http://www.eclipse.org/papyrus/PapyrusJava/1" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:standard="http://www.eclipse.org/uml2/5.0.0/UML/Profile/Standard" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML">
  <uml:Model xmi:id="_ujNpIOsZEeaRPtCCR8m55A" name="RootElement">
    <packagedElement xmi:type="uml:Package" xmi:id="_DCWm0OsaEeaRPtCCR8m55A" name="ss">
      <packagedElement xmi:type="uml:Package" xmi:id="_DIBxAOsaEeaRPtCCR8m55A" name="ss">
        <packagedElement xmi:type="uml:Package" xmi:id="_DIBxAesaEeaRPtCCR8m55A" name="project">
          <packagedElement xmi:type="uml:Package" xmi:id="_DIBxAusaEeaRPtCCR8m55A" name="game">
            <packagedElement xmi:type="uml:Enumeration" xmi:id="_BwkckOsfEeagpPVreqOLZw" name="Mark" visibility="public">
              <ownedOperation xmi:type="uml:Operation" xmi:id="_BwmRwesfEeagpPVreqOLZw" name="other" visibility="public">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Bwm40OsfEeagpPVreqOLZw" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Bwnf4OsfEeagpPVreqOLZw" name="toString" visibility="public">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Bwnf4esfEeagpPVreqOLZw" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedLiteral xmi:type="uml:EnumerationLiteral" xmi:id="_BwlqsOsfEeagpPVreqOLZw" name="X"/>
              <ownedLiteral xmi:type="uml:EnumerationLiteral" xmi:id="_BwmRwOsfEeagpPVreqOLZw" name="O"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_ydeKEOvbEeaFWsKBBqDStg" name="Game" visibility="public">
              <generalization xmi:type="uml:Generalization" xmi:id="_ydfYMOvbEeaFWsKBBqDStg" general="_DIN-QOsaEeaRPtCCR8m55A"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_ydfYMevbEeaFWsKBBqDStg" name="playerList" visibility="private" type="_DIRooesaEeaRPtCCR8m55A" isUnique="false">
                <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_ydf_QOvbEeaFWsKBBqDStg"/>
                <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_ydf_QevbEeaFWsKBBqDStg" value="*"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ydf_QuvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>new ArrayList&lt;ClientHandler>()</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_ydgmUOvbEeaFWsKBBqDStg" name="board" visibility="private" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_ydgmUevbEeaFWsKBBqDStg" name="answered" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ydgmUuvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>true</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_ydhNYOvbEeaFWsKBBqDStg" name="lock" visibility="private" type="_DIm_0-saEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ydhNYevbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>new ReentrantLock()</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_ydhNYuvbEeaFWsKBBqDStg" name="notAnswered" visibility="private" type="_DIqDIOsaEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ydh0cOvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>lock.newCondition()</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_ydh0cevbEeaFWsKBBqDStg" name="server" visibility="private" type="_DIsfYesaEeaRPtCCR8m55A" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_ydibgOvbEeaFWsKBBqDStg" name="turnCounter" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ydibgevbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>0</body>
                </defaultValue>
              </ownedAttribute>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ydn7EOvbEeaFWsKBBqDStg" name="Game" specification="_ydibguvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.board = new Board();
    this.server = inServer;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ydpwQOvbEeaFWsKBBqDStg" name="leaveGame" specification="_ydoiIOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (this.isAlive()) {
        lock.lock();
        notAnswered.signal();
        lock.unlock();
    } else {
        this.playerList.remove(client);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ydqXUOvbEeaFWsKBBqDStg" name="isFull" specification="_ydpwQevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (playerList.size() == 2) {
        return true;
    } else {
        return false;
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ydvP0evbEeaFWsKBBqDStg" name="addPlayer" specification="_ydq-YOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    playerList.add(inputPlayer);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ydwd8evbEeaFWsKBBqDStg" name="getPlayerList" specification="_ydvP0uvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.playerList;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_yd1WcevbEeaFWsKBBqDStg" name="makeMove" specification="_ydxFAOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (!answered &amp;&amp; playerList.get(whoseTurn()).equals(player)) {
        //0 --> black
        if (whoseTurn() == 0) {
            //try to make the move, if valid set answered true 
            if (board.setField(x, y, Mark.X)) {
                notifyMove(x, y, player.getPlayerId());
            } else {
                //invalid --> return error 5 (invalid move)
                player.send(&quot;error 5&quot;);
            }
        //1 --> white
        } else {
            //try to make the move, if valid set answered true 
            if (board.setField(x, y, Mark.O)) {
                notifyMove(x, y, player.getPlayerId());
            } else {
                //invalid --> return error 5 (invalid move)
                player.send(&quot;error 5&quot;);
            }
        }
    } else {
        //not his turn --> return error 5 (invalid move)
        player.send(&quot;error 5&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_yd2kkOvbEeaFWsKBBqDStg" name="notifyMove" specification="_yd1WcuvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    lock.lock();
    for (ClientHandler c : this.playerList) {
        c.send(Protocol.ProtServer.NOTIFYMOVE + &quot; &quot; + id + &quot; &quot; + x + &quot; &quot; + y);
    }
    //set answered on true such that the game thread can continue
    this.answered = true;
    this.notAnswered.signal();
    lock.unlock();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_yd2kk-vbEeaFWsKBBqDStg" name="whoseTurn" specification="_yd2kkevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.turnCounter % this.playerList.size();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_yd3LouvbEeaFWsKBBqDStg" name="gameEnd" specification="_yd3LoOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //check for disconnected players, then winner, then draw
    if (this.playerList.get(0).disconnected) {
        notifyEnd(this.playerList.get(0).getPlayerId(), 3);
        return true;
    } else if (this.playerList.get(1).disconnected) {
        notifyEnd(this.playerList.get(1).getPlayerId(), 3);
        return true;
    } else if (this.board.isWinner(Mark.X)) {
        notifyEnd(this.playerList.get(0).getPlayerId(), 1);
        return true;
    } else if (this.board.isWinner(Mark.O)) {
        notifyEnd(this.playerList.get(1).getPlayerId(), 1);
        return true;
    //then check for draw
    } else if (this.turnCounter == 64) {
        notifyEnd();
        return true;
    } else if (this.answered == false) {
        notifyEnd(this.playerList.get(whoseTurn()).getPlayerId(), 3);
        return true;
    }
    //do nothing if not ended
    return false;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_yd5A0OvbEeaFWsKBBqDStg" name="notifyEnd" specification="_yd3ysOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (reason == 1) {
        for (ClientHandler c : this.playerList) {
            c.send(Protocol.ProtServer.NOTIFYEND + &quot; 1 &quot; + playerId);
            c.onFailure();
        }
    } else if (reason == 3) {
        for (ClientHandler c : this.playerList) {
            c.send(Protocol.ProtServer.NOTIFYEND + &quot; 3 &quot; + playerId);
            c.onFailure();
        }
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_yd5n4evbEeaFWsKBBqDStg" name="notifyEnd" specification="_yd5n4OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    for (ClientHandler c : this.playerList) {
        c.send(Protocol.ProtServer.NOTIFYEND + &quot; 2&quot;);
        c.onFailure();
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_yd6O8evbEeaFWsKBBqDStg" name="run" specification="_yd6O8OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    lock.lock();
    //assign an id to each player (their index in the arrayList + 1)
    for (int i = 0; i &lt; this.playerList.size(); i++) {
        int id = i + 1;
        this.playerList.get(i).setPlayerId(id);
        this.playerList.get(i).send(Protocol.ProtServer.ASSIGNID + &quot; &quot; + Integer.toString(id));
    }
    //includes game specifications and opponent info
    for (ClientHandler c : this.playerList) {
        c.send(Protocol.ProtServer.STARTGAME + &quot; 4|4|4|4 &quot; + getPlayerList().get(0).getPlayerId() + &quot;|&quot; + getPlayerList().get(0).getPlayerName() + &quot;|&quot; + &quot;0000ff&quot; + &quot; &quot; + getPlayerList().get(1).getPlayerId() + &quot;|&quot; + getPlayerList().get(1).getPlayerName() + &quot;|&quot; + &quot;ff0000&quot;);
    }
    while (!gameEnd()) {
        //next turn, at top of loop such that not updated when game is ended
        this.turnCounter++;
        for (ClientHandler c : this.playerList) {
            c.send(Protocol.ProtServer.TURNOFPLAYER + &quot; &quot; + Integer.toString(playerList.get(whoseTurn()).getPlayerId()));
        }
        //set answered on false, is set true when the player whose turn it is makes a move
        this.answered = false;
        //or timeout after 20 seconds            
        try {
            this.notAnswered.await(120, TimeUnit.SECONDS);
        } catch (InterruptedException e) {
            for (ClientHandler c : this.playerList) {
                c.send(&quot;Game interrupted.&quot;);
            }
        }
    }
    this.server.removeGame(this);
    lock.unlock();
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ydibguvbEeaFWsKBBqDStg" name="Game" visibility="public" method="_ydn7EOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ydnUAOvbEeaFWsKBBqDStg" name="inServer" type="_DIsfYesaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ydoiIOvbEeaFWsKBBqDStg" name="leaveGame" visibility="public" method="_ydpwQOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ydpJMOvbEeaFWsKBBqDStg" name="client" type="_DIRooesaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ydpwQevbEeaFWsKBBqDStg" name="isFull" visibility="public" method="_ydqXUOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ydpwQuvbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ydq-YOvbEeaFWsKBBqDStg" name="addPlayer" visibility="public" method="_ydvP0evbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ydvP0OvbEeaFWsKBBqDStg" name="inputPlayer" type="_DIRooesaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ydvP0uvbEeaFWsKBBqDStg" name="getPlayerList" visibility="public" method="_ydwd8evbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ydv24OvbEeaFWsKBBqDStg" type="_DIRooesaEeaRPtCCR8m55A" direction="return">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_ydv24evbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_ydwd8OvbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ydxFAOvbEeaFWsKBBqDStg" name="makeMove" visibility="public" method="_yd1WcevbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd0vYOvbEeaFWsKBBqDStg" name="x">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd0vYevbEeaFWsKBBqDStg" name="y">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd1WcOvbEeaFWsKBBqDStg" name="player" type="_DIRooesaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_yd1WcuvbEeaFWsKBBqDStg" name="notifyMove" visibility="public" method="_yd2kkOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd19gOvbEeaFWsKBBqDStg" name="x">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd19gevbEeaFWsKBBqDStg" name="y">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd19guvbEeaFWsKBBqDStg" name="id">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_yd2kkevbEeaFWsKBBqDStg" name="whoseTurn" visibility="public" method="_yd2kk-vbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd2kkuvbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_yd3LoOvbEeaFWsKBBqDStg" name="gameEnd" visibility="public" method="_yd3LouvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd3LoevbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_yd3ysOvbEeaFWsKBBqDStg" name="notifyEnd" visibility="public" method="_yd5A0OvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd4ZwOvbEeaFWsKBBqDStg" name="playerId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_yd4ZwevbEeaFWsKBBqDStg" name="reason">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_yd5n4OvbEeaFWsKBBqDStg" name="notifyEnd" visibility="public" method="_yd5n4evbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_yd6O8OvbEeaFWsKBBqDStg" name="run" visibility="public" method="_yd6O8evbEeaFWsKBBqDStg"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_QNhLEOvfEea_C-H5NfTs0A" name="Field" visibility="public">
              <ownedAttribute xmi:type="uml:Property" xmi:id="_QNkOYOvfEea_C-H5NfTs0A" name="x" visibility="public" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_QNmDkOvfEea_C-H5NfTs0A" name="y" visibility="public" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_QNmqoOvfEea_C-H5NfTs0A" name="z" visibility="public" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_cOUqguvfEea_C-H5NfTs0A" type="_YdKtEOvfEea_C-H5NfTs0A" association="_cOUDcOvfEea_C-H5NfTs0A"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QN4XcOvfEea_C-H5NfTs0A" name="Field" specification="_QNof0OvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    this.x = newx;
    this.y = newy;
    this.z = newz;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QOATQOvfEea_C-H5NfTs0A" name="equals" specification="_QN8B0OvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    if (o instanceof Field) {
        return this.hashCode() == ((Field) o).hashCode();
    }
    return false;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QOCvgOvfEea_C-H5NfTs0A" name="hashCode" specification="_QOBhYOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    return x * 100 + y * 10 + z;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QODWkOvfEea_C-H5NfTs0A" name="copy" specification="_QOCvgevfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    return new Field(this.x, this.y, this.z);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QOEksOvfEea_C-H5NfTs0A" name="getMove" specification="_QOD9oOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    return this.x + &quot; &quot; + this.y;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QOFLwevfEea_C-H5NfTs0A" name="toString" specification="_QOEksevfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    return &quot;(&quot; + this.x + &quot;,&quot; + this.y + &quot;,&quot; + this.z + &quot;)&quot;;
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_QNof0OvfEea_C-H5NfTs0A" name="Field" visibility="public" method="_QN4XcOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QNxpwOvfEea_C-H5NfTs0A" name="newx">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QN1UIOvfEea_C-H5NfTs0A" name="newy">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QN2iQOvfEea_C-H5NfTs0A" name="newz">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_QN8B0OvfEea_C-H5NfTs0A" name="equals" visibility="public" method="_QOATQOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QN93AOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QN_FIOvfEea_C-H5NfTs0A" name="o" type="_DJg-w-saEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_QOBhYOvfEea_C-H5NfTs0A" name="hashCode" visibility="public" method="_QOCvgOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QOCIcOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_QOCvgevfEea_C-H5NfTs0A" name="copy" visibility="public" method="_QODWkOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QOCvguvfEea_C-H5NfTs0A" type="_QNhLEOvfEea_C-H5NfTs0A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_QOD9oOvfEea_C-H5NfTs0A" name="getMove" visibility="public" method="_QOEksOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QOD9oevfEea_C-H5NfTs0A" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_QOEksevfEea_C-H5NfTs0A" name="toString" visibility="public" method="_QOFLwevfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_QOFLwOvfEea_C-H5NfTs0A" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RaO10OvfEea_C-H5NfTs0A" name="Board" visibility="public">
              <generalization xmi:type="uml:Generalization" xmi:id="_RaQD8OvfEea_C-H5NfTs0A" general="_MmtZQOvbEeaFWsKBBqDStg"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_RaRSEOvfEea_C-H5NfTs0A" name="MAXFIELD" visibility="public" isLeaf="true" isStatic="true" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_RaTuUOvfEea_C-H5NfTs0A" name="defaultValue">
                  <language>JAVA</language>
                  <body>3</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_RaU8cOvfEea_C-H5NfTs0A" name="fieldMap" visibility="private" type="_DJGIAusaEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_RaWKkOvfEea_C-H5NfTs0A" name="defaultValue">
                  <language>JAVA</language>
                  <body>new HashMap&lt;Field, Mark>()</body>
                </defaultValue>
              </ownedAttribute>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RabqIOvfEea_C-H5NfTs0A" name="Board" specification="_RaWxoOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    this.reset();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RaeGYOvfEea_C-H5NfTs0A" name="copy" specification="_RacRMOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Board copy = new Board();
    for (int x = 0; x &lt;= MAXFIELD; x++) {
        for (int y = 0; y &lt;= MAXFIELD; y++) {
            for (int z = 0; z &lt;= MAXFIELD; z++) {
                Field field = new Field(x, y, z);
                if (!this.isEmptyField(field)) {
                    copy.fieldMap.put(field, this.getMark(field));
                }
            }
        }
    }
    return copy;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RalbIOvfEea_C-H5NfTs0A" name="isField" specification="_Rai-4OvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    return field.x >= 0 &amp;&amp; field.x &lt;= MAXFIELD &amp;&amp; field.y >= 0 &amp;&amp; field.y &lt;= MAXFIELD &amp;&amp; field.z >= 0 &amp;&amp; field.z &lt;= MAXFIELD;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RaoecOvfEea_C-H5NfTs0A" name="isReachableEmptyField" specification="_RamCMOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Field copy = field.copy();
    //check fields below
    while ((copy = this.walkField(copy, 0, 0, -1)) != null) {
        if (!this.fieldMap.containsKey(copy)) {
            return false;
        }
    }
    return this.isField(field) &amp;&amp; !this.fieldMap.containsKey(field);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RasI0OvfEea_C-H5NfTs0A" name="isEmptyField" specification="_RaqToOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    return !this.fieldMap.containsKey(field);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RayPcOvfEea_C-H5NfTs0A" name="getEmptyField" specification="_RaulEOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Field empty = new Field(x, y, 0);
    if (this.isReachableEmptyField(empty)) {
        return empty;
    } else {
        while ((empty = walkField(empty, 0, 0, 1)) != null) {
            if (this.isReachableEmptyField(empty)) {
                return empty;
            }
        }
    }
    return null;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Ra0rsevfEea_C-H5NfTs0A" name="setField" specification="_RazdkOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    if (this.isReachableEmptyField(field)) {
        this.fieldMap.put(field, m);
        //use observer pattern to signal board change
        setChanged();
        notifyObservers(&quot;boardchanged&quot;);
        return true;
    }
    return false;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Ra2g4OvfEea_C-H5NfTs0A" name="walkField" specification="_Ra0rsuvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Field nextfield = new Field(field.x + xoff, field.y + yoff, field.z + zoff);
    if (this.isField(nextfield)) {
        return nextfield;
    }
    return null;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Ra8AcOvfEea_C-H5NfTs0A" name="setField" specification="_Ra3H8OvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Field newfield = this.getEmptyField(x, y);
    if (newfield != null) {
        return this.setField(newfield, m);
    }
    return false;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Ra_DwOvfEea_C-H5NfTs0A" name="getMark" specification="_Ra9OkOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    if (this.isField(field)) {
        return this.fieldMap.get(field);
    }
    return null;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RbBgAOvfEea_C-H5NfTs0A" name="reset" specification="_RbAR4OvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    this.fieldMap.clear();
    setChanged();
    notifyObservers(&quot;boardchanged&quot;);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RbJb0OvfEea_C-H5NfTs0A" name="checkRow" specification="_RbD8QOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Field checker = start.copy();
    int count = 0;
    do {
        if (this.isEmptyField(checker) || !this.getMark(checker).equals(m)) {
            return false;
        }
        count++;
        checker = this.walkField(checker, xdir, ydir, zdir);
    } while (checker != null);
    if (count == MAXFIELD + 1) {
        return true;
    }
    return false;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RbNGMOvfEea_C-H5NfTs0A" name="checkZcolums" specification="_RbKp8OvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    for (int x = 0; x &lt;= MAXFIELD; x++) {
        for (int y = 0; y &lt;= MAXFIELD; y++) {
            Field zchecker = new Field(x, y, 0);
            if (this.checkRow(zchecker, 0, 0, 1, m)) {
                return true;
            }
        }
    }
    return false;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RbRXoOvfEea_C-H5NfTs0A" name="checkPlanes" specification="_RbOUUOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    for (int i = 0; i &lt;= MAXFIELD; i++) {
        //check all x-y planes
        for (int z = 0; z &lt;= MAXFIELD; z++) {
            Field xchecker = new Field(0, i, z);
            Field ychecker = new Field(i, 0, z);
            if (this.checkRow(xchecker, 1, 0, 0, m) || this.checkRow(ychecker, 0, 1, 0, m)) {
                return true;
            }
        }
        //check diagonal planes
        //startpoint x axis
        Field yzchecker = new Field(i, 0, 0);
        //startpoint y axis
        Field xzchecker = new Field(0, i, 0);
        //opposite startpoint x axis
        Field yzdownchecker = new Field(i, MAXFIELD, 0);
        //opposite startpoint y axis
        Field xzdownchecker = new Field(MAXFIELD, i, 0);
        //check cross-planes
        Field crosschecker = new Field(0, 0, i);
        Field crossdownchecker = new Field(0, MAXFIELD, i);
        if (this.checkRow(yzchecker, 0, 1, 1, m) || this.checkRow(xzchecker, 1, 0, 1, m) || this.checkRow(yzdownchecker, 0, -1, 1, m) || this.checkRow(xzdownchecker, -1, 0, 1, m) || this.checkRow(crosschecker, 1, 1, 0, m) || this.checkRow(crossdownchecker, 1, -1, 0, m)) {
            return true;
        }
    }
    return false;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RbUa8OvfEea_C-H5NfTs0A" name="isWinner" specification="_RbSlwOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    return this.checkPlanes(m) || this.checkZcolums(m);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RbWQIOvfEea_C-H5NfTs0A" name="getWinner" specification="_RbVCAOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Mark m = Mark.X;
    if (this.isWinner(m) &amp;&amp; !this.isWinner(m.other())) {
        return m;
    } else if (this.isWinner(m.other())) {
        return m.other();
    } else {
        return null;
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RbZTcOvfEea_C-H5NfTs0A" name="hasEnded" specification="_RbXeQOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    if (this.isWinner(Mark.X) || this.isWinner(Mark.O) || this.fieldMap.size() == MAXFIELD * MAXFIELD * MAXFIELD) {
        return true;
    }
    return false;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RbbvsOvfEea_C-H5NfTs0A" name="toString" specification="_RbahkOvfEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    String result = &quot;&quot;;
    for (int y = MAXFIELD; y >= 0; y--) {
        for (int z = 0; z &lt;= MAXFIELD; z++) {
            result = result + y;
            for (int x = 0; x &lt;= MAXFIELD; x++) {
                Field out = new Field(x, y, z);
                if (this.isEmptyField(out)) {
                    result = result + &quot;[ ]&quot;;
                } else {
                    result = result + &quot;[&quot; + this.getMark(out).toString() + &quot;]&quot;;
                }
            }
            result = result + &quot;   &quot;;
        }
        result = result + &quot;\n&quot;;
    }
    return result;
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RaWxoOvfEea_C-H5NfTs0A" name="Board" visibility="public" method="_RabqIOvfEea_C-H5NfTs0A"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RacRMOvfEea_C-H5NfTs0A" name="copy" visibility="public" method="_RaeGYOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Rac4QOvfEea_C-H5NfTs0A" type="_RaO10OvfEea_C-H5NfTs0A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Rai-4OvfEea_C-H5NfTs0A" name="isField" visibility="public" method="_RalbIOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Rajl8OvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Rak0EOvfEea_C-H5NfTs0A" name="field" type="_QNhLEOvfEea_C-H5NfTs0A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RamCMOvfEea_C-H5NfTs0A" name="isReachableEmptyField" visibility="public" method="_RaoecOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RampQOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ran3YOvfEea_C-H5NfTs0A" name="field" type="_QNhLEOvfEea_C-H5NfTs0A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RaqToOvfEea_C-H5NfTs0A" name="isEmptyField" visibility="public" method="_RasI0OvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Raq6sOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RarhwOvfEea_C-H5NfTs0A" name="field" type="_QNhLEOvfEea_C-H5NfTs0A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RaulEOvfEea_C-H5NfTs0A" name="getEmptyField" visibility="public" method="_RayPcOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RavMIOvfEea_C-H5NfTs0A" type="_QNhLEOvfEea_C-H5NfTs0A" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RawaQOvfEea_C-H5NfTs0A" name="x">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RaxBUOvfEea_C-H5NfTs0A" name="y">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RazdkOvfEea_C-H5NfTs0A" name="setField" visibility="public" method="_Ra0rsevfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra0EoOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra0EoevfEea_C-H5NfTs0A" name="field" type="_QNhLEOvfEea_C-H5NfTs0A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra0rsOvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Ra0rsuvfEea_C-H5NfTs0A" name="walkField" visibility="public" method="_Ra2g4OvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra1SwOvfEea_C-H5NfTs0A" type="_QNhLEOvfEea_C-H5NfTs0A" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra1SwevfEea_C-H5NfTs0A" name="field" type="_QNhLEOvfEea_C-H5NfTs0A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra1SwuvfEea_C-H5NfTs0A" name="xoff">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra1Sw-vfEea_C-H5NfTs0A" name="yoff">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra150OvfEea_C-H5NfTs0A" name="zoff">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Ra3H8OvfEea_C-H5NfTs0A" name="setField" visibility="public" method="_Ra8AcOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra3vAOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra4WEOvfEea_C-H5NfTs0A" name="x">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra6LQOvfEea_C-H5NfTs0A" name="y">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra7ZYOvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Ra9OkOvfEea_C-H5NfTs0A" name="getMark" visibility="public" method="_Ra_DwOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra91oOvfEea_C-H5NfTs0A" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Ra-csOvfEea_C-H5NfTs0A" name="field" type="_QNhLEOvfEea_C-H5NfTs0A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RbAR4OvfEea_C-H5NfTs0A" name="reset" visibility="public" method="_RbBgAOvfEea_C-H5NfTs0A"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RbD8QOvfEea_C-H5NfTs0A" name="checkRow" visibility="public" method="_RbJb0OvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbEjUOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbFKYOvfEea_C-H5NfTs0A" name="start" type="_QNhLEOvfEea_C-H5NfTs0A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbGYgOvfEea_C-H5NfTs0A" name="xdir">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbG_kOvfEea_C-H5NfTs0A" name="ydir">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbHmoOvfEea_C-H5NfTs0A" name="zdir">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbI0wOvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RbKp8OvfEea_C-H5NfTs0A" name="checkZcolums" visibility="public" method="_RbNGMOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbLRAOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbL4EOvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RbOUUOvfEea_C-H5NfTs0A" name="checkPlanes" visibility="public" method="_RbRXoOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbO7YOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbQJgOvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RbSlwOvfEea_C-H5NfTs0A" name="isWinner" visibility="public" method="_RbUa8OvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbTM0OvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbTz4OvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RbVCAOvfEea_C-H5NfTs0A" name="getWinner" visibility="public" method="_RbWQIOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbVpEOvfEea_C-H5NfTs0A" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RbXeQOvfEea_C-H5NfTs0A" name="hasEnded" visibility="public" method="_RbZTcOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbYsYOvfEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RbahkOvfEea_C-H5NfTs0A" name="toString" visibility="public" method="_RbbvsOvfEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RbbIoOvfEea_C-H5NfTs0A" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
            </packagedElement>
          </packagedElement>
          <packagedElement xmi:type="uml:Package" xmi:id="_SH1GQOscEeaGGeTgDT8kcg" name="client">
            <packagedElement xmi:type="uml:Class" xmi:id="_jZtpgOs3Eea7AqSsB_lc7w" name="ComputerPlayer" visibility="public">
              <ownedAttribute xmi:type="uml:Property" xmi:id="_jZws0Os3Eea7AqSsB_lc7w" name="difficulty" visibility="private" type="_qb8WIOs3Eea7AqSsB_lc7w" isUnique="false"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_jZzJEes3Eea7AqSsB_lc7w" name="ComputerPlayer" specification="_jZws0es3Eea7AqSsB_lc7w">
                <language>JAVA</language>
                <body>
    this.difficulty = newdiff;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_jZzwIes3Eea7AqSsB_lc7w" name="getName" specification="_jZzJEus3Eea7AqSsB_lc7w">
                <language>JAVA</language>
                <body>
    return this.difficulty.getName() + &quot; Computer Player&quot;;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_jZ0XM-s3Eea7AqSsB_lc7w" name="determineMove" specification="_jZzwIus3Eea7AqSsB_lc7w">
                <language>JAVA</language>
                <body>
    return this.difficulty.determineMove(board, m);
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_jZws0es3Eea7AqSsB_lc7w" name="ComputerPlayer" visibility="public" method="_jZzJEes3Eea7AqSsB_lc7w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_jZzJEOs3Eea7AqSsB_lc7w" name="newdiff" type="_qb8WIOs3Eea7AqSsB_lc7w"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_jZzJEus3Eea7AqSsB_lc7w" name="getName" visibility="public" method="_jZzwIes3Eea7AqSsB_lc7w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_jZzwIOs3Eea7AqSsB_lc7w" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_jZzwIus3Eea7AqSsB_lc7w" name="determineMove" visibility="public" method="_jZ0XM-s3Eea7AqSsB_lc7w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_jZ0XMOs3Eea7AqSsB_lc7w" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_jZ0XMes3Eea7AqSsB_lc7w" name="board"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_jZ0XMus3Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Interface" xmi:id="_qb8WIOs3Eea7AqSsB_lc7w" name="Difficulty" visibility="public">
              <ownedOperation xmi:type="uml:Operation" xmi:id="_qb89MOs3Eea7AqSsB_lc7w" name="getName" visibility="public">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_qb89Mes3Eea7AqSsB_lc7w" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_qb9kQOs3Eea7AqSsB_lc7w" name="determineMove" visibility="public">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_qb9kQes3Eea7AqSsB_lc7w" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_qb9kQus3Eea7AqSsB_lc7w" name="board"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_qb-LUOs3Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_xZn58Os3Eea7AqSsB_lc7w" name="Easy" visibility="public">
              <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_xZohAOs3Eea7AqSsB_lc7w" name="implements" client="_xZn58Os3Eea7AqSsB_lc7w" supplier="_qb8WIOs3Eea7AqSsB_lc7w" contract="_qb8WIOs3Eea7AqSsB_lc7w"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_xZpIEes3Eea7AqSsB_lc7w" name="getName" specification="_xZohAes3Eea7AqSsB_lc7w">
                <language>JAVA</language>
                <body>
    return &quot;easy&quot;;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_xZqWMOs3Eea7AqSsB_lc7w" name="determineMove" specification="_xZpIEus3Eea7AqSsB_lc7w">
                <language>JAVA</language>
                <body>
    ArrayList&lt;Field> moves = new ArrayList&lt;Field>();
    for (int x = 0; x &lt;= Board.MAXFIELD; x++) {
        for (int y = 0; y &lt;= Board.MAXFIELD; y++) {
            Field empty = board.getEmptyField(x, y);
            if (empty != null) {
                moves.add(empty);
            }
        }
    }
    return moves.get((int) (Math.random() * moves.size()));
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_xZohAes3Eea7AqSsB_lc7w" name="getName" visibility="public" method="_xZpIEes3Eea7AqSsB_lc7w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_xZpIEOs3Eea7AqSsB_lc7w" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_xZpIEus3Eea7AqSsB_lc7w" name="determineMove" visibility="public" method="_xZqWMOs3Eea7AqSsB_lc7w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_xZpvIOs3Eea7AqSsB_lc7w" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_xZpvIes3Eea7AqSsB_lc7w" name="board"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_xZpvIus3Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_y1L5AOs3Eea7AqSsB_lc7w" name="Medium" visibility="public">
              <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_y1MgEOs3Eea7AqSsB_lc7w" name="implements" client="_y1L5AOs3Eea7AqSsB_lc7w" supplier="_qb8WIOs3Eea7AqSsB_lc7w" contract="_qb8WIOs3Eea7AqSsB_lc7w"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_y1NHIes3Eea7AqSsB_lc7w" name="getName" specification="_y1MgEes3Eea7AqSsB_lc7w">
                <language>JAVA</language>
                <body>
    return &quot;medium&quot;;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_y1OVQOs3Eea7AqSsB_lc7w" name="determineMove" specification="_y1NHIus3Eea7AqSsB_lc7w">
                <language>JAVA</language>
                <body>
    Map&lt;Field, Integer> result = new HashMap&lt;Field, Integer>();
    ArrayList&lt;Field> moves = new ArrayList&lt;Field>();
    for (int x = 0; x &lt;= Board.MAXFIELD; x++) {
        for (int y = 0; y &lt;= Board.MAXFIELD; y++) {
            Field empty = board.getEmptyField(x, y);
            if (empty != null) {
                moves.add(empty);
            }
        }
    }
    System.out.println(moves.size());
    for (Field field : moves) {
        Board test = board.copy();
        Board test2 = board.copy();
        test.setField(field, m);
        test2.setField(field, m.other());
        if (test.isWinner(m)) {
            result.put(field, new Integer(50));
        } else if (test2.isWinner(m.other())) {
            result.put(field, new Integer(40));
        } else {
            result.put(field, new Integer(countSurroundings(field, board, m)));
        }
    }
    int maxValue = Collections.max(result.values());
    System.out.println(maxValue);
    Iterator&lt;Map.Entry&lt;Field, Integer>> it = result.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry&lt;Field, Integer> item = it.next();
        if (item.getValue().intValue() &lt; maxValue) {
            it.remove();
        }
    }
    it = result.entrySet().iterator();
    int next = (int) (Math.random() * new Double(result.size()));
    int count = 0;
    while (it.hasNext()) {
        Map.Entry&lt;Field, Integer> item = it.next();
        if (count == next) {
            System.out.println(m.toString() + &quot; chose &quot; + item.getKey().toString());
            return item.getKey();
        }
        count++;
    }
    return null;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_y1PjYes3Eea7AqSsB_lc7w" name="countSurroundings" specification="_y1O8UOs3Eea7AqSsB_lc7w">
                <language>JAVA</language>
                <body>
    int result = 0;
    for (int z = -1; z &lt;= 0; z++) {
        for (int i = -1; i &lt;= 1; i++) {
            for (int a = -1; a &lt;= 1; a++) {
                Field neighbour = board.walkField(field, i, a, z);
                //next to field of same color
                if (neighbour != null) {
                    Mark nextmark = board.getMark(neighbour);
                    if (nextmark != null &amp;&amp; nextmark.equals(m)) {
                        result++;
                    }
                } else //next to boundary
                if (neighbour == null) {
                    result++;
                }
            }
        }
    }
    return result;
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_y1MgEes3Eea7AqSsB_lc7w" name="getName" visibility="public" method="_y1NHIes3Eea7AqSsB_lc7w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_y1NHIOs3Eea7AqSsB_lc7w" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_y1NHIus3Eea7AqSsB_lc7w" name="determineMove" visibility="public" method="_y1OVQOs3Eea7AqSsB_lc7w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_y1NuMOs3Eea7AqSsB_lc7w" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_y1NuMes3Eea7AqSsB_lc7w" name="board"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_y1NuMus3Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_y1O8UOs3Eea7AqSsB_lc7w" name="countSurroundings" visibility="public" method="_y1PjYes3Eea7AqSsB_lc7w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_y1O8Ues3Eea7AqSsB_lc7w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_y1O8Uus3Eea7AqSsB_lc7w" name="field"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_y1O8U-s3Eea7AqSsB_lc7w" name="board"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_y1PjYOs3Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_Ml3rwOvbEeaFWsKBBqDStg" name="Client" visibility="public">
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmIKcOvbEeaFWsKBBqDStg" name="playerName" visibility="private" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmKmsOvbEeaFWsKBBqDStg" name="opponentName" visibility="private" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmMb4OvbEeaFWsKBBqDStg" name="playerId" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmOREOvbEeaFWsKBBqDStg" name="currentTurnId" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmPfMOvbEeaFWsKBBqDStg" name="online" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmQGQOvbEeaFWsKBBqDStg" name="inGame" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_MmR7cOvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>false</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmXbAOvbEeaFWsKBBqDStg" name="aiEnabled" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_MmYCEOvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>false</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmZQMOvbEeaFWsKBBqDStg" name="board" visibility="private" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmZQMevbEeaFWsKBBqDStg" name="serverHandler" visibility="private" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmZ3QOvbEeaFWsKBBqDStg" name="view" visibility="private" type="_71-Q8OsfEeagpPVreqOLZw" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmeIsOvbEeaFWsKBBqDStg" name="ai" visibility="private" type="_jZtpgOs3Eea7AqSsB_lc7w" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_MmfW0OvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>new ComputerPlayer(new Hard())</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmhMAOvbEeaFWsKBBqDStg" name="aServer" visibility="private" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_MmjBMOvbEeaFWsKBBqDStg" name="canChat" visibility="public" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
              </ownedAttribute>
              <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_MmD5AOvbEeaFWsKBBqDStg" name="Client implements Observer" client="_Ml3rwOvbEeaFWsKBBqDStg" supplier="_Ml6IAOvbEeaFWsKBBqDStg" contract="_Ml6IAOvbEeaFWsKBBqDStg"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Mmpu4OvbEeaFWsKBBqDStg" name="Client" specification="_MmkPUOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.playerName = &quot;NoNamePepeAI&quot;;
    this.board = new Board();
    this.board.addObserver(this);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MmsLIOvbEeaFWsKBBqDStg" name="createNewView" specification="_MmrkEOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    try {
        this.view = new ClientTUIView(this);
        this.view.run();
    } catch (IOException e1) {
        System.out.println(&quot;could not create view&quot;);
        System.exit(0);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Mm0uAOvbEeaFWsKBBqDStg" name="update" specification="_MmxqsOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (this.view != null &amp;&amp; obj.equals(&quot;boardchanged&quot;)) {
        this.view.showBoard();
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Mm3KQOvbEeaFWsKBBqDStg" name="setOnline" specification="_Mm1VEOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.online = input;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Mm5mgOvbEeaFWsKBBqDStg" name="setPlayerName" specification="_Mm4YYOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.playerName = input;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Mm7bsOvbEeaFWsKBBqDStg" name="setAI" specification="_Mm6NkOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.ai = player;
    this.playerName = player.getName();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Mm938OvbEeaFWsKBBqDStg" name="setInGame" specification="_Mm8p0OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.inGame = input;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnBiUOvbEeaFWsKBBqDStg" name="getServerHandler" specification="_Mm_GEOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.serverHandler;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnDXgOvbEeaFWsKBBqDStg" name="getCurrentTurnId" specification="_MnCJYOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.currentTurnId;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnD-kOvbEeaFWsKBBqDStg" name="getPlayerId" specification="_MnDXgevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.playerId;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnEloevbEeaFWsKBBqDStg" name="getBoard" specification="_MnD-kevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.board;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnGa0OvbEeaFWsKBBqDStg" name="getCapabilities" specification="_MnElouvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return Protocol.ProtClient.SENDCAPABILITIES + &quot; 2 &quot; + this.playerName + &quot; 0 4 4 4 4 1 0&quot;;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnIQAOvbEeaFWsKBBqDStg" name="isOnline" specification="_MnHo8OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.online;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnKFMOvbEeaFWsKBBqDStg" name="isInGame" specification="_MnIQAevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.inGame;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnMhcOvbEeaFWsKBBqDStg" name="toggleAI" specification="_MnLTUOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.aiEnabled = !this.aiEnabled;
    return aiEnabled;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnPkwOvbEeaFWsKBBqDStg" name="atAI" specification="_MnNvkOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (inputSplit[2].equals(&quot;easy&quot;)) {
        createAiGame(inputSplit[1], new Easy());
    } else if (inputSplit[2].equals(&quot;medium&quot;)) {
        createAiGame(inputSplit[1], new Medium());
    } else if (inputSplit[2].equals(&quot;hard&quot;)) {
        createAiGame(inputSplit[1], new Hard());
    } else {
        sendToView(&quot;Retry and enter a valid difficulty&quot;);
        restart();
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnRZ8OvbEeaFWsKBBqDStg" name="createAiGame" specification="_MnQL0OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.aServer = new Server();
    this.aServer.startServer(input);
    Client client = new Client();
    client.setAI(new ComputerPlayer(dif));
    client.toggleAI();
    client.connectToServer(&quot;localhost&quot;, input);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnT2MevbEeaFWsKBBqDStg" name="atTurnOfPlayer" specification="_MnSBAOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //notify the player whose turn it is
    try {
        //get the id of the current player
        this.currentTurnId = Integer.parseInt(inputSplit[1]);
        //compare current player to clientId to see who it is
        if (this.currentTurnId == getPlayerId()) {
            sendToView(&quot;It is your turn, type: 'move &lt;x> &lt;y>' to make a move.&quot;);
            //let the AI make a move for you
            if (this.aiEnabled) {
                Field field = this.ai.determineMove(board, Mark.X);
                sendToServer(Protocol.ProtClient.MAKEMOVE + &quot; &quot; + field.getMove());
            }
        } else {
            sendToView(&quot;It is the turn of player &quot; + this.opponentName);
        }
    } catch (NumberFormatException e) {
        sendToView(&quot;Server is sending rubbish, NumberFormatException&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnWScOvbEeaFWsKBBqDStg" name="atAssignId" specification="_MnUdQOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //set player ID
    try {
        this.playerId = Integer.parseInt(inputSplit[1]);
        //ask for more client input or notify waiting
        if (isOnline()) {
            sendToView(&quot;Connection established, waiting for other players&quot;);
        } else if (!isOnline()) {
            sendToView(&quot;Enter AI difficulty 'easy'/'medium'/'hard'&quot;);
        }
    } catch (NumberFormatException e) {
        sendToView(&quot;Server is sending rubbish, NumberFormatException&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnZVwOvbEeaFWsKBBqDStg" name="atStartGame" specification="_MnW5gOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //notify the client that the game has started and create a board
    this.inGame = true;
    sendToView(&quot;Game has started&quot;);
    refreshBoard();
    //set opponent name as name of player with not this id
    String[] inputSplit2 = inputSplit[2].split(&quot;\\|&quot;);
    String[] inputSplit3 = inputSplit[3].split(&quot;\\|&quot;);
    if (Integer.parseInt(inputSplit2[0]) == this.playerId &amp;&amp; inputSplit3.length > 1) {
        opponentName = inputSplit3[1];
    } else if (Integer.parseInt(inputSplit3[0]) == this.playerId &amp;&amp; inputSplit2.length > 1) {
        opponentName = inputSplit2[1];
    } else {
        sendToView(&quot;Could not obtain opponent playername from game start.&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnbK8OvbEeaFWsKBBqDStg" name="atNotifyMove" specification="_MnZ80OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //notify player of the move
    if (this.serverHandler.isYou(inputSplit[1])) {
        sendToView(&quot;You made move x=&quot; + inputSplit[2] + &quot; y=&quot; + inputSplit[3]);
    } else {
        sendToView(this.opponentName + &quot; made move x=&quot; + inputSplit[2] + &quot; y=&quot; + inputSplit[3]);
    }
    //try to add the move to the board, needs to have integers for x and y
    try {
        int id = Integer.parseInt(inputSplit[1]);
        int x = Integer.parseInt(inputSplit[2]);
        int y = Integer.parseInt(inputSplit[3]);
        //player is always displayed/playing as Mark.Black
        if (id == this.playerId) {
            this.board.setField(x, y, Mark.X);
        } else {
            //opponent is always displayed/playing as Mark.White
            this.board.setField(x, y, Mark.O);
        }
    } catch (NumberFormatException e) {
        sendToView(&quot;Server is sending rubbish, NumberFormatException&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MncZEOvbEeaFWsKBBqDStg" name="atNotifyEnd" specification="_MnbK8evbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (inputSplit.length == 2) {
        //game has ended in a draw, notify client
        this.serverHandler.send(&quot;The game has ended in a draw, &quot; + &quot;type EXIT to exit the game and start a new one&quot;);
    } else if (inputSplit.length == 3) {
        if (inputSplit[1].equals(&quot;1&quot;)) {
            if (this.serverHandler.isYou(inputSplit[2])) {
                sendToView(&quot;You have won.&quot;);
            } else {
                sendToView(&quot;Player &quot; + this.opponentName + &quot; has won.&quot;);
            }
        } else if (inputSplit[1].equals(&quot;3&quot;)) {
            sendToView(&quot;Player &quot; + this.opponentName + &quot; has disconnected.&quot;);
        } else {
            sendToView(&quot;Unknown game end condition&quot;);
        }
    }
    this.inGame = false;
    restart();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MndnMuvbEeaFWsKBBqDStg" name="atNotifyMessage" specification="_MndAIOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    String result = inputSplit[1] + &quot;: &quot;;
    for (int i = 2; i &lt; inputSplit.length; i++) {
        result = result + inputSplit[i] + &quot; &quot;;
    }
    sendToView(result);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Mne1UOvbEeaFWsKBBqDStg" name="hint" specification="_MneOQOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (inGame &amp;&amp; this.currentTurnId == this.playerId) {
        Field field = this.ai.determineMove(this.board, Mark.X);
        return &quot;move(x y): &quot; + field.getMove();
    } else {
        return &quot;Hint is only available when it is your turn in game.&quot;;
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnfcYevbEeaFWsKBBqDStg" name="sendToServer" specification="_Mne1UevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (this.serverHandler != null) {
        this.serverHandler.send(input);
    } else {
        sendToView(&quot;Error connection to server is required for this action.&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MngqgOvbEeaFWsKBBqDStg" name="sendToView" specification="_MngDcOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (this.view != null) {
        this.view.send(input);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Mnh4oevbEeaFWsKBBqDStg" name="connectToServer" specification="_MnhRkOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    InetAddress addr = null;
    int port = Server.getPort(socketPort);
    // check args[1] - the IP-adress
    try {
        addr = InetAddress.getByName(ip);
    } catch (UnknownHostException e) {
        sendToView(&quot;ERROR: host &quot; + ip + &quot; unknown.&quot;);
        sendToView(&quot;try again&quot;);
    }
    // try to open a Socket 
    try {
        Socket sock = new Socket(addr, port);
        this.serverHandler = new ServerHandler(this, sock);
        new Thread(this.serverHandler).start();
        sendToView(&quot;setting up game...&quot;);
    } catch (IOException e) {
        sendToView(&quot;ERROR: could not create a socket on &quot; + addr + &quot; and port &quot; + port);
        sendToView(&quot;try again&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnifsOvbEeaFWsKBBqDStg" name="refreshBoard" specification="_Mnh4ouvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.board.reset();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnifsuvbEeaFWsKBBqDStg" name="restart" specification="_MnifsevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (this.serverHandler != null) {
        this.serverHandler.exit();
    }
    if (this.view != null) {
        sendToView(&quot;\n\nRestarting...&quot;);
        this.inGame = false;
        this.view.atStart();
    }
    //shutdown server if has one
    if (this.aServer != null) {
        this.aServer.shutDown();
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_MnkU4OvbEeaFWsKBBqDStg" name="main" specification="_MnjGwOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //construct a client
    Client aClient = new Client();
    aClient.createNewView();
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MmkPUOvbEeaFWsKBBqDStg" name="Client" visibility="public" method="_Mmpu4OvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MmrkEOvbEeaFWsKBBqDStg" name="createNewView" visibility="public" method="_MmsLIOvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MmxqsOvbEeaFWsKBBqDStg" name="update" visibility="public" method="_Mm0uAOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Mmy40OvbEeaFWsKBBqDStg" name="obs" type="_MmtZQOvbEeaFWsKBBqDStg"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Mmzf4OvbEeaFWsKBBqDStg" name="obj" type="_DJg-w-saEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Mm1VEOvbEeaFWsKBBqDStg" name="setOnline" visibility="public" method="_Mm3KQOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Mm18IOvbEeaFWsKBBqDStg" name="input">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Mm4YYOvbEeaFWsKBBqDStg" name="setPlayerName" visibility="public" method="_Mm5mgOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Mm4_cOvbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Mm6NkOvbEeaFWsKBBqDStg" name="setAI" visibility="public" method="_Mm7bsOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Mm60oOvbEeaFWsKBBqDStg" name="player" type="_jZtpgOs3Eea7AqSsB_lc7w"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Mm8p0OvbEeaFWsKBBqDStg" name="setInGame" visibility="public" method="_Mm938OvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Mm9Q4OvbEeaFWsKBBqDStg" name="input">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Mm_GEOvbEeaFWsKBBqDStg" name="getServerHandler" visibility="public" method="_MnBiUOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnAUMOvbEeaFWsKBBqDStg" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnCJYOvbEeaFWsKBBqDStg" name="getCurrentTurnId" visibility="public" method="_MnDXgOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnCwcOvbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnDXgevbEeaFWsKBBqDStg" name="getPlayerId" visibility="public" method="_MnD-kOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnDXguvbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnD-kevbEeaFWsKBBqDStg" name="getBoard" visibility="public" method="_MnEloevbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnEloOvbEeaFWsKBBqDStg" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnElouvbEeaFWsKBBqDStg" name="getCapabilities" visibility="public" method="_MnGa0OvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnFMsOvbEeaFWsKBBqDStg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnHo8OvbEeaFWsKBBqDStg" name="isOnline" visibility="public" method="_MnIQAOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnHo8evbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnIQAevbEeaFWsKBBqDStg" name="isInGame" visibility="public" method="_MnKFMOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnJeIOvbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnLTUOvbEeaFWsKBBqDStg" name="toggleAI" visibility="public" method="_MnMhcOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnL6YOvbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnNvkOvbEeaFWsKBBqDStg" name="atAI" visibility="public" method="_MnPkwOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnOWoOvbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_MnO9sOvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_MnO9sevbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnQL0OvbEeaFWsKBBqDStg" name="createAiGame" visibility="public" method="_MnRZ8OvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnQy4OvbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnQy4evbEeaFWsKBBqDStg" name="dif" type="_qb8WIOs3Eea7AqSsB_lc7w"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnSBAOvbEeaFWsKBBqDStg" name="atTurnOfPlayer" visibility="public" method="_MnT2MevbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnSoEOvbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_MnTPIOvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_MnT2MOvbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnUdQOvbEeaFWsKBBqDStg" name="atAssignId" visibility="public" method="_MnWScOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnVEUOvbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_MnVrYOvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_MnVrYevbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnW5gOvbEeaFWsKBBqDStg" name="atStartGame" visibility="public" method="_MnZVwOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnW5gevbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_MnYHoOvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_MnYusOvbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnZ80OvbEeaFWsKBBqDStg" name="atNotifyMove" visibility="public" method="_MnbK8OvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnZ80evbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_Mnaj4OvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_Mnaj4evbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnbK8evbEeaFWsKBBqDStg" name="atNotifyEnd" visibility="public" method="_MncZEOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnbyAOvbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_MnbyAevbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_MnbyAuvbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MndAIOvbEeaFWsKBBqDStg" name="atNotifyMessage" visibility="public" method="_MndnMuvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MndAIevbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_MndnMOvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_MndnMevbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MneOQOvbEeaFWsKBBqDStg" name="hint" visibility="public" method="_Mne1UOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MneOQevbEeaFWsKBBqDStg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Mne1UevbEeaFWsKBBqDStg" name="sendToServer" visibility="public" method="_MnfcYevbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnfcYOvbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MngDcOvbEeaFWsKBBqDStg" name="sendToView" visibility="public" method="_MngqgOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MngDcevbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnhRkOvbEeaFWsKBBqDStg" name="connectToServer" visibility="public" method="_Mnh4oevbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MnhRkevbEeaFWsKBBqDStg" name="ip" type="_DIE0UOsaEeaRPtCCR8m55A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Mnh4oOvbEeaFWsKBBqDStg" name="socketPort" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_Mnh4ouvbEeaFWsKBBqDStg" name="refreshBoard" visibility="public" method="_MnifsOvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnifsevbEeaFWsKBBqDStg" name="restart" visibility="public" method="_MnifsuvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MnjGwOvbEeaFWsKBBqDStg" name="main" visibility="public" isStatic="true" method="_MnkU4OvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_Mnjt0OvbEeaFWsKBBqDStg" name="args" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_Mnjt0evbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_Mnjt0uvbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_cdOmAOvbEeaFWsKBBqDStg" name="ServerHandler" visibility="public">
              <generalization xmi:type="uml:Generalization" xmi:id="_cdP0IOvbEeaFWsKBBqDStg" general="_9u5hcOsfEeagpPVreqOLZw"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_cdUFkOvbEeaFWsKBBqDStg" name="client" visibility="private" type="_Ml3rwOvbEeaFWsKBBqDStg" isUnique="false"/>
              <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_cdQbMOvbEeaFWsKBBqDStg" name="ServerHandler implements Runnable" client="_cdOmAOvbEeaFWsKBBqDStg" supplier="_-47L8OscEeaGGeTgDT8kcg" contract="_-47L8OscEeaGGeTgDT8kcg"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_cdYXAOvbEeaFWsKBBqDStg" name="ServerHandler" specification="_cdUFkevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    super(inSock.getInputStream(), inSock.getOutputStream());
    this.client = inputClient;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_cdY-EOvbEeaFWsKBBqDStg" name="onFailure" specification="_cdYXAevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //exit the terminal and close its streams.
    if (!super.exit) {
        this.client.restart();
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_cdY-EuvbEeaFWsKBBqDStg" name="atStart" specification="_cdY-EevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
//nada, wait for capabilities from server first
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_cdaMMevbEeaFWsKBBqDStg" name="send" specification="_cdZlIOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    super.send(input);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_cdbaUOvbEeaFWsKBBqDStg" name="handleInput" specification="_cdazQOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //System.out.println(&quot;server sends: &quot; + input); //for testing
    //split input around spaces
    String[] inputSplit = input.split(&quot; &quot;);
    if (inputSplit[0].equals(Protocol.ProtServer.SERVERCAPABILITIES)) {
        //respond with capabilities of the client
        send(this.client.getCapabilities());
        if (inputSplit.length > 7 &amp;&amp; inputSplit[7].equals(&quot;1&quot;) &amp;&amp; this.client.isOnline()) {
            this.client.canChat = true;
        } else {
            this.client.canChat = false;
        }
    } else if (inputSplit[0].equals(Protocol.ProtServer.NOTIFYMESSAGE) &amp;&amp; this.client.canChat) {
        this.client.atNotifyMessage(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.ASSIGNID)) {
        this.client.atAssignId(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.STARTGAME)) {
        this.client.atStartGame(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.TURNOFPLAYER)) {
        this.client.atTurnOfPlayer(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.NOTIFYMOVE)) {
        this.client.atNotifyMove(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.NOTIFYEND) &amp;&amp; inputSplit.length == 2 || inputSplit.length == 3) {
        this.client.atNotifyEnd(inputSplit);
    } else if (inputSplit[0].equals(&quot;error&quot;) &amp;&amp; inputSplit.length == 2) {
        this.client.sendToView(Protocol.getError(inputSplit[1]));
    } else if (inputSplit[0].equals(&quot;byebye&quot;)) {
        this.client.sendToView(&quot;Server connection dropped, restarting&quot;);
        this.client.restart();
    } else {
        this.client.sendToView(&quot;Server is sending an unknown command&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_cddPgOvbEeaFWsKBBqDStg" name="isYou" specification="_cdcBYOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return Integer.parseInt(inputId) == this.client.getPlayerId();
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_cdUFkevbEeaFWsKBBqDStg" name="ServerHandler" visibility="private" method="_cdYXAOvbEeaFWsKBBqDStg" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_cdXv8OvbEeaFWsKBBqDStg" name="inputClient" type="_Ml3rwOvbEeaFWsKBBqDStg"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_cdXv8evbEeaFWsKBBqDStg" name="inSock" type="_-4_dYuscEeaGGeTgDT8kcg"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_cdYXAevbEeaFWsKBBqDStg" name="onFailure" visibility="public" method="_cdY-EOvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_cdY-EevbEeaFWsKBBqDStg" name="atStart" visibility="public" method="_cdY-EuvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_cdZlIOvbEeaFWsKBBqDStg" name="send" visibility="public" method="_cdaMMevbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_cdaMMOvbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_cdazQOvbEeaFWsKBBqDStg" name="handleInput" visibility="public" method="_cdbaUOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_cdazQevbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_cdcBYOvbEeaFWsKBBqDStg" name="isYou" visibility="public" method="_cddPgOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_cdcBYevbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_cdcocOvbEeaFWsKBBqDStg" name="inputId" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_ebgeUOvgEea_C-H5NfTs0A" name="Hard" visibility="public">
              <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_ebhFYOvgEea_C-H5NfTs0A" name="Hard implements Difficulty" client="_ebgeUOvgEea_C-H5NfTs0A" supplier="_qb8WIOs3Eea7AqSsB_lc7w" contract="_qb8WIOs3Eea7AqSsB_lc7w"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ebhscevgEea_C-H5NfTs0A" name="getName" specification="_ebhFYevgEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    return &quot;hard&quot;;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ebi6kOvgEea_C-H5NfTs0A" name="determineMove" specification="_ebhscuvgEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Map&lt;Field, Integer> result = this.getResultMap(board, m);
    //Choose candidate with highest potential score
    int maxValue = Collections.max(result.values());
    Iterator&lt;Map.Entry&lt;Field, Integer>> it = result.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry&lt;Field, Integer> item = it.next();
        if (item.getValue().intValue() &lt; maxValue) {
            it.remove();
        }
    }
    it = result.entrySet().iterator();
    int next = (int) (Math.random() * new Double(result.size()));
    int count = 0;
    while (it.hasNext()) {
        Map.Entry&lt;Field, Integer> item = it.next();
        if (count == next) {
            return item.getKey();
        }
        count++;
    }
    return null;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ebkIsevgEea_C-H5NfTs0A" name="getMoves" specification="_ebi6kevgEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    ArrayList&lt;Field> moves = new ArrayList&lt;Field>();
    for (int x = 0; x &lt;= Board.MAXFIELD; x++) {
        for (int y = 0; y &lt;= Board.MAXFIELD; y++) {
            Field empty = board.getEmptyField(x, y);
            if (empty != null) {
                moves.add(empty);
            }
        }
    }
    return moves;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_eblW0evgEea_C-H5NfTs0A" name="getFutureImpact" specification="_ebkvwOvgEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    int result = 0;
    ArrayList&lt;Field> moves = this.getMoves(board);
    for (Field field : moves) {
        Board myboard = board.copy();
        Board enemboard = board.copy();
        myboard.setField(field, m);
        enemboard.setField(field, m.other());
        if (myboard.isWinner(m)) {
            result += 50;
        } else if (enemboard.isWinner(m.other())) {
            result -= 50;
        }
    }
    return result;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ebmk8uvgEea_C-H5NfTs0A" name="getResultMap" specification="_ebl94OvgEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    Map&lt;Field, Integer> result = new HashMap&lt;Field, Integer>();
    ArrayList&lt;Field> moves = this.getMoves(board);
    for (Field field : moves) {
        Board myboard = board.copy();
        Board enemboard = board.copy();
        myboard.setField(field, m);
        enemboard.setField(field, m.other());
        if (myboard.isWinner(m)) {
            result.put(field, new Integer(500));
        } else if (enemboard.isWinner(m.other())) {
            result.put(field, new Integer(100));
        } else {
            result.put(field, new Integer(countSurroundings(field, board, m) + getFutureImpact(myboard, m)));
        }
    //result.put(field, result.get(field) + getFutureImpact(myboard, m));
    }
    return result;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_eboaIOvgEea_C-H5NfTs0A" name="countSurroundings" specification="_ebnMAOvgEea_C-H5NfTs0A">
                <language>JAVA</language>
                <body>
    int result = 0;
    for (int z = -1; z &lt;= 1; z++) {
        for (int i = -1; i &lt;= 1; i++) {
            for (int a = -1; a &lt;= 1; a++) {
                Field neighbour = board.walkField(field, i, a, z);
                //next to field of same color
                if (neighbour != null) {
                    Mark nextmark = board.getMark(neighbour);
                    if (nextmark != null &amp;&amp; nextmark.equals(m)) {
                        result++;
                    }
                } else if (//next to boundary
                neighbour == null) {
                    result++;
                }
            }
        }
    }
    return result;
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ebhFYevgEea_C-H5NfTs0A" name="getName" visibility="public" method="_ebhscevgEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebhscOvgEea_C-H5NfTs0A" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ebhscuvgEea_C-H5NfTs0A" name="determineMove" visibility="public" method="_ebi6kOvgEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebiTgOvgEea_C-H5NfTs0A" type="_QNhLEOvfEea_C-H5NfTs0A" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebiTgevgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebiTguvgEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ebi6kevgEea_C-H5NfTs0A" name="getMoves" visibility="public" method="_ebkIsevgEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebjhoOvgEea_C-H5NfTs0A" type="_QNhLEOvfEea_C-H5NfTs0A" direction="return">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_ebjhoevgEea_C-H5NfTs0A"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_ebjhouvgEea_C-H5NfTs0A" value="*"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebkIsOvgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ebkvwOvgEea_C-H5NfTs0A" name="getFutureImpact" visibility="public" method="_eblW0evgEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebkvwevgEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebkvwuvgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_eblW0OvgEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ebl94OvgEea_C-H5NfTs0A" name="getResultMap" visibility="public" method="_ebmk8uvgEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebl94evgEea_C-H5NfTs0A" type="_DJGIAusaEeaRPtCCR8m55A" direction="return"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebmk8OvgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebmk8evgEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_ebnMAOvgEea_C-H5NfTs0A" name="countSurroundings" visibility="public" method="_eboaIOvgEea_C-H5NfTs0A">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebnMAevgEea_C-H5NfTs0A" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebnMAuvgEea_C-H5NfTs0A" name="field" type="_QNhLEOvfEea_C-H5NfTs0A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebnzEOvgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_ebnzEevgEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Realization" xmi:id="_pHXkEOvgEea_C-H5NfTs0A" name="implements" client="_ebgeUOvgEea_C-H5NfTs0A" supplier="_L9C44Os5Eea7AqSsB_lc7w"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Package" xmi:id="_sHHycOsfEeagpPVreqOLZw" name="server">
            <packagedElement xmi:type="uml:Class" xmi:id="_zgjXsOvbEeaFWsKBBqDStg" name="ClientHandler" visibility="public">
              <generalization xmi:type="uml:Generalization" xmi:id="_zgj-wOvbEeaFWsKBBqDStg" general="_9u5hcOsfEeagpPVreqOLZw"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_zgnpIOvbEeaFWsKBBqDStg" name="server" visibility="private" isLeaf="true" type="_zgkl0evbEeaFWsKBBqDStg" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_zgoQMOvbEeaFWsKBBqDStg" name="playerName" visibility="private" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_zgoQMevbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>&quot;notSendYet&quot;</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_zgoQMuvbEeaFWsKBBqDStg" name="playerId" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_zgrTgOvbEeaFWsKBBqDStg" name="game" visibility="private" type="_ydeKEOvbEeaFWsKBBqDStg" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_zgrTgevbEeaFWsKBBqDStg" name="canChat" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_zgrTguvbEeaFWsKBBqDStg" name="disconnected" visibility="public" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_zgr6kOvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>false</body>
                </defaultValue>
              </ownedAttribute>
              <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_zgkl0OvbEeaFWsKBBqDStg" name="ClientHandler implements Runnable" client="_zgjXsOvbEeaFWsKBBqDStg" supplier="_-47L8OscEeaGGeTgDT8kcg" contract="_-47L8OscEeaGGeTgDT8kcg"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zgwzEOvbEeaFWsKBBqDStg" name="ClientHandler" specification="_zgr6kevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    super(inSock.getInputStream(), inSock.getOutputStream());
    this.server = inServer;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zgxaIevbEeaFWsKBBqDStg" name="setPlayerName" specification="_zgwzEevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.playerName = input;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zgyoQOvbEeaFWsKBBqDStg" name="setPlayerId" specification="_zgyBMOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.playerId = id;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zgz2YOvbEeaFWsKBBqDStg" name="setPlayerGame" specification="_zgzPUOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.game = inputGame;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zg1rkOvbEeaFWsKBBqDStg" name="getPlayerName" specification="_zgz2YevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.playerName;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zg2SouvbEeaFWsKBBqDStg" name="getPlayerId" specification="_zg2SoOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.playerId;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zg25suvbEeaFWsKBBqDStg" name="getPlayerGame" specification="_zg25sOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.game;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zg4H0evbEeaFWsKBBqDStg" name="setClientCapabilities" specification="_zg3gwOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    // this.clientCapabilities = inputSplit;
    this.playerName = inputSplit[2];
    if (inputSplit.length > 8 &amp;&amp; inputSplit[8].equals(&quot;1&quot;)) {
        this.canChat = true;
    } else {
        this.canChat = false;
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zg5V8OvbEeaFWsKBBqDStg" name="send" specification="_zg4H0uvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (!disconnected) {
        super.send(input);
    }
    //send all communication (except pings) to serverTUI as required
    if (!input.equals(&quot;ping&quot;)) {
        this.server.sendToView(&quot;sent(To &quot; + this.playerName + &quot;): &quot; + input);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zg5V8uvbEeaFWsKBBqDStg" name="atStart" specification="_zg5V8evbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //first action from the server, send capabilities as described in protocol
    send(Protocol.ProtServer.SERVERCAPABILITIES + Server.CAPABILITIES);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zg59AevbEeaFWsKBBqDStg" name="onFailure" specification="_zg59AOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.disconnected = true;
    if (this.game != null) {
        this.game.leaveGame(this);
    }
    if (this.server != null) {
        this.server.leaveServer(this);
    }
    //exit the terminal and close its streams.
    super.exit();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_zg7yMOvbEeaFWsKBBqDStg" name="handleInput" specification="_zg6kEOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //send communication to serverTUI as required
    this.server.sendToView(&quot;client (&quot; + this.playerName + &quot;): &quot; + input);
    //split input around spaces
    String[] inputSplit = input.split(&quot; &quot;);
    //check which command is given (always the first word)
    if (inputSplit[0].equals(Protocol.ProtClient.SENDCAPABILITIES)) {
        setClientCapabilities(inputSplit);
        this.server.joinGame(this);
    } else if (inputSplit[0].equals(Protocol.ProtClient.SENDMESSAGE) &amp;&amp; this.canChat) {
        this.server.sendChat(inputSplit, this.playerName);
    } else if (inputSplit[0].equals(Protocol.ProtClient.MAKEMOVE) &amp;&amp; inputSplit.length == 3) {
        try {
            int x = Integer.parseInt(inputSplit[1]);
            int y = Integer.parseInt(inputSplit[2]);
            this.game.makeMove(x, y, this);
        } catch (NumberFormatException e) {
            send(&quot;error 4&quot;);
        }
    } else {
        //error 4 ==> invalidCommand
        send(&quot;error 4&quot;);
    }
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zgr6kevbEeaFWsKBBqDStg" name="ClientHandler" visibility="public" method="_zgwzEOvbEeaFWsKBBqDStg" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zgvk8OvbEeaFWsKBBqDStg" name="inServer" type="_zgkl0evbEeaFWsKBBqDStg"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zgwMAOvbEeaFWsKBBqDStg" name="inSock" type="_-4_dYuscEeaGGeTgDT8kcg"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zgwzEevbEeaFWsKBBqDStg" name="setPlayerName" visibility="public" method="_zgxaIevbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zgxaIOvbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zgyBMOvbEeaFWsKBBqDStg" name="setPlayerId" visibility="public" method="_zgyoQOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zgyBMevbEeaFWsKBBqDStg" name="id">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zgzPUOvbEeaFWsKBBqDStg" name="setPlayerGame" visibility="public" method="_zgz2YOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zgzPUevbEeaFWsKBBqDStg" name="inputGame" type="_ydeKEOvbEeaFWsKBBqDStg"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zgz2YevbEeaFWsKBBqDStg" name="getPlayerName" visibility="public" method="_zg1rkOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zg0dcOvbEeaFWsKBBqDStg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zg2SoOvbEeaFWsKBBqDStg" name="getPlayerId" visibility="public" method="_zg2SouvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zg2SoevbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zg25sOvbEeaFWsKBBqDStg" name="getPlayerGame" visibility="public" method="_zg25suvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zg25sevbEeaFWsKBBqDStg" type="_ydeKEOvbEeaFWsKBBqDStg" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zg3gwOvbEeaFWsKBBqDStg" name="setClientCapabilities" visibility="public" method="_zg4H0evbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zg3gwevbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_zg3gwuvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_zg4H0OvbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zg4H0uvbEeaFWsKBBqDStg" name="send" visibility="public" method="_zg5V8OvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zg4u4OvbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zg5V8evbEeaFWsKBBqDStg" name="atStart" visibility="public" method="_zg5V8uvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zg59AOvbEeaFWsKBBqDStg" name="onFailure" visibility="public" method="_zg59AevbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_zg6kEOvbEeaFWsKBBqDStg" name="handleInput" visibility="public" method="_zg7yMOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_zg7LIOvbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_zgkl0evbEeaFWsKBBqDStg" name="Server" visibility="public">
              <generalization xmi:type="uml:Generalization" xmi:id="_0ZcukOvbEeaFWsKBBqDStg" general="_DIN-QOsaEeaRPtCCR8m55A"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_0ZdVoOvbEeaFWsKBBqDStg" name="serverSocket" visibility="private" type="_x6FPkOsfEeagpPVreqOLZw" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_0Zd8sOvbEeaFWsKBBqDStg" name="view" visibility="private" type="_71-Q8esfEeagpPVreqOLZw" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_0Zd8sevbEeaFWsKBBqDStg" name="running" visibility="public" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_0Zd8suvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>false</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_0ZejwOvbEeaFWsKBBqDStg" name="CAPABILITIES" visibility="public" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_0ZejwevbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>&quot; 2 0 4 4 4 4 1&quot;</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_0ZiOIOvbEeaFWsKBBqDStg" name="clientHandlerList" visibility="private" type="_zgjXsOvbEeaFWsKBBqDStg" isUnique="false">
                <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_0ZiOIevbEeaFWsKBBqDStg"/>
                <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_0Zi1MOvbEeaFWsKBBqDStg" value="*"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_0Zi1MevbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>new ArrayList&lt;ClientHandler>()</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_0Zi1MuvbEeaFWsKBBqDStg" name="gameList" visibility="private" type="_ydeKEOvbEeaFWsKBBqDStg" isUnique="false">
                <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_0ZjcQOvbEeaFWsKBBqDStg"/>
                <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_0ZjcQevbEeaFWsKBBqDStg" value="*"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_0ZjcQuvbEeaFWsKBBqDStg" name="defaultValue">
                  <language>JAVA</language>
                  <body>new ArrayList&lt;Game>()</body>
                </defaultValue>
              </ownedAttribute>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZmfkevbEeaFWsKBBqDStg" name="Server" specification="_0ZjcQ-vbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
//new PingThread(this).start();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZnGoevbEeaFWsKBBqDStg" name="createView" specification="_0ZnGoOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    try {
        this.view = new ServerTUIView(this);
        this.view.run();
    } catch (IOException e1) {
        System.out.println(&quot;Could not create TUI vor server.&quot;);
        System.exit(0);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZoUwuvbEeaFWsKBBqDStg" name="sendChat" specification="_0ZntsOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    String result = Protocol.ProtServer.NOTIFYMESSAGE + &quot; &quot; + name + &quot; &quot;;
    for (int i = 1; i &lt; inputSplit.length; i++) {
        result = result + inputSplit[i] + &quot; &quot;;
    }
    for (ClientHandler c : clientHandlerList) {
        c.send(result);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0Zo70uvbEeaFWsKBBqDStg" name="leaveServer" specification="_0Zo70OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    clientHandlerList.remove(client);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0Zpi4uvbEeaFWsKBBqDStg" name="removeGame" specification="_0Zpi4OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    this.gameList.remove(game);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZqxAOvbEeaFWsKBBqDStg" name="startServer" specification="_0ZqJ8OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (this.running) {
        sendToView(&quot;Server already running, exit and restart to run server on different port.&quot;);
    } else {
        // parse input - the port
        int port = getPort(input);
        try {
            if (port == 0) {
                sendToView(&quot;Could not create ServerSocket on port: &quot; + port);
                sendToView(&quot;Try again, note that port should not be in use and higher than 0.&quot;);
                this.running = false;
            } else {
                this.serverSocket = new ServerSocket(port);
                this.start();
                this.running = true;
            }
        } catch (IOException e1) {
            sendToView(&quot;Could not create ServerSocket on port: &quot; + port);
            sendToView(&quot;Try again, note that port should not be in use and higher than 0.&quot;);
            this.running = false;
        }
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZqxAuvbEeaFWsKBBqDStg" name="run" specification="_0ZqxAevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    accepter();
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZrYEuvbEeaFWsKBBqDStg" name="sendToView" specification="_0ZrYEOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    if (this.view != null) {
        this.view.send(input);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0Zr_IevbEeaFWsKBBqDStg" name="shutDown" specification="_0Zr_IOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    for (ClientHandler c : this.clientHandlerList) {
        c.send(&quot;byebye&quot;);
    }
    this.running = false;
    if (this.view != null) {
        this.view.exit();
    }
    if (this.serverSocket != null) {
        try {
            this.serverSocket.close();
        } catch (IOException e) {
            sendToView(&quot;could not close serversocket&quot;);
        }
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZsmMevbEeaFWsKBBqDStg" name="getServerSocket" specification="_0Zr_IuvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.serverSocket;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZtNQ-vbEeaFWsKBBqDStg" name="getClientHandlerList" specification="_0ZsmMuvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.clientHandlerList;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZubYOvbEeaFWsKBBqDStg" name="getGameList" specification="_0Zt0UOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    return this.gameList;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZvCcOvbEeaFWsKBBqDStg" name="accepter" specification="_0ZubYevbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    sendToView(&quot;Server started, ready to accept incoming connections&quot;);
    while (this.running) {
        Socket sock = null;
        try {
            sock = this.serverSocket.accept();
            sendToView(&quot;New client connected!&quot;);
        } catch (IOException e1) {
            sendToView(&quot;Could not accept connection on serversocket.&quot;);
        }
        if (!this.serverSocket.isClosed()) {
            try {
                ClientHandler clientHandler = new ClientHandler(this, sock);
                this.clientHandlerList.add(clientHandler);
                new Thread(clientHandler).start();
            } catch (IOException e1) {
                sendToView(&quot;Could not create client handler.&quot;);
            }
        }
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0ZzT4OvbEeaFWsKBBqDStg" name="joinGame" specification="_0ZvpgOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //search for available games and start them &amp;&amp; and player if found
    Game game = null;
    int i = 0;
    //search for game available to join
    while (game == null &amp;&amp; i &lt; this.gameList.size()) {
        //game is available if it is not full
        if (!this.gameList.get(i).isFull()) {
            sendToView(&quot;game &quot; + i + &quot; was joined&quot;);
            game = this.gameList.get(i);
        }
        //continue
        i++;
    }
    //if no game found make a new one
    if (game == null) {
        sendToView(&quot;new game created&quot;);
        game = new Game(this);
        this.gameList.add(game);
    }
    //add the handler to the game        
    game.addPlayer(inputPlayer);
    //add the game to the handler 
    inputPlayer.setPlayerGame(game);
    //start the game if it is full
    if (game.isFull()) {
        game.start();
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0Z1JEOvbEeaFWsKBBqDStg" name="getPort" specification="_0Zz68OvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    int result = 0;
    try {
        result = Integer.parseInt(input);
    } catch (NumberFormatException e) {
        System.out.println(&quot;ERROR: &quot; + input + &quot; is not an integer&quot;);
    }
    return result;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_0Z3lUOvbEeaFWsKBBqDStg" name="main" specification="_0Z1wIOvbEeaFWsKBBqDStg">
                <language>JAVA</language>
                <body>
    //create a new server
    Server aServer = new Server();
    aServer.createView();
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZjcQ-vbEeaFWsKBBqDStg" name="Server" visibility="public" method="_0ZmfkevbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZnGoOvbEeaFWsKBBqDStg" name="createView" visibility="public" method="_0ZnGoevbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZntsOvbEeaFWsKBBqDStg" name="sendChat" visibility="public" method="_0ZoUwuvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0ZntsevbEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_0ZntsuvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_0ZoUwOvbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0ZoUwevbEeaFWsKBBqDStg" name="name" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0Zo70OvbEeaFWsKBBqDStg" name="leaveServer" visibility="public" method="_0Zo70uvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0Zo70evbEeaFWsKBBqDStg" name="client" type="_zgjXsOvbEeaFWsKBBqDStg"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0Zpi4OvbEeaFWsKBBqDStg" name="removeGame" visibility="public" method="_0Zpi4uvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0Zpi4evbEeaFWsKBBqDStg" name="game" type="_ydeKEOvbEeaFWsKBBqDStg"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZqJ8OvbEeaFWsKBBqDStg" name="startServer" visibility="public" method="_0ZqxAOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0ZqJ8evbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZqxAevbEeaFWsKBBqDStg" name="run" visibility="public" method="_0ZqxAuvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZrYEOvbEeaFWsKBBqDStg" name="sendToView" visibility="public" method="_0ZrYEuvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0ZrYEevbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0Zr_IOvbEeaFWsKBBqDStg" name="shutDown" visibility="public" method="_0Zr_IevbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0Zr_IuvbEeaFWsKBBqDStg" name="getServerSocket" visibility="public" method="_0ZsmMevbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0ZsmMOvbEeaFWsKBBqDStg" type="_x6FPkOsfEeagpPVreqOLZw" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZsmMuvbEeaFWsKBBqDStg" name="getClientHandlerList" visibility="public" method="_0ZtNQ-vbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0ZtNQOvbEeaFWsKBBqDStg" type="_zgjXsOvbEeaFWsKBBqDStg" direction="return">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_0ZtNQevbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_0ZtNQuvbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0Zt0UOvbEeaFWsKBBqDStg" name="getGameList" visibility="public" method="_0ZubYOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0Zt0UevbEeaFWsKBBqDStg" type="_ydeKEOvbEeaFWsKBBqDStg" direction="return">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_0Zt0UuvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_0Zt0U-vbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZubYevbEeaFWsKBBqDStg" name="accepter" visibility="public" method="_0ZvCcOvbEeaFWsKBBqDStg"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0ZvpgOvbEeaFWsKBBqDStg" name="joinGame" visibility="public" method="_0ZzT4OvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0Zys0OvbEeaFWsKBBqDStg" name="inputPlayer" type="_zgjXsOvbEeaFWsKBBqDStg"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0Zz68OvbEeaFWsKBBqDStg" name="getPort" visibility="public" isStatic="true" method="_0Z1JEOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0Zz68evbEeaFWsKBBqDStg" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
                </ownedParameter>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0Z0iAOvbEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_0Z1wIOvbEeaFWsKBBqDStg" name="main" visibility="public" isStatic="true" method="_0Z3lUOvbEeaFWsKBBqDStg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_0Z2XMOvbEeaFWsKBBqDStg" name="args" type="_DIE0UOsaEeaRPtCCR8m55A">
                  <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_0Z2-QOvbEeaFWsKBBqDStg"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_0Z2-QevbEeaFWsKBBqDStg" value="*"/>
                </ownedParameter>
              </ownedOperation>
            </packagedElement>
          </packagedElement>
          <packagedElement xmi:type="uml:Package" xmi:id="_719p4OsfEeagpPVreqOLZw" name="view">
            <packagedElement xmi:type="uml:Interface" xmi:id="_71-Q8OsfEeagpPVreqOLZw" name="ClientView" visibility="public">
              <generalization xmi:type="uml:Generalization" xmi:id="_71-Q8usfEeagpPVreqOLZw" general="_71-Q8esfEeagpPVreqOLZw"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_71-4AOsfEeagpPVreqOLZw" name="showBoard" visibility="public"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Interface" xmi:id="_71-Q8esfEeagpPVreqOLZw" name="View" visibility="public">
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MJEE8OsgEeagpPVreqOLZw" name="run" visibility="public"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MJEsAOsgEeagpPVreqOLZw" name="atStart" visibility="public"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MJEsAesgEeagpPVreqOLZw" name="handleInput" visibility="public">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MJEsAusgEeagpPVreqOLZw" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_MJFTEOsgEeagpPVreqOLZw" name="send" visibility="public">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_MJFTEesgEeagpPVreqOLZw" name="inpt" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_9u46YOsfEeagpPVreqOLZw" name="ServerTUIView" visibility="public">
              <generalization xmi:type="uml:Generalization" xmi:id="_9u7WoesfEeagpPVreqOLZw" general="_9u5hcOsfEeagpPVreqOLZw"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_9u79sOsfEeagpPVreqOLZw" name="server" visibility="private" isLeaf="true" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_9u8kwOsfEeagpPVreqOLZw" name="START" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_9u8kwesfEeagpPVreqOLZw" name="defaultValue">
                  <language>JAVA</language>
                  <body>&quot;start&quot;</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_9u9L0OsfEeagpPVreqOLZw" name="EXIT" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_9u9L0esfEeagpPVreqOLZw" name="defaultValue">
                  <language>JAVA</language>
                  <body>&quot;exit&quot;</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_9u9y4OsfEeagpPVreqOLZw" name="HELP" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_9u9y4esfEeagpPVreqOLZw" name="defaultValue">
                  <language>JAVA</language>
                  <body>&quot;help&quot;</body>
                </defaultValue>
              </ownedAttribute>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_9u-Z8OsfEeagpPVreqOLZw" name="SWITCH" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_9u-Z8esfEeagpPVreqOLZw" name="defaultValue">
                  <language>JAVA</language>
                  <body>&quot;switch&quot;</body>
                </defaultValue>
              </ownedAttribute>
              <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_9u7WousfEeagpPVreqOLZw" name="implements" client="_9u46YOsfEeagpPVreqOLZw" supplier="_71-Q8esfEeagpPVreqOLZw" contract="_71-Q8esfEeagpPVreqOLZw"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_9vCrYOsfEeagpPVreqOLZw" name="ServerTUIView" specification="_9u_BAOsfEeagpPVreqOLZw">
                <language>JAVA</language>
                <body>
    super(System.in, System.out);
    this.server = inServer;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_9vDScesfEeagpPVreqOLZw" name="atStart" specification="_9vDScOsfEeagpPVreqOLZw">
                <language>JAVA</language>
                <body>
    send(&quot;Enter 'start &lt;port>' to start the server.&quot;);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_9vEgkOsfEeagpPVreqOLZw" name="handleInput" specification="_9vD5gOsfEeagpPVreqOLZw">
                <language>JAVA</language>
                <body>
    String[] inputSplit = input.split(&quot; &quot;);
    if (input.equals(EXIT)) {
        super.send(&quot;Server is shutting down...&quot;);
        server.shutDown();
    } else if (inputSplit[0].equals(START) &amp;&amp; inputSplit.length == 2) {
        this.server.startServer(inputSplit[1]);
    } else if (input.equals(HELP)) {
        super.send(&quot;&quot;);
        super.send(&quot;VALID COMMANDS&quot;);
        super.send(&quot;Command:'&quot; + START + &quot;' ==> starts the server on port.&quot;);
        super.send(&quot;Command:'&quot; + EXIT + &quot;' ==> shutdown the server.&quot;);
        super.send(&quot;&quot;);
        super.send(&quot;Enter a command below.&quot;);
    } else if (input.equals(SWITCH)) {
        super.send(&quot;&quot;);
    } else {
        super.send(&quot;Invalid command, type 'HELP' to see valid commands.&quot;);
    }
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_9u_BAOsfEeagpPVreqOLZw" name="ServerTUIView" visibility="public" method="_9vCrYOsfEeagpPVreqOLZw" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_9vCEUOsfEeagpPVreqOLZw" name="inServer"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_9vDScOsfEeagpPVreqOLZw" name="atStart" visibility="public" method="_9vDScesfEeagpPVreqOLZw"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_9vD5gOsfEeagpPVreqOLZw" name="handleInput" visibility="public" method="_9vEgkOsfEeagpPVreqOLZw">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_9vD5gesfEeagpPVreqOLZw" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_9u5hcOsfEeagpPVreqOLZw" name="Terminal" visibility="public">
              <ownedAttribute xmi:type="uml:Property" xmi:id="_FBkJQOuNEeanyfTPa8UQ4w" name="in" visibility="protected" isLeaf="true" type="_FBbmYOuNEeanyfTPa8UQ4w" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_FBssIOuNEeanyfTPa8UQ4w" name="out" visibility="protected" isLeaf="true" type="_FBmlgOuNEeanyfTPa8UQ4w" isUnique="false"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_FBt6QOuNEeanyfTPa8UQ4w" name="exit" visibility="private" isUnique="false">
                <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
                <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_FBuhUOuNEeanyfTPa8UQ4w" name="defaultValue">
                  <language>JAVA</language>
                  <body>false</body>
                </defaultValue>
              </ownedAttribute>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_FB-Y8OuNEeanyfTPa8UQ4w" name="Terminal" specification="_FB5gcOuNEeanyfTPa8UQ4w">
                <language>JAVA</language>
                <body>
    this.in = new BufferedReader(new InputStreamReader(in));
    this.out = new BufferedWriter(new OutputStreamWriter(out));
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_FB_AAeuNEeanyfTPa8UQ4w" name="atStart" specification="_FB_AAOuNEeanyfTPa8UQ4w">
                <language>JAVA</language>
                <body>
    send(&quot;terminal started&quot;);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_FCAOIOuNEeanyfTPa8UQ4w" name="run" specification="_FB_nEOuNEeanyfTPa8UQ4w">
                <language>JAVA</language>
                <body>
    atStart();
    try {
        String line = in.readLine();
        //continuously read input and print it
        while (line != null &amp;&amp; !exit) {
            handleInput(line);
            line = in.readLine();
        }
    } catch (IOException e) {
        onFailure();
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_FCCDUeuNEeanyfTPa8UQ4w" name="send" specification="_FCBcQOuNEeanyfTPa8UQ4w">
                <language>JAVA</language>
                <body>
    try {
        out.write(input);
        out.newLine();
        out.flush();
    } catch (IOException e) {
        onFailure();
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_FCDRceuNEeanyfTPa8UQ4w" name="handleInput" specification="_FCCqYOuNEeanyfTPa8UQ4w">
                <language>JAVA</language>
                <body>
    send(input);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_FCFGoOuNEeanyfTPa8UQ4w" name="onFailure" specification="_FCD4gOuNEeanyfTPa8UQ4w">
                <language>JAVA</language>
                <body>
    System.out.println(&quot;Something went wrong with sending through socket&quot;);
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_FCFtsOuNEeanyfTPa8UQ4w" name="exit" specification="_FCFGoeuNEeanyfTPa8UQ4w">
                <language>JAVA</language>
                <body>
    this.exit = true;
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_FB5gcOuNEeanyfTPa8UQ4w" name="Terminal" visibility="public" method="_FB-Y8OuNEeanyfTPa8UQ4w" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_FB8jwOuNEeanyfTPa8UQ4w" name="in" type="_FB0A4OuNEeanyfTPa8UQ4w"/>
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_FB9K0OuNEeanyfTPa8UQ4w" name="out" type="_FB3EMOuNEeanyfTPa8UQ4w"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_FB_AAOuNEeanyfTPa8UQ4w" name="atStart" visibility="public" method="_FB_AAeuNEeanyfTPa8UQ4w"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_FB_nEOuNEeanyfTPa8UQ4w" name="run" visibility="public" method="_FCAOIOuNEeanyfTPa8UQ4w"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_FCBcQOuNEeanyfTPa8UQ4w" name="send" visibility="public" method="_FCCDUeuNEeanyfTPa8UQ4w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_FCCDUOuNEeanyfTPa8UQ4w" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_FCCqYOuNEeanyfTPa8UQ4w" name="handleInput" visibility="public" method="_FCDRceuNEeanyfTPa8UQ4w">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_FCDRcOuNEeanyfTPa8UQ4w" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_FCD4gOuNEeanyfTPa8UQ4w" name="onFailure" visibility="public" method="_FCFGoOuNEeanyfTPa8UQ4w"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_FCFGoeuNEeanyfTPa8UQ4w" name="exit" visibility="public" method="_FCFtsOuNEeanyfTPa8UQ4w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RPiPgOsgEeagpPVreqOLZw" name="ClientTUIView" visibility="public">
              <generalization xmi:type="uml:Generalization" xmi:id="_RPi2kOsgEeagpPVreqOLZw" general="_9u5hcOsfEeagpPVreqOLZw"/>
              <ownedAttribute xmi:type="uml:Property" xmi:id="_RPlS0OsgEeagpPVreqOLZw" name="client" visibility="private" isUnique="false"/>
              <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_RPkrwesgEeagpPVreqOLZw" name="implements" client="_RPiPgOsgEeagpPVreqOLZw" supplier="_71-Q8OsfEeagpPVreqOLZw" contract="_71-Q8OsfEeagpPVreqOLZw"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RPoWIOsgEeagpPVreqOLZw" name="ClientTUIView" specification="_RPlS0esgEeagpPVreqOLZw">
                <language>JAVA</language>
                <body>
    super(System.in, System.out);
    this.client = client;
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RPo9MOsgEeagpPVreqOLZw" name="showBoard" specification="_RPoWIesgEeagpPVreqOLZw">
                <language>JAVA</language>
                <body>
    send(this.client.getBoard().toString());
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RPpkQOsgEeagpPVreqOLZw" name="handleInput" specification="_RPo9MesgEeagpPVreqOLZw">
                <language>JAVA</language>
                <body>
    if (input != null) {
        //split input around spaces
        String[] inputSplit = input.split(&quot; &quot;);
        if (inputSplit[0].equals(&quot;multi&quot;)) {
            send(&quot;Enter 'start &lt;playername> &lt;server ip> &lt;port>' to continue.&quot;);
            this.client.setOnline(true);
        } else if (inputSplit[0].equals(Protocol.ProtClient.SENDMESSAGE) &amp;&amp; this.client.canChat) {
            this.client.sendToServer(input);
        } else if (inputSplit[0].equals(&quot;ai&quot;) &amp;&amp; inputSplit.length == 1) {
            send(&quot;Enter 'start &lt;port> &lt;ai difficulty ('easy'/'medium'/'hard')>' to continue.&quot;);
            this.client.setOnline(false);
        } else if (inputSplit[0].equals(&quot;start&quot;) &amp;&amp; this.client.isOnline() &amp;&amp; inputSplit.length == 4) {
            send(&quot;connecting to server...&quot;);
            this.client.setPlayerName(inputSplit[1]);
            this.client.connectToServer(inputSplit[2], inputSplit[3]);
        } else if (inputSplit[0].equals(&quot;start&quot;) &amp;&amp; !this.client.isOnline() &amp;&amp; inputSplit.length == 3) {
            this.client.atAI(inputSplit);
            this.client.connectToServer(&quot;localhost&quot;, inputSplit[1]);
        } else if (inputSplit[0].equals(&quot;aitoggle&quot;)) {
            if (this.client.toggleAI()) {
                this.client.sendToView(&quot;ai is now on&quot;);
            } else {
                this.client.sendToView(&quot;ai is now off&quot;);
            }
        } else if (inputSplit[0].equals(&quot;hint&quot;)) {
            send(this.client.hint());
        } else if (inputSplit[0].equals(&quot;restart&quot;)) {
            this.client.restart();
        } else if (inputSplit[0].equals(&quot;exit&quot;)) {
            System.exit(0);
        } else if (inputSplit[0].equals(&quot;move&quot;) &amp;&amp; inputSplit.length == 3 &amp;&amp; this.client.isInGame()) {
            this.client.getServerHandler().send(Protocol.ProtClient.MAKEMOVE + &quot; &quot; + inputSplit[1] + &quot; &quot; + inputSplit[2]);
        } else {
            send(&quot;You entered: '&quot; + input + &quot;' which is not valid input or can only be done if it is your turn in the game.&quot;);
            if (this.client.isInGame()) {
                if (this.client.getCurrentTurnId() != this.client.getPlayerId()) {
                    send(&quot;Note that it is not your turn now&quot;);
                }
            } else {
                send(&quot;Note that you are not in game right now&quot;);
            }
        }
    } else {
        send(&quot;null input, y u do this?&quot;);
    }
</body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RPpkQusgEeagpPVreqOLZw" name="atStart" specification="_RPpkQesgEeagpPVreqOLZw">
                <language>JAVA</language>
                <body>
    send(&quot;During the application you can enter:\n&quot; + &quot;'sendMessage &lt;message>' to chat in multiplayer\n&quot; + &quot;'hint' when in game to get a move suggested\n&quot; + &quot;'aitoggle' to enable/disable the computer playing for you\n&quot; + &quot;'exit' to exit the application or \n&quot; + &quot;'restart' to restart the application\n\n&quot;);
    send(&quot;Enter 'ai' to play against AI or &quot; + &quot;'multi' to play against other players&quot;);
</body>
              </ownedBehavior>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RPlS0esgEeagpPVreqOLZw" name="ClientTUIView" visibility="public" method="_RPoWIOsgEeagpPVreqOLZw" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RPnvEesgEeagpPVreqOLZw" name="client"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RPoWIesgEeagpPVreqOLZw" name="showBoard" visibility="public" method="_RPo9MOsgEeagpPVreqOLZw"/>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RPo9MesgEeagpPVreqOLZw" name="handleInput" visibility="public" method="_RPpkQOsgEeagpPVreqOLZw">
                <ownedParameter xmi:type="uml:Parameter" xmi:id="_RPo9MusgEeagpPVreqOLZw" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
              </ownedOperation>
              <ownedOperation xmi:type="uml:Operation" xmi:id="_RPpkQesgEeagpPVreqOLZw" name="atStart" visibility="public" method="_RPpkQusgEeagpPVreqOLZw"/>
            </packagedElement>
          </packagedElement>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_DIENQesaEeaRPtCCR8m55A" name="java">
      <packagedElement xmi:type="uml:Package" xmi:id="_DIENQusaEeaRPtCCR8m55A" name="java">
        <packagedElement xmi:type="uml:Package" xmi:id="_DIENQ-saEeaRPtCCR8m55A" name="lang">
          <packagedElement xmi:type="uml:Class" xmi:id="_DIE0UOsaEeaRPtCCR8m55A" name="String"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_DIN-QOsaEeaRPtCCR8m55A" name="Thread"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_DJg-w-saEeaRPtCCR8m55A" name="Object"/>
          <packagedElement xmi:type="uml:Interface" xmi:id="_-47L8OscEeaGGeTgDT8kcg" name="Runnable"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_2PIkQOsfEeagpPVreqOLZw" name="Exception"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Package" xmi:id="_DIm_0OsaEeaRPtCCR8m55A" name="util">
          <packagedElement xmi:type="uml:Package" xmi:id="_DIm_0esaEeaRPtCCR8m55A" name="concurrent">
            <packagedElement xmi:type="uml:Package" xmi:id="_DIm_0usaEeaRPtCCR8m55A" name="locks">
              <packagedElement xmi:type="uml:Class" xmi:id="_DIm_0-saEeaRPtCCR8m55A" name="Lock"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_DIqDIOsaEeaRPtCCR8m55A" name="Condition"/>
            </packagedElement>
          </packagedElement>
          <packagedElement xmi:type="uml:Class" xmi:id="_DJGIAusaEeaRPtCCR8m55A" name="Map"/>
          <packagedElement xmi:type="uml:Interface" xmi:id="_Ml6IAOvbEeaFWsKBBqDStg" name="Observer"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_MmtZQOvbEeaFWsKBBqDStg" name="Observable"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Package" xmi:id="_-4_dYescEeaGGeTgDT8kcg" name="net">
          <packagedElement xmi:type="uml:Class" xmi:id="_-4_dYuscEeaGGeTgDT8kcg" name="Socket"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_x6FPkOsfEeagpPVreqOLZw" name="ServerSocket"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Package" xmi:id="_-5EV4escEeaGGeTgDT8kcg" name="io">
          <packagedElement xmi:type="uml:Class" xmi:id="_-5EV4uscEeaGGeTgDT8kcg" name="IOException"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_FBbmYOuNEeanyfTPa8UQ4w" name="BufferedReader"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_FBmlgOuNEeanyfTPa8UQ4w" name="BufferedWriter"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_FB0A4OuNEeanyfTPa8UQ4w" name="InputStream"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_FB3EMOuNEeanyfTPa8UQ4w" name="OutputStream"/>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_DIRBkOsaEeaRPtCCR8m55A" name="importedTypes">
      <packagedElement xmi:type="uml:Package" xmi:id="_DIRBkesaEeaRPtCCR8m55A" name="ss">
        <packagedElement xmi:type="uml:Package" xmi:id="_DIRBkusaEeaRPtCCR8m55A" name="project">
          <packagedElement xmi:type="uml:Package" xmi:id="_DIRooOsaEeaRPtCCR8m55A" name="server">
            <packagedElement xmi:type="uml:Class" xmi:id="_DIRooesaEeaRPtCCR8m55A" name="ClientHandler"/>
            <packagedElement xmi:type="uml:Class" xmi:id="_DIsfYesaEeaRPtCCR8m55A" name="Server"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Package" xmi:id="_57dzcOscEeaGGeTgDT8kcg" name="view">
            <packagedElement xmi:type="uml:Class" xmi:id="_57dzcescEeaGGeTgDT8kcg" name="ClientView"/>
            <packagedElement xmi:type="uml:Class" xmi:id="_-43hkOscEeaGGeTgDT8kcg" name="Terminal"/>
            <packagedElement xmi:type="uml:Class" xmi:id="_x6IS4OsfEeagpPVreqOLZw" name="View"/>
          </packagedElement>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_tuCZAOs3Eea7AqSsB_lc7w" memberEnd="_tuDAEus3Eea7AqSsB_lc7w _tuDnIOs3Eea7AqSsB_lc7w">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_tuDAEOs3Eea7AqSsB_lc7w" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_tuDAEes3Eea7AqSsB_lc7w" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_tuDnIOs3Eea7AqSsB_lc7w" type="_qb8WIOs3Eea7AqSsB_lc7w" association="_tuCZAOs3Eea7AqSsB_lc7w"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_tuDAEus3Eea7AqSsB_lc7w" type="_jZtpgOs3Eea7AqSsB_lc7w" association="_tuCZAOs3Eea7AqSsB_lc7w"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_L9CRwOs5Eea7AqSsB_lc7w" name="Easy" visibility="public">
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_L9CRwes5Eea7AqSsB_lc7w" name="implements" client="_L9CRwOs5Eea7AqSsB_lc7w" supplier="_L9C44Os5Eea7AqSsB_lc7w" contract="_L9C44Os5Eea7AqSsB_lc7w"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_L9CRwus5Eea7AqSsB_lc7w" name="getName" specification="_L9CRxOs5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    return &quot;easy&quot;;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_L9CRw-s5Eea7AqSsB_lc7w" name="determineMove" specification="_L9CRxus5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    ArrayList&lt;Field> moves = new ArrayList&lt;Field>();
    for (int x = 0; x &lt;= Board.MAXFIELD; x++) {
        for (int y = 0; y &lt;= Board.MAXFIELD; y++) {
            Field empty = board.getEmptyField(x, y);
            if (empty != null) {
                moves.add(empty);
            }
        }
    }
    return moves.get((int) (Math.random() * moves.size()));
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9CRxOs5Eea7AqSsB_lc7w" name="getName" visibility="public" method="_L9CRwus5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9CRxes5Eea7AqSsB_lc7w" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9CRxus5Eea7AqSsB_lc7w" name="determineMove" visibility="public" method="_L9CRw-s5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9CRx-s5Eea7AqSsB_lc7w" type="_QN4XcOvfEea_C-H5NfTs0A" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9CRyOs5Eea7AqSsB_lc7w" name="board" type="_RabqIOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9CRyes5Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_L9C40Os5Eea7AqSsB_lc7w" name="Medium" visibility="public">
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_L9C40es5Eea7AqSsB_lc7w" name="implements" client="_L9C40Os5Eea7AqSsB_lc7w" supplier="_L9C44Os5Eea7AqSsB_lc7w" contract="_L9C44Os5Eea7AqSsB_lc7w"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_L9C40us5Eea7AqSsB_lc7w" name="getName" specification="_L9C41es5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    return &quot;medium&quot;;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_L9C40-s5Eea7AqSsB_lc7w" name="determineMove" specification="_L9C41-s5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    Map&lt;Field, Integer> result = new HashMap&lt;Field, Integer>();
    ArrayList&lt;Field> moves = new ArrayList&lt;Field>();
    for (int x = 0; x &lt;= Board.MAXFIELD; x++) {
        for (int y = 0; y &lt;= Board.MAXFIELD; y++) {
            Field empty = board.getEmptyField(x, y);
            if (empty != null) {
                moves.add(empty);
            }
        }
    }
    System.out.println(moves.size());
    for (Field field : moves) {
        Board test = board.copy();
        Board test2 = board.copy();
        test.setField(field, m);
        test2.setField(field, m.other());
        if (test.isWinner(m)) {
            result.put(field, new Integer(50));
        } else if (test2.isWinner(m.other())) {
            result.put(field, new Integer(40));
        } else {
            result.put(field, new Integer(countSurroundings(field, board, m)));
        }
    }
    int maxValue = Collections.max(result.values());
    System.out.println(maxValue);
    Iterator&lt;Map.Entry&lt;Field, Integer>> it = result.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry&lt;Field, Integer> item = it.next();
        if (item.getValue().intValue() &lt; maxValue) {
            it.remove();
        }
    }
    it = result.entrySet().iterator();
    int next = (int) (Math.random() * new Double(result.size()));
    int count = 0;
    while (it.hasNext()) {
        Map.Entry&lt;Field, Integer> item = it.next();
        if (count == next) {
            System.out.println(m.toString() + &quot; chose &quot; + item.getKey().toString());
            return item.getKey();
        }
        count++;
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_L9C41Os5Eea7AqSsB_lc7w" name="countSurroundings" specification="_L9C42-s5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    int result = 0;
    for (int z = -1; z &lt;= 0; z++) {
        for (int i = -1; i &lt;= 1; i++) {
            for (int a = -1; a &lt;= 1; a++) {
                Field neighbour = board.walkField(field, i, a, z);
                //next to field of same color
                if (neighbour != null) {
                    Mark nextmark = board.getMark(neighbour);
                    if (nextmark != null &amp;&amp; nextmark.equals(m)) {
                        result++;
                    }
                } else //next to boundary
                if (neighbour == null) {
                    result++;
                }
            }
        }
    }
    return result;
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9C41es5Eea7AqSsB_lc7w" name="getName" visibility="public" method="_L9C40us5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C41us5Eea7AqSsB_lc7w" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9C41-s5Eea7AqSsB_lc7w" name="determineMove" visibility="public" method="_L9C40-s5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C42Os5Eea7AqSsB_lc7w" type="_QN4XcOvfEea_C-H5NfTs0A" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C42es5Eea7AqSsB_lc7w" name="board" type="_RabqIOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C42us5Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9C42-s5Eea7AqSsB_lc7w" name="countSurroundings" visibility="public" method="_L9C41Os5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C43Os5Eea7AqSsB_lc7w" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C43es5Eea7AqSsB_lc7w" name="field" type="_QN4XcOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C43us5Eea7AqSsB_lc7w" name="board" type="_RabqIOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C43-s5Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Interface" xmi:id="_L9C44Os5Eea7AqSsB_lc7w" name="Difficulty" visibility="public">
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9C44es5Eea7AqSsB_lc7w" name="getName" visibility="public">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C44us5Eea7AqSsB_lc7w" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9C44-s5Eea7AqSsB_lc7w" name="determineMove" visibility="public">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C45Os5Eea7AqSsB_lc7w" type="_QN4XcOvfEea_C-H5NfTs0A" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C45es5Eea7AqSsB_lc7w" name="board" type="_RabqIOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9C45us5Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_L9Df4Os5Eea7AqSsB_lc7w" name="has" memberEnd="_L9Df5Os5Eea7AqSsB_lc7w _L9Df4-s5Eea7AqSsB_lc7w">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_L9Df4es5Eea7AqSsB_lc7w" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_L9Df4us5Eea7AqSsB_lc7w" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_L9Df4-s5Eea7AqSsB_lc7w" type="_L9C44Os5Eea7AqSsB_lc7w" association="_L9Df4Os5Eea7AqSsB_lc7w"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_L9Df5Os5Eea7AqSsB_lc7w" type="_L9Df5es5Eea7AqSsB_lc7w" association="_L9Df4Os5Eea7AqSsB_lc7w"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_L9Df5es5Eea7AqSsB_lc7w" name="ComputerPlayer" visibility="public">
      <ownedAttribute xmi:type="uml:Property" xmi:id="_L9Df5us5Eea7AqSsB_lc7w" name="difficulty" visibility="private" type="_L9C44Os5Eea7AqSsB_lc7w" isUnique="false"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_L9Df5-s5Eea7AqSsB_lc7w" name="ComputerPlayer" specification="_L9Df6us5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    this.difficulty = newdiff;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_L9Df6Os5Eea7AqSsB_lc7w" name="getName" specification="_L9Df7Os5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    return this.difficulty.getName() + &quot; Computer Player&quot;;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_L9Df6es5Eea7AqSsB_lc7w" name="determineMove" specification="_L9Df7us5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    return this.difficulty.determineMove(board, m);
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9Df6us5Eea7AqSsB_lc7w" name="ComputerPlayer" visibility="public" method="_L9Df5-s5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9Df6-s5Eea7AqSsB_lc7w" name="newdiff" type="_L9C44Os5Eea7AqSsB_lc7w"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9Df7Os5Eea7AqSsB_lc7w" name="getName" visibility="public" method="_L9Df6Os5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9Df7es5Eea7AqSsB_lc7w" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_L9Df7us5Eea7AqSsB_lc7w" name="determineMove" visibility="public" method="_L9Df6es5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9Df7-s5Eea7AqSsB_lc7w" type="_QN4XcOvfEea_C-H5NfTs0A" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9Df8Os5Eea7AqSsB_lc7w" name="board" type="_RabqIOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_L9Df8es5Eea7AqSsB_lc7w" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_egbUcOs5Eea7AqSsB_lc7w" name="ClientTUIView" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_egbUces5Eea7AqSsB_lc7w" general="_9u5hcOsfEeagpPVreqOLZw"/>
      <generalization xmi:type="uml:Generalization" xmi:id="_9ekxwOu0Eeao2KzjhbjEkg" general="_2o23IOu0Eeao2KzjhbjEkg"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_egbUcus5Eea7AqSsB_lc7w" name="client" visibility="private" isUnique="false"/>
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_egbUc-s5Eea7AqSsB_lc7w" name="implements" client="_egbUcOs5Eea7AqSsB_lc7w" supplier="_egcikOs5Eea7AqSsB_lc7w" contract="_egcikOs5Eea7AqSsB_lc7w"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_egbUdOs5Eea7AqSsB_lc7w" name="ClientTUIView" specification="_egbUeOs5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    super(System.in, System.out);
    this.client = client;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_egbUdes5Eea7AqSsB_lc7w" name="showBoard" specification="_egbUeus5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    send(this.client.getBoard().toString());
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_egbUdus5Eea7AqSsB_lc7w" name="handleInput" specification="_egbUe-s5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    if (input != null) {
        //split input around spaces
        String[] inputSplit = input.split(&quot; &quot;);
        if (inputSplit[0].equals(&quot;multi&quot;)) {
            send(&quot;Enter 'start &lt;playername> &lt;server ip> &lt;port>' to continue.&quot;);
            this.client.setOnline(true);
        } else if (inputSplit[0].equals(Protocol.ProtClient.SENDMESSAGE) &amp;&amp; this.client.canChat) {
            this.client.sendToServer(input);
        } else if (inputSplit[0].equals(&quot;ai&quot;) &amp;&amp; inputSplit.length == 1) {
            send(&quot;Enter 'start &lt;port> &lt;ai difficulty ('easy'/'medium'/'hard')>' to continue.&quot;);
            this.client.setOnline(false);
        } else if (inputSplit[0].equals(&quot;start&quot;) &amp;&amp; this.client.isOnline() &amp;&amp; inputSplit.length == 4) {
            send(&quot;connecting to server...&quot;);
            this.client.setPlayerName(inputSplit[1]);
            this.client.connectToServer(inputSplit[2], inputSplit[3]);
        } else if (inputSplit[0].equals(&quot;start&quot;) &amp;&amp; !this.client.isOnline() &amp;&amp; inputSplit.length == 3) {
            this.client.atAI(inputSplit);
            this.client.connectToServer(&quot;localhost&quot;, inputSplit[1]);
        } else if (inputSplit[0].equals(&quot;aitoggle&quot;)) {
            if (this.client.toggleAI()) {
                this.client.sendToView(&quot;ai is now on&quot;);
            } else {
                this.client.sendToView(&quot;ai is now off&quot;);
            }
        } else if (inputSplit[0].equals(&quot;hint&quot;)) {
            send(this.client.hint());
        } else if (inputSplit[0].equals(&quot;restart&quot;)) {
            this.client.restart();
        } else if (inputSplit[0].equals(&quot;exit&quot;)) {
            System.exit(0);
        } else if (inputSplit[0].equals(&quot;move&quot;) &amp;&amp; inputSplit.length == 3 &amp;&amp; this.client.isInGame()) {
            this.client.getServerHandler().send(Protocol.ProtClient.MAKEMOVE + &quot; &quot; + inputSplit[1] + &quot; &quot; + inputSplit[2]);
        } else {
            send(&quot;You entered: '&quot; + input + &quot;' which is not valid input or can only be done if it is your turn in the game.&quot;);
            if (this.client.isInGame()) {
                if (this.client.getCurrentTurnId() != this.client.getPlayerId()) {
                    send(&quot;Note that it is not your turn now&quot;);
                }
            } else {
                send(&quot;Note that you are not in game right now&quot;);
            }
        }
    } else {
        send(&quot;null input, y u do this?&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_egbUd-s5Eea7AqSsB_lc7w" name="atStart" specification="_egbUfes5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    send(&quot;During the application you can enter:\n&quot; + &quot;'sendMessage &lt;message>' to chat in multiplayer\n&quot; + &quot;'hint' when in game to get a move suggested\n&quot; + &quot;'aitoggle' to enable/disable the computer playing for you\n&quot; + &quot;'exit' to exit the application or \n&quot; + &quot;'restart' to restart the application\n\n&quot;);
    send(&quot;Enter 'ai' to play against AI or &quot; + &quot;'multi' to play against other players&quot;);
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egbUeOs5Eea7AqSsB_lc7w" name="ClientTUIView" visibility="public" method="_egbUdOs5Eea7AqSsB_lc7w" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_egbUees5Eea7AqSsB_lc7w" name="client" type="_Ml3rwOvbEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egbUeus5Eea7AqSsB_lc7w" name="showBoard" visibility="public" method="_egbUdes5Eea7AqSsB_lc7w"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egbUe-s5Eea7AqSsB_lc7w" name="handleInput" visibility="public" method="_egbUdus5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_egbUfOs5Eea7AqSsB_lc7w" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egbUfes5Eea7AqSsB_lc7w" name="atStart" visibility="public" method="_egbUd-s5Eea7AqSsB_lc7w"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Interface" xmi:id="_egb7gOs5Eea7AqSsB_lc7w" name="View" visibility="public">
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egb7ges5Eea7AqSsB_lc7w" name="run" visibility="public"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egb7gus5Eea7AqSsB_lc7w" name="atStart" visibility="public"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egb7g-s5Eea7AqSsB_lc7w" name="handleInput" visibility="public">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_egb7hOs5Eea7AqSsB_lc7w" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egb7hes5Eea7AqSsB_lc7w" name="send" visibility="public">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_egb7hus5Eea7AqSsB_lc7w" name="inpt" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_egb7h-s5Eea7AqSsB_lc7w" name="ServerTUIView" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_egb7iOs5Eea7AqSsB_lc7w" general="_9u5hcOsfEeagpPVreqOLZw"/>
      <generalization xmi:type="uml:Generalization" xmi:id="_-LOcYOu0Eeao2KzjhbjEkg" general="_2o23IOu0Eeao2KzjhbjEkg"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_egb7ies5Eea7AqSsB_lc7w" name="server" visibility="private" isLeaf="true" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_egb7ius5Eea7AqSsB_lc7w" name="START" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_egb7i-s5Eea7AqSsB_lc7w" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;start&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_egb7jOs5Eea7AqSsB_lc7w" name="EXIT" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_egb7jes5Eea7AqSsB_lc7w" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;exit&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_egb7jus5Eea7AqSsB_lc7w" name="HELP" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_egb7j-s5Eea7AqSsB_lc7w" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;help&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_egb7kOs5Eea7AqSsB_lc7w" name="SWITCH" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_egb7kes5Eea7AqSsB_lc7w" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;switch&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_egb7kus5Eea7AqSsB_lc7w" name="implements" client="_egb7h-s5Eea7AqSsB_lc7w" supplier="_egb7gOs5Eea7AqSsB_lc7w" contract="_egb7gOs5Eea7AqSsB_lc7w"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_egb7k-s5Eea7AqSsB_lc7w" name="ServerTUIView" specification="_egb7lus5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    super(System.in, System.out);
    this.server = inServer;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_egb7lOs5Eea7AqSsB_lc7w" name="atStart" specification="_egb7mOs5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    send(&quot;Enter 'start &lt;port>' to start the server.&quot;);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_egb7les5Eea7AqSsB_lc7w" name="handleInput" specification="_egb7mes5Eea7AqSsB_lc7w">
        <language>JAVA</language>
        <body>
    String[] inputSplit = input.split(&quot; &quot;);
    if (input.equals(EXIT)) {
        super.send(&quot;Server is shutting down...&quot;);
        server.shutDown();
    } else if (inputSplit[0].equals(START) &amp;&amp; inputSplit.length == 2) {
        this.server.startServer(inputSplit[1]);
    } else if (input.equals(HELP)) {
        super.send(&quot;&quot;);
        super.send(&quot;VALID COMMANDS&quot;);
        super.send(&quot;Command:'&quot; + START + &quot;' ==> starts the server on port.&quot;);
        super.send(&quot;Command:'&quot; + EXIT + &quot;' ==> shutdown the server.&quot;);
        super.send(&quot;&quot;);
        super.send(&quot;Enter a command below.&quot;);
    } else if (input.equals(SWITCH)) {
        super.send(&quot;&quot;);
    } else {
        super.send(&quot;Invalid command, type 'HELP' to see valid commands.&quot;);
    }
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egb7lus5Eea7AqSsB_lc7w" name="ServerTUIView" visibility="public" method="_egb7k-s5Eea7AqSsB_lc7w" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_egb7l-s5Eea7AqSsB_lc7w" name="inServer" type="_zgkl0evbEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egb7mOs5Eea7AqSsB_lc7w" name="atStart" visibility="public" method="_egb7lOs5Eea7AqSsB_lc7w"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egb7mes5Eea7AqSsB_lc7w" name="handleInput" visibility="public" method="_egb7les5Eea7AqSsB_lc7w">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_egb7mus5Eea7AqSsB_lc7w" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Interface" xmi:id="_egcikOs5Eea7AqSsB_lc7w" name="ClientView" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_egcikes5Eea7AqSsB_lc7w" general="_egb7gOs5Eea7AqSsB_lc7w"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_egcikus5Eea7AqSsB_lc7w" name="showBoard" visibility="public"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_Y-A-4Ou0Eeao2KzjhbjEkg" name="ComputerPlayer" visibility="public">
      <ownedAttribute xmi:type="uml:Property" xmi:id="_Y-A-4eu0Eeao2KzjhbjEkg" name="difficulty" visibility="private" type="_qb8WIOs3Eea7AqSsB_lc7w" isUnique="false"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Y-A-4uu0Eeao2KzjhbjEkg" name="ComputerPlayer" specification="_Y-A-5eu0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    this.difficulty = newdiff;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Y-A-4-u0Eeao2KzjhbjEkg" name="getName" specification="_Y-A-5-u0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    return this.difficulty.getName() + &quot; Computer Player&quot;;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Y-A-5Ou0Eeao2KzjhbjEkg" name="determineMove" specification="_Y-A-6eu0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    return this.difficulty.determineMove(board, m);
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_Y-A-5eu0Eeao2KzjhbjEkg" name="ComputerPlayer" visibility="public" method="_Y-A-4uu0Eeao2KzjhbjEkg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_Y-A-5uu0Eeao2KzjhbjEkg" name="newdiff" type="_qb8WIOs3Eea7AqSsB_lc7w"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_Y-A-5-u0Eeao2KzjhbjEkg" name="getName" visibility="public" method="_Y-A-4-u0Eeao2KzjhbjEkg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_Y-A-6Ou0Eeao2KzjhbjEkg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_Y-A-6eu0Eeao2KzjhbjEkg" name="determineMove" visibility="public" method="_Y-A-5Ou0Eeao2KzjhbjEkg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_Y-A-6uu0Eeao2KzjhbjEkg" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_Y-A-6-u0Eeao2KzjhbjEkg" name="board"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_Y-A-7Ou0Eeao2KzjhbjEkg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_2o23IOu0Eeao2KzjhbjEkg" name="Terminal" visibility="public">
      <ownedAttribute xmi:type="uml:Property" xmi:id="_2o23Ieu0Eeao2KzjhbjEkg" name="in" visibility="protected" isLeaf="true" type="_FBbmYOuNEeanyfTPa8UQ4w" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_2o23Iuu0Eeao2KzjhbjEkg" name="out" visibility="protected" isLeaf="true" type="_FBmlgOuNEeanyfTPa8UQ4w" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_2o23I-u0Eeao2KzjhbjEkg" name="exit" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_2o23JOu0Eeao2KzjhbjEkg" name="defaultValue">
          <language>JAVA</language>
          <body>false</body>
        </defaultValue>
      </ownedAttribute>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_2o23Jeu0Eeao2KzjhbjEkg" name="Terminal" specification="_2o23LOu0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    this.in = new BufferedReader(new InputStreamReader(in));
    this.out = new BufferedWriter(new OutputStreamWriter(out));
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_2o23Juu0Eeao2KzjhbjEkg" name="atStart" specification="_2o23L-u0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    send(&quot;terminal started&quot;);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_2o23J-u0Eeao2KzjhbjEkg" name="run" specification="_2o23MOu0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    atStart();
    try {
        String line = in.readLine();
        //continuously read input and print it
        while (line != null &amp;&amp; !exit) {
            handleInput(line);
            line = in.readLine();
        }
    } catch (IOException e) {
        onFailure();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_2o23KOu0Eeao2KzjhbjEkg" name="send" specification="_2o23Meu0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    try {
        out.write(input);
        out.newLine();
        out.flush();
    } catch (IOException e) {
        onFailure();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_2o23Keu0Eeao2KzjhbjEkg" name="handleInput" specification="_2o23M-u0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    send(input);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_2o23Kuu0Eeao2KzjhbjEkg" name="onFailure" specification="_2o23Neu0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    System.out.println(&quot;Something went wrong with sending through socket&quot;);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_2o23K-u0Eeao2KzjhbjEkg" name="exit" specification="_2o23Nuu0Eeao2KzjhbjEkg">
        <language>JAVA</language>
        <body>
    this.exit = true;
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_2o23LOu0Eeao2KzjhbjEkg" name="Terminal" visibility="public" method="_2o23Jeu0Eeao2KzjhbjEkg" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_2o23Leu0Eeao2KzjhbjEkg" name="in" type="_FB0A4OuNEeanyfTPa8UQ4w"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_2o23Luu0Eeao2KzjhbjEkg" name="out" type="_FB3EMOuNEeanyfTPa8UQ4w"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_2o23L-u0Eeao2KzjhbjEkg" name="atStart" visibility="public" method="_2o23Juu0Eeao2KzjhbjEkg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_2o23MOu0Eeao2KzjhbjEkg" name="run" visibility="public" method="_2o23J-u0Eeao2KzjhbjEkg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_2o23Meu0Eeao2KzjhbjEkg" name="send" visibility="public" method="_2o23KOu0Eeao2KzjhbjEkg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_2o23Muu0Eeao2KzjhbjEkg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_2o23M-u0Eeao2KzjhbjEkg" name="handleInput" visibility="public" method="_2o23Keu0Eeao2KzjhbjEkg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_2o23NOu0Eeao2KzjhbjEkg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_2o23Neu0Eeao2KzjhbjEkg" name="onFailure" visibility="public" method="_2o23Kuu0Eeao2KzjhbjEkg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_2o23Nuu0Eeao2KzjhbjEkg" name="exit" visibility="public" method="_2o23K-u0Eeao2KzjhbjEkg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_RRpeYOvbEeaFWsKBBqDStg" memberEnd="_RRshsOvbEeaFWsKBBqDStg _RRtIwOvbEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_RRr6oOvbEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_RRr6oevbEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_RRtIwOvbEeaFWsKBBqDStg" type="_jZtpgOs3Eea7AqSsB_lc7w" association="_RRpeYOvbEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_RRshsOvbEeaFWsKBBqDStg" type="_Ml3rwOvbEeaFWsKBBqDStg" association="_RRpeYOvbEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_UtEcYOvbEeaFWsKBBqDStg" name="has" memberEnd="_UtFDcuvbEeaFWsKBBqDStg _UtFqgOvbEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_UtFDcOvbEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_UtFDcevbEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_UtFqgOvbEeaFWsKBBqDStg" type="_Ml3rwOvbEeaFWsKBBqDStg" association="_UtEcYOvbEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_Xi6BEOvbEeaFWsKBBqDStg" value="1"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_XjDyEOvbEeaFWsKBBqDStg" value="1"/>
      </ownedEnd>
      <ownedEnd xmi:type="uml:Property" xmi:id="_UtFDcuvbEeaFWsKBBqDStg" type="_RPiPgOsgEeagpPVreqOLZw" association="_UtEcYOvbEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_YM6AUOvbEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_YM9DoOvbEeaFWsKBBqDStg" value="1"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_ggFXcOvbEeaFWsKBBqDStg" name="uses" memberEnd="_ggF-guvbEeaFWsKBBqDStg _ggGlkOvbEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_ggF-gOvbEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_ggF-gevbEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_ggGlkOvbEeaFWsKBBqDStg" type="_Ml3rwOvbEeaFWsKBBqDStg" association="_ggFXcOvbEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_ggF-guvbEeaFWsKBBqDStg" type="_cdOmAOvbEeaFWsKBBqDStg" association="_ggFXcOvbEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_GIrwcOvcEeaFWsKBBqDStg" memberEnd="_GIs-kuvcEeaFWsKBBqDStg _GIs-k-vcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_GIs-kOvcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_GIs-kevcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_GIs-k-vcEeaFWsKBBqDStg" type="_ydeKEOvbEeaFWsKBBqDStg" association="_GIrwcOvcEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_GIs-kuvcEeaFWsKBBqDStg" type="_zgjXsOvbEeaFWsKBBqDStg" association="_GIrwcOvcEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_IWNX8OvcEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_IWPNIOvcEeaFWsKBBqDStg" value="2"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_MRStcOvcEeaFWsKBBqDStg" memberEnd="_MRTUguvcEeaFWsKBBqDStg _MRTUg-vcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_MRTUgOvcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_MRTUgevcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_MRTUg-vcEeaFWsKBBqDStg" type="_zgkl0evbEeaFWsKBBqDStg" association="_MRStcOvcEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_MRTUguvcEeaFWsKBBqDStg" type="_ydeKEOvbEeaFWsKBBqDStg" association="_MRStcOvcEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_NUq2AOvcEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_NUsrMOvcEeaFWsKBBqDStg" value="*"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_OlK0kOvcEeaFWsKBBqDStg" memberEnd="_OlK0k-vcEeaFWsKBBqDStg _OlLboOvcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_OlK0kevcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_OlK0kuvcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_OlLboOvcEeaFWsKBBqDStg" type="_zgkl0evbEeaFWsKBBqDStg" association="_OlK0kOvcEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_OlK0k-vcEeaFWsKBBqDStg" type="_zgjXsOvbEeaFWsKBBqDStg" association="_OlK0kOvcEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_P3fYEOvcEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_P3ibYOvcEeaFWsKBBqDStg" value="*"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_S7hw0OvcEeaFWsKBBqDStg" memberEnd="_S7iX4evcEeaFWsKBBqDStg _S7iX4uvcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_S7hw0evcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_S7iX4OvcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_S7iX4uvcEeaFWsKBBqDStg" type="_zgkl0evbEeaFWsKBBqDStg" association="_S7hw0OvcEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_S7iX4evcEeaFWsKBBqDStg" type="_9u46YOsfEeagpPVreqOLZw" association="_S7hw0OvcEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_Z7MRoOvcEeaFWsKBBqDStg" name="localgame" memberEnd="_Z7MRo-vcEeaFWsKBBqDStg _Z7M4sOvcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_Z7MRoevcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_Z7MRouvcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_Z7M4sOvcEeaFWsKBBqDStg" type="_Ml3rwOvbEeaFWsKBBqDStg" association="_Z7MRoOvcEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_Z7MRo-vcEeaFWsKBBqDStg" type="_zgkl0evbEeaFWsKBBqDStg" association="_Z7MRoOvcEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_bVK8UOvcEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_bVMKcOvcEeaFWsKBBqDStg" value="1"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_x1fuoOvcEeaFWsKBBqDStg" name="Board" visibility="public">
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1fuoevcEeaFWsKBBqDStg" name="MAXFIELD" visibility="public" isLeaf="true" isStatic="true" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1fuouvcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>3</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1fuo-vcEeaFWsKBBqDStg" name="fieldMap" visibility="private" type="_DJGIAusaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1fupOvcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new HashMap&lt;Field, Mark>()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fupevcEeaFWsKBBqDStg" name="Board" specification="_x1fut-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.reset();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fupuvcEeaFWsKBBqDStg" name="copy" specification="_x1fuuOvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Board copy = new Board();
    for (int x = 0; x &lt;= MAXFIELD; x++) {
        for (int y = 0; y &lt;= MAXFIELD; y++) {
            for (int z = 0; z &lt;= MAXFIELD; z++) {
                Field field = new Field(x, y, z);
                if (!this.isEmptyField(field)) {
                    copy.fieldMap.put(field, this.getMark(field));
                }
            }
        }
    }
    return copy;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fup-vcEeaFWsKBBqDStg" name="isField" specification="_x1fuuuvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return field.x >= 0 &amp;&amp; field.x &lt;= MAXFIELD &amp;&amp; field.y >= 0 &amp;&amp; field.y &lt;= MAXFIELD &amp;&amp; field.z >= 0 &amp;&amp; field.z &lt;= MAXFIELD;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fuqOvcEeaFWsKBBqDStg" name="isReachableEmptyField" specification="_x1fuvevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field copy = field.copy();
    //check fields below
    while ((copy = this.walkField(copy, 0, 0, -1)) != null) {
        if (!this.fieldMap.containsKey(copy)) {
            return false;
        }
    }
    return this.isField(field) &amp;&amp; !this.fieldMap.containsKey(field);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fuqevcEeaFWsKBBqDStg" name="isEmptyField" specification="_x1fuwOvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return !this.fieldMap.containsKey(field);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fuquvcEeaFWsKBBqDStg" name="getEmptyField" specification="_x1fuw-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field empty = new Field(x, y, 0);
    if (this.isReachableEmptyField(empty)) {
        return empty;
    } else {
        while ((empty = walkField(empty, 0, 0, 1)) != null) {
            if (this.isReachableEmptyField(empty)) {
                return empty;
            }
        }
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fuq-vcEeaFWsKBBqDStg" name="setField" specification="_x1fux-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.isReachableEmptyField(field)) {
        this.fieldMap.put(field, m);
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1furOvcEeaFWsKBBqDStg" name="walkField" specification="_x1fuy-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field nextfield = new Field(field.x + xoff, field.y + yoff, field.z + zoff);
    if (this.isField(nextfield)) {
        return nextfield;
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1furevcEeaFWsKBBqDStg" name="setField" specification="_x1fu0evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field newfield = this.getEmptyField(x, y);
    if (newfield != null) {
        return this.setField(newfield, m);
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1furuvcEeaFWsKBBqDStg" name="getMark" specification="_x1fu1uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.isField(field)) {
        return this.fieldMap.get(field);
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fur-vcEeaFWsKBBqDStg" name="reset" specification="_x1fu2evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.fieldMap.clear();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fusOvcEeaFWsKBBqDStg" name="checkRow" specification="_x1fu2uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field checker = start.copy();
    int count = 0;
    do {
        if (this.isEmptyField(checker) || !this.getMark(checker).equals(m)) {
            return false;
        }
        count++;
        checker = this.walkField(checker, xdir, ydir, zdir);
    } while (checker != null);
    if (count == MAXFIELD + 1) {
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fusevcEeaFWsKBBqDStg" name="checkZcolums" specification="_x1fu4evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    for (int x = 0; x &lt;= MAXFIELD; x++) {
        for (int y = 0; y &lt;= MAXFIELD; y++) {
            Field zchecker = new Field(x, y, 0);
            if (this.checkRow(zchecker, 0, 0, 1, m)) {
                return true;
            }
        }
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fusuvcEeaFWsKBBqDStg" name="checkPlanes" specification="_x1fu5OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    for (int i = 0; i &lt;= MAXFIELD; i++) {
        //check all x-y planes
        for (int z = 0; z &lt;= MAXFIELD; z++) {
            Field xchecker = new Field(0, i, z);
            Field ychecker = new Field(i, 0, z);
            if (this.checkRow(xchecker, 1, 0, 0, m) || this.checkRow(ychecker, 0, 1, 0, m)) {
                return true;
            }
        }
        //check diagonal planes
        //startpoint x axis
        Field yzchecker = new Field(i, 0, 0);
        //startpoint y axis
        Field xzchecker = new Field(0, i, 0);
        //opposite startpoint x axis
        Field yzdownchecker = new Field(i, MAXFIELD, 0);
        //opposite startpoint y axis
        Field xzdownchecker = new Field(MAXFIELD, i, 0);
        //check cross-planes
        Field crosschecker = new Field(0, 0, i);
        Field crossdownchecker = new Field(0, MAXFIELD, i);
        if (this.checkRow(yzchecker, 0, 1, 1, m) || this.checkRow(xzchecker, 1, 0, 1, m) || this.checkRow(yzdownchecker, 0, -1, 1, m) || this.checkRow(xzdownchecker, -1, 0, 1, m) || this.checkRow(crosschecker, 1, 1, 0, m) || this.checkRow(crossdownchecker, 1, -1, 0, m)) {
            return true;
        }
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1fus-vcEeaFWsKBBqDStg" name="isWinner" specification="_x1fu5-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.checkPlanes(m) || this.checkZcolums(m);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1futOvcEeaFWsKBBqDStg" name="getWinner" specification="_x1fu6uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Mark m = Mark.X;
    if (this.isWinner(m) &amp;&amp; !this.isWinner(m.other())) {
        return m;
    } else if (this.isWinner(m.other())) {
        return m.other();
    } else {
        return null;
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1futevcEeaFWsKBBqDStg" name="hasEnded" specification="_x1fu7OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.isWinner(Mark.X) || this.isWinner(Mark.O) || this.fieldMap.size() == MAXFIELD * MAXFIELD * MAXFIELD) {
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1futuvcEeaFWsKBBqDStg" name="toString" specification="_x1fu7uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    String result = &quot;&quot;;
    for (int y = MAXFIELD; y >= 0; y--) {
        for (int z = 0; z &lt;= MAXFIELD; z++) {
            result = result + y;
            for (int x = 0; x &lt;= MAXFIELD; x++) {
                Field out = new Field(x, y, z);
                if (this.isEmptyField(out)) {
                    result = result + &quot;[ ]&quot;;
                } else {
                    result = result + &quot;[&quot; + this.getMark(out).toString() + &quot;]&quot;;
                }
            }
            result = result + &quot;   &quot;;
        }
        result = result + &quot;\n&quot;;
    }
    return result;
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fut-vcEeaFWsKBBqDStg" name="Board" visibility="public" method="_x1fupevcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fuuOvcEeaFWsKBBqDStg" name="copy" visibility="public" method="_x1fupuvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuuevcEeaFWsKBBqDStg" type="_x1fuoOvcEeaFWsKBBqDStg" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fuuuvcEeaFWsKBBqDStg" name="isField" visibility="public" method="_x1fup-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuu-vcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuvOvcEeaFWsKBBqDStg" name="field"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fuvevcEeaFWsKBBqDStg" name="isReachableEmptyField" visibility="public" method="_x1fuqOvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuvuvcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuv-vcEeaFWsKBBqDStg" name="field"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fuwOvcEeaFWsKBBqDStg" name="isEmptyField" visibility="public" method="_x1fuqevcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuwevcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuwuvcEeaFWsKBBqDStg" name="field"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fuw-vcEeaFWsKBBqDStg" name="getEmptyField" visibility="public" method="_x1fuquvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuxOvcEeaFWsKBBqDStg" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuxevcEeaFWsKBBqDStg" name="x">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuxuvcEeaFWsKBBqDStg" name="y">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fux-vcEeaFWsKBBqDStg" name="setField" visibility="public" method="_x1fuq-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuyOvcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuyevcEeaFWsKBBqDStg" name="field"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuyuvcEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fuy-vcEeaFWsKBBqDStg" name="walkField" visibility="public" method="_x1furOvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuzOvcEeaFWsKBBqDStg" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuzevcEeaFWsKBBqDStg" name="field"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuzuvcEeaFWsKBBqDStg" name="xoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fuz-vcEeaFWsKBBqDStg" name="yoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu0OvcEeaFWsKBBqDStg" name="zoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu0evcEeaFWsKBBqDStg" name="setField" visibility="public" method="_x1furevcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu0uvcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu0-vcEeaFWsKBBqDStg" name="x">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu1OvcEeaFWsKBBqDStg" name="y">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu1evcEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu1uvcEeaFWsKBBqDStg" name="getMark" visibility="public" method="_x1furuvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu1-vcEeaFWsKBBqDStg" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu2OvcEeaFWsKBBqDStg" name="field"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu2evcEeaFWsKBBqDStg" name="reset" visibility="public" method="_x1fur-vcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu2uvcEeaFWsKBBqDStg" name="checkRow" visibility="public" method="_x1fusOvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu2-vcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu3OvcEeaFWsKBBqDStg" name="start"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu3evcEeaFWsKBBqDStg" name="xdir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu3uvcEeaFWsKBBqDStg" name="ydir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu3-vcEeaFWsKBBqDStg" name="zdir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu4OvcEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu4evcEeaFWsKBBqDStg" name="checkZcolums" visibility="public" method="_x1fusevcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu4uvcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu4-vcEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu5OvcEeaFWsKBBqDStg" name="checkPlanes" visibility="public" method="_x1fusuvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu5evcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu5uvcEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu5-vcEeaFWsKBBqDStg" name="isWinner" visibility="public" method="_x1fus-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu6OvcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu6evcEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu6uvcEeaFWsKBBqDStg" name="getWinner" visibility="public" method="_x1futOvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu6-vcEeaFWsKBBqDStg" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu7OvcEeaFWsKBBqDStg" name="hasEnded" visibility="public" method="_x1futevcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu7evcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1fu7uvcEeaFWsKBBqDStg" name="toString" visibility="public" method="_x1futuvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1fu7-vcEeaFWsKBBqDStg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_x1gVsOvcEeaFWsKBBqDStg" name="uses" memberEnd="_x1gVtOvcEeaFWsKBBqDStg _x1gVs-vcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_x1gVsevcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_x1gVsuvcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_x1gVs-vcEeaFWsKBBqDStg" type="_x1gVtevcEeaFWsKBBqDStg" association="_x1gVsOvcEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_x1gVtOvcEeaFWsKBBqDStg" type="_x1hj0OvcEeaFWsKBBqDStg" association="_x1gVsOvcEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_x1gVtevcEeaFWsKBBqDStg" name="Client" visibility="public">
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVtuvcEeaFWsKBBqDStg" name="playerName" visibility="private" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVt-vcEeaFWsKBBqDStg" name="opponentName" visibility="private" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVuOvcEeaFWsKBBqDStg" name="playerId" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVuevcEeaFWsKBBqDStg" name="currentTurnId" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVuuvcEeaFWsKBBqDStg" name="online" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVu-vcEeaFWsKBBqDStg" name="inGame" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1gVvOvcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>false</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVvevcEeaFWsKBBqDStg" name="aiEnabled" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1gVvuvcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>false</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVv-vcEeaFWsKBBqDStg" name="board" visibility="private" type="_x1fuoOvcEeaFWsKBBqDStg" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVwOvcEeaFWsKBBqDStg" name="serverHandler" visibility="private" type="_cdOmAOvbEeaFWsKBBqDStg" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVwevcEeaFWsKBBqDStg" name="view" visibility="private" type="_71-Q8OsfEeagpPVreqOLZw" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVwuvcEeaFWsKBBqDStg" name="ai" visibility="private" type="_jZtpgOs3Eea7AqSsB_lc7w" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1gVw-vcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new ComputerPlayer(new Hard())</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVxOvcEeaFWsKBBqDStg" name="aServer" visibility="private" type="_zgkl0evbEeaFWsKBBqDStg" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1gVxevcEeaFWsKBBqDStg" name="canChat" visibility="public" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
      </ownedAttribute>
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_x1gVxuvcEeaFWsKBBqDStg" name="Client implements Observer" client="_x1gVtevcEeaFWsKBBqDStg" supplier="_Ml6IAOvbEeaFWsKBBqDStg" contract="_Ml6IAOvbEeaFWsKBBqDStg"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVx-vcEeaFWsKBBqDStg" name="Client" specification="_x1gV5evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.playerName = &quot;NoNamePepeAI&quot;;
    this.board = new Board();
    this.board.addObserver(this);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVyOvcEeaFWsKBBqDStg" name="createNewView" specification="_x1gV5uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    try {
        this.view = new ClientTUIView(this);
        this.view.run();
    } catch (IOException e1) {
        System.out.println(&quot;could not create view&quot;);
        System.exit(0);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVyevcEeaFWsKBBqDStg" name="update" specification="_x1gV5-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.view != null &amp;&amp; obj.equals(&quot;boardchanged&quot;)) {
        this.view.showBoard();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVyuvcEeaFWsKBBqDStg" name="setOnline" specification="_x1gV6uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.online = input;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVy-vcEeaFWsKBBqDStg" name="setPlayerName" specification="_x1gV7OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.playerName = input;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVzOvcEeaFWsKBBqDStg" name="setAI" specification="_x1gV7uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.ai = player;
    this.playerName = player.getName();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVzevcEeaFWsKBBqDStg" name="setInGame" specification="_x1gV8OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.inGame = input;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVzuvcEeaFWsKBBqDStg" name="getServerHandler" specification="_x1gV8uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.serverHandler;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gVz-vcEeaFWsKBBqDStg" name="getCurrentTurnId" specification="_x1gV9OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.currentTurnId;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV0OvcEeaFWsKBBqDStg" name="getPlayerId" specification="_x1gV9uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.playerId;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV0evcEeaFWsKBBqDStg" name="getBoard" specification="_x1gV-OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.board;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV0uvcEeaFWsKBBqDStg" name="getCapabilities" specification="_x1gV-uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return Protocol.ProtClient.SENDCAPABILITIES + &quot; 2 &quot; + this.playerName + &quot; 0 4 4 4 4 1 0&quot;;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV0-vcEeaFWsKBBqDStg" name="isOnline" specification="_x1gV_OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.online;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV1OvcEeaFWsKBBqDStg" name="isInGame" specification="_x1gV_uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.inGame;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV1evcEeaFWsKBBqDStg" name="toggleAI" specification="_x1gWAOvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.aiEnabled = !this.aiEnabled;
    return aiEnabled;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV1uvcEeaFWsKBBqDStg" name="atAI" specification="_x1gWAuvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (inputSplit[2].equals(&quot;easy&quot;)) {
        createAiGame(inputSplit[1], new Easy());
    } else if (inputSplit[2].equals(&quot;medium&quot;)) {
        createAiGame(inputSplit[1], new Medium());
    } else if (inputSplit[2].equals(&quot;hard&quot;)) {
        createAiGame(inputSplit[1], new Hard());
    } else {
        sendToView(&quot;Retry and enter a valid difficulty&quot;);
        restart();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV1-vcEeaFWsKBBqDStg" name="createAiGame" specification="_x1gWBuvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.aServer = new Server();
    this.aServer.startServer(input);
    Client client = new Client();
    client.setAI(new ComputerPlayer(dif));
    client.toggleAI();
    client.connectToServer(&quot;localhost&quot;, input);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV2OvcEeaFWsKBBqDStg" name="atTurnOfPlayer" specification="_x1gWCevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //notify the player whose turn it is
    try {
        //get the id of the current player
        this.currentTurnId = Integer.parseInt(inputSplit[1]);
        //compare current player to clientId to see who it is
        if (this.currentTurnId == getPlayerId()) {
            sendToView(&quot;It is your turn, type: 'move &lt;x> &lt;y>' to make a move.&quot;);
            //let the AI make a move for you
            if (this.aiEnabled) {
                Field field = this.ai.determineMove(board, Mark.X);
                sendToServer(Protocol.ProtClient.MAKEMOVE + &quot; &quot; + field.getMove());
            }
        } else {
            sendToView(&quot;It is the turn of player &quot; + this.opponentName);
        }
    } catch (NumberFormatException e) {
        sendToView(&quot;Server is sending rubbish, NumberFormatException&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV2evcEeaFWsKBBqDStg" name="atAssignId" specification="_x1gWDevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //set player ID
    try {
        this.playerId = Integer.parseInt(inputSplit[1]);
        //ask for more client input or notify waiting
        if (isOnline()) {
            sendToView(&quot;Connection established, waiting for other players&quot;);
        } else if (!isOnline()) {
            sendToView(&quot;Enter AI difficulty 'easy'/'medium'/'hard'&quot;);
        }
    } catch (NumberFormatException e) {
        sendToView(&quot;Server is sending rubbish, NumberFormatException&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV2uvcEeaFWsKBBqDStg" name="atStartGame" specification="_x1gWEevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //notify the client that the game has started and create a board
    this.inGame = true;
    sendToView(&quot;Game has started&quot;);
    refreshBoard();
    //set opponent name as name of player with not this id
    String[] inputSplit2 = inputSplit[2].split(&quot;\\|&quot;);
    String[] inputSplit3 = inputSplit[3].split(&quot;\\|&quot;);
    if (Integer.parseInt(inputSplit2[0]) == this.playerId &amp;&amp; inputSplit3.length > 1) {
        opponentName = inputSplit3[1];
    } else if (Integer.parseInt(inputSplit3[0]) == this.playerId &amp;&amp; inputSplit2.length > 1) {
        opponentName = inputSplit2[1];
    } else {
        sendToView(&quot;Could not obtain opponent playername from game start.&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV2-vcEeaFWsKBBqDStg" name="atNotifyMove" specification="_x1gWFevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //notify player of the move
    if (this.serverHandler.isYou(inputSplit[1])) {
        sendToView(&quot;You made move x=&quot; + inputSplit[2] + &quot; y=&quot; + inputSplit[3]);
    } else {
        sendToView(this.opponentName + &quot; made move x=&quot; + inputSplit[2] + &quot; y=&quot; + inputSplit[3]);
    }
    //try to add the move to the board, needs to have integers for x and y
    try {
        int id = Integer.parseInt(inputSplit[1]);
        int x = Integer.parseInt(inputSplit[2]);
        int y = Integer.parseInt(inputSplit[3]);
        //player is always displayed/playing as Mark.Black
        if (id == this.playerId) {
            this.board.setField(x, y, Mark.X);
        } else {
            //opponent is always displayed/playing as Mark.White
            this.board.setField(x, y, Mark.O);
        }
    } catch (NumberFormatException e) {
        sendToView(&quot;Server is sending rubbish, NumberFormatException&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV3OvcEeaFWsKBBqDStg" name="atNotifyEnd" specification="_x1gWGevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (inputSplit.length == 2) {
        //game has ended in a draw, notify client
        this.serverHandler.send(&quot;The game has ended in a draw, &quot; + &quot;type EXIT to exit the game and start a new one&quot;);
    } else if (inputSplit.length == 3) {
        if (inputSplit[1].equals(&quot;1&quot;)) {
            if (this.serverHandler.isYou(inputSplit[2])) {
                sendToView(&quot;You have won.&quot;);
            } else {
                sendToView(&quot;Player &quot; + this.opponentName + &quot; has won.&quot;);
            }
        } else if (inputSplit[1].equals(&quot;3&quot;)) {
            sendToView(&quot;Player &quot; + this.opponentName + &quot; has disconnected.&quot;);
        } else {
            sendToView(&quot;Unknown game end condition&quot;);
        }
    }
    this.inGame = false;
    restart();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV3evcEeaFWsKBBqDStg" name="atNotifyMessage" specification="_x1gWHevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    String result = inputSplit[1] + &quot;: &quot;;
    for (int i = 2; i &lt; inputSplit.length; i++) {
        result = result + inputSplit[i] + &quot; &quot;;
    }
    sendToView(result);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV3uvcEeaFWsKBBqDStg" name="hint" specification="_x1gWIevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (inGame &amp;&amp; this.currentTurnId == this.playerId) {
        Field field = this.ai.determineMove(this.board, Mark.X);
        return &quot;move(x y): &quot; + field.getMove();
    } else {
        return &quot;Hint is only available when it is your turn in game.&quot;;
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV3-vcEeaFWsKBBqDStg" name="sendToServer" specification="_x1gWI-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.serverHandler != null) {
        this.serverHandler.send(input);
    } else {
        sendToView(&quot;Error connection to server is required for this action.&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV4OvcEeaFWsKBBqDStg" name="sendToView" specification="_x1gWJevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.view != null) {
        this.view.send(input);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV4evcEeaFWsKBBqDStg" name="connectToServer" specification="_x1gWJ-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    InetAddress addr = null;
    int port = Server.getPort(socketPort);
    // check args[1] - the IP-adress
    try {
        addr = InetAddress.getByName(ip);
    } catch (UnknownHostException e) {
        sendToView(&quot;ERROR: host &quot; + ip + &quot; unknown.&quot;);
        sendToView(&quot;try again&quot;);
    }
    // try to open a Socket 
    try {
        Socket sock = new Socket(addr, port);
        this.serverHandler = new ServerHandler(this, sock);
        new Thread(this.serverHandler).start();
        sendToView(&quot;setting up game...&quot;);
    } catch (IOException e) {
        sendToView(&quot;ERROR: could not create a socket on &quot; + addr + &quot; and port &quot; + port);
        sendToView(&quot;try again&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV4uvcEeaFWsKBBqDStg" name="refreshBoard" specification="_x1gWKuvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.board.reset();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV4-vcEeaFWsKBBqDStg" name="restart" specification="_x1gWK-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.serverHandler != null) {
        this.serverHandler.exit();
    }
    if (this.view != null) {
        sendToView(&quot;\n\nRestarting...&quot;);
        this.inGame = false;
        this.view.atStart();
    }
    //shutdown server if has one
    if (this.aServer != null) {
        this.aServer.shutDown();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1gV5OvcEeaFWsKBBqDStg" name="main" specification="_x1gWLOvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //construct a client
    Client aClient = new Client();
    aClient.createNewView();
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV5evcEeaFWsKBBqDStg" name="Client" visibility="public" method="_x1gVx-vcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV5uvcEeaFWsKBBqDStg" name="createNewView" visibility="public" method="_x1gVyOvcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV5-vcEeaFWsKBBqDStg" name="update" visibility="public" method="_x1gVyevcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV6OvcEeaFWsKBBqDStg" name="obs" type="_MmtZQOvbEeaFWsKBBqDStg"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV6evcEeaFWsKBBqDStg" name="obj" type="_DJg-w-saEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV6uvcEeaFWsKBBqDStg" name="setOnline" visibility="public" method="_x1gVyuvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV6-vcEeaFWsKBBqDStg" name="input">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV7OvcEeaFWsKBBqDStg" name="setPlayerName" visibility="public" method="_x1gVy-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV7evcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV7uvcEeaFWsKBBqDStg" name="setAI" visibility="public" method="_x1gVzOvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV7-vcEeaFWsKBBqDStg" name="player" type="_jZtpgOs3Eea7AqSsB_lc7w"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV8OvcEeaFWsKBBqDStg" name="setInGame" visibility="public" method="_x1gVzevcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV8evcEeaFWsKBBqDStg" name="input">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV8uvcEeaFWsKBBqDStg" name="getServerHandler" visibility="public" method="_x1gVzuvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV8-vcEeaFWsKBBqDStg" type="_cdOmAOvbEeaFWsKBBqDStg" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV9OvcEeaFWsKBBqDStg" name="getCurrentTurnId" visibility="public" method="_x1gVz-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV9evcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV9uvcEeaFWsKBBqDStg" name="getPlayerId" visibility="public" method="_x1gV0OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV9-vcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV-OvcEeaFWsKBBqDStg" name="getBoard" visibility="public" method="_x1gV0evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV-evcEeaFWsKBBqDStg" type="_x1fuoOvcEeaFWsKBBqDStg" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV-uvcEeaFWsKBBqDStg" name="getCapabilities" visibility="public" method="_x1gV0uvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV--vcEeaFWsKBBqDStg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV_OvcEeaFWsKBBqDStg" name="isOnline" visibility="public" method="_x1gV0-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV_evcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gV_uvcEeaFWsKBBqDStg" name="isInGame" visibility="public" method="_x1gV1OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gV_-vcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWAOvcEeaFWsKBBqDStg" name="toggleAI" visibility="public" method="_x1gV1evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWAevcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWAuvcEeaFWsKBBqDStg" name="atAI" visibility="public" method="_x1gV1uvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWA-vcEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1gWBOvcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1gWBevcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWBuvcEeaFWsKBBqDStg" name="createAiGame" visibility="public" method="_x1gV1-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWB-vcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWCOvcEeaFWsKBBqDStg" name="dif" type="_qb8WIOs3Eea7AqSsB_lc7w"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWCevcEeaFWsKBBqDStg" name="atTurnOfPlayer" visibility="public" method="_x1gV2OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWCuvcEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1gWC-vcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1gWDOvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWDevcEeaFWsKBBqDStg" name="atAssignId" visibility="public" method="_x1gV2evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWDuvcEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1gWD-vcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1gWEOvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWEevcEeaFWsKBBqDStg" name="atStartGame" visibility="public" method="_x1gV2uvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWEuvcEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1gWE-vcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1gWFOvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWFevcEeaFWsKBBqDStg" name="atNotifyMove" visibility="public" method="_x1gV2-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWFuvcEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1gWF-vcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1gWGOvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWGevcEeaFWsKBBqDStg" name="atNotifyEnd" visibility="public" method="_x1gV3OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWGuvcEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1gWG-vcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1gWHOvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWHevcEeaFWsKBBqDStg" name="atNotifyMessage" visibility="public" method="_x1gV3evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWHuvcEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1gWH-vcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1gWIOvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWIevcEeaFWsKBBqDStg" name="hint" visibility="public" method="_x1gV3uvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWIuvcEeaFWsKBBqDStg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWI-vcEeaFWsKBBqDStg" name="sendToServer" visibility="public" method="_x1gV3-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWJOvcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWJevcEeaFWsKBBqDStg" name="sendToView" visibility="public" method="_x1gV4OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWJuvcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWJ-vcEeaFWsKBBqDStg" name="connectToServer" visibility="public" method="_x1gV4evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWKOvcEeaFWsKBBqDStg" name="ip" type="_DIE0UOsaEeaRPtCCR8m55A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWKevcEeaFWsKBBqDStg" name="socketPort" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWKuvcEeaFWsKBBqDStg" name="refreshBoard" visibility="public" method="_x1gV4uvcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWK-vcEeaFWsKBBqDStg" name="restart" visibility="public" method="_x1gV4-vcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1gWLOvcEeaFWsKBBqDStg" name="main" visibility="public" isStatic="true" method="_x1gV5OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1gWLevcEeaFWsKBBqDStg" name="args" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1gWLuvcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1gWL-vcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_x1g8wOvcEeaFWsKBBqDStg" memberEnd="_x1g8xuvcEeaFWsKBBqDStg _x1g8w-vcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_x1g8wevcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_x1g8wuvcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_x1g8w-vcEeaFWsKBBqDStg" type="_x1gVtevcEeaFWsKBBqDStg" association="_x1g8wOvcEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1g8xOvcEeaFWsKBBqDStg" value="1"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1g8xevcEeaFWsKBBqDStg" value="1"/>
      </ownedEnd>
      <ownedEnd xmi:type="uml:Property" xmi:id="_x1g8xuvcEeaFWsKBBqDStg" type="_x1hj7evcEeaFWsKBBqDStg" association="_x1g8wOvcEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1g8x-vcEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1g8yOvcEeaFWsKBBqDStg" value="1"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_x1g8yevcEeaFWsKBBqDStg" name="account changes" memberEnd="_x1g8zevcEeaFWsKBBqDStg _x1g8zOvcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_x1g8yuvcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_x1g8y-vcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_x1g8zOvcEeaFWsKBBqDStg" type="_x1gVtevcEeaFWsKBBqDStg" association="_x1g8yevcEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_x1g8zevcEeaFWsKBBqDStg" type="_x1fuoOvcEeaFWsKBBqDStg" association="_x1g8yevcEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_x1g8zuvcEeaFWsKBBqDStg" name="Server" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_x1g8z-vcEeaFWsKBBqDStg" general="_DIN-QOsaEeaRPtCCR8m55A"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1g80OvcEeaFWsKBBqDStg" name="serverSocket" visibility="private" type="_x6FPkOsfEeagpPVreqOLZw" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1g80evcEeaFWsKBBqDStg" name="view" visibility="private" type="_71-Q8esfEeagpPVreqOLZw" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1g80uvcEeaFWsKBBqDStg" name="running" visibility="public" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1g80-vcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>false</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1g81OvcEeaFWsKBBqDStg" name="CAPABILITIES" visibility="public" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1g81evcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>&quot; 2 0 4 4 4 4 1&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1g81uvcEeaFWsKBBqDStg" name="clientHandlerList" visibility="private" type="_zgjXsOvbEeaFWsKBBqDStg" isUnique="false">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1g81-vcEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1g82OvcEeaFWsKBBqDStg" value="*"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1g82evcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new ArrayList&lt;ClientHandler>()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1g82uvcEeaFWsKBBqDStg" name="gameList" visibility="private" type="_ydeKEOvbEeaFWsKBBqDStg" isUnique="false">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1g82-vcEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1g83OvcEeaFWsKBBqDStg" value="*"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_x1g83evcEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new ArrayList&lt;Game>()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g83uvcEeaFWsKBBqDStg" name="Server" specification="_x1g87uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
//new PingThread(this).start();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g83-vcEeaFWsKBBqDStg" name="createView" specification="_x1g87-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    try {
        this.view = new ServerTUIView(this);
        this.view.run();
    } catch (IOException e1) {
        System.out.println(&quot;Could not create TUI vor server.&quot;);
        System.exit(0);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g84OvcEeaFWsKBBqDStg" name="sendChat" specification="_x1g88OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    String result = Protocol.ProtServer.NOTIFYMESSAGE + &quot; &quot; + name + &quot; &quot;;
    for (int i = 1; i &lt; inputSplit.length; i++) {
        result = result + inputSplit[i] + &quot; &quot;;
    }
    for (ClientHandler c : clientHandlerList) {
        c.send(result);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g84evcEeaFWsKBBqDStg" name="leaveServer" specification="_x1g89evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    clientHandlerList.remove(client);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g84uvcEeaFWsKBBqDStg" name="removeGame" specification="_x1g89-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.gameList.remove(game);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g84-vcEeaFWsKBBqDStg" name="startServer" specification="_x1g8-evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.running) {
        sendToView(&quot;Server already running, exit and restart to run server on different port.&quot;);
    } else {
        // parse input - the port
        int port = getPort(input);
        try {
            if (port == 0) {
                sendToView(&quot;Could not create ServerSocket on port: &quot; + port);
                sendToView(&quot;Try again, note that port should not be in use and higher than 0.&quot;);
                this.running = false;
            } else {
                this.serverSocket = new ServerSocket(port);
                this.start();
                this.running = true;
            }
        } catch (IOException e1) {
            sendToView(&quot;Could not create ServerSocket on port: &quot; + port);
            sendToView(&quot;Try again, note that port should not be in use and higher than 0.&quot;);
            this.running = false;
        }
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g85OvcEeaFWsKBBqDStg" name="run" specification="_x1g8--vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    accepter();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g85evcEeaFWsKBBqDStg" name="sendToView" specification="_x1g8_OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.view != null) {
        this.view.send(input);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g85uvcEeaFWsKBBqDStg" name="shutDown" specification="_x1g8_uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    for (ClientHandler c : this.clientHandlerList) {
        c.send(&quot;byebye&quot;);
    }
    this.running = false;
    if (this.view != null) {
        this.view.exit();
    }
    if (this.serverSocket != null) {
        try {
            this.serverSocket.close();
        } catch (IOException e) {
            sendToView(&quot;could not close serversocket&quot;);
        }
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g85-vcEeaFWsKBBqDStg" name="getServerSocket" specification="_x1g8_-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.serverSocket;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g86OvcEeaFWsKBBqDStg" name="getClientHandlerList" specification="_x1g9AevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.clientHandlerList;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g86evcEeaFWsKBBqDStg" name="getGameList" specification="_x1g9BevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.gameList;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g86uvcEeaFWsKBBqDStg" name="accepter" specification="_x1g9CevcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    sendToView(&quot;Server started, ready to accept incoming connections&quot;);
    while (this.running) {
        Socket sock = null;
        try {
            sock = this.serverSocket.accept();
            sendToView(&quot;New client connected!&quot;);
        } catch (IOException e1) {
            sendToView(&quot;Could not accept connection on serversocket.&quot;);
        }
        if (!this.serverSocket.isClosed()) {
            try {
                ClientHandler clientHandler = new ClientHandler(this, sock);
                this.clientHandlerList.add(clientHandler);
                new Thread(clientHandler).start();
            } catch (IOException e1) {
                sendToView(&quot;Could not create client handler.&quot;);
            }
        }
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g86-vcEeaFWsKBBqDStg" name="joinGame" specification="_x1g9CuvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //search for available games and start them &amp;&amp; and player if found
    Game game = null;
    int i = 0;
    //search for game available to join
    while (game == null &amp;&amp; i &lt; this.gameList.size()) {
        //game is available if it is not full
        if (!this.gameList.get(i).isFull()) {
            sendToView(&quot;game &quot; + i + &quot; was joined&quot;);
            game = this.gameList.get(i);
        }
        //continue
        i++;
    }
    //if no game found make a new one
    if (game == null) {
        sendToView(&quot;new game created&quot;);
        game = new Game(this);
        this.gameList.add(game);
    }
    //add the handler to the game        
    game.addPlayer(inputPlayer);
    //add the game to the handler 
    inputPlayer.setPlayerGame(game);
    //start the game if it is full
    if (game.isFull()) {
        game.start();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g87OvcEeaFWsKBBqDStg" name="getPort" specification="_x1g9DOvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    int result = 0;
    try {
        result = Integer.parseInt(input);
    } catch (NumberFormatException e) {
        System.out.println(&quot;ERROR: &quot; + input + &quot; is not an integer&quot;);
    }
    return result;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1g87evcEeaFWsKBBqDStg" name="main" specification="_x1g9D-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //create a new server
    Server aServer = new Server();
    aServer.createView();
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g87uvcEeaFWsKBBqDStg" name="Server" visibility="public" method="_x1g83uvcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g87-vcEeaFWsKBBqDStg" name="createView" visibility="public" method="_x1g83-vcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g88OvcEeaFWsKBBqDStg" name="sendChat" visibility="public" method="_x1g84OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g88evcEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1g88uvcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1g88-vcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g89OvcEeaFWsKBBqDStg" name="name" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g89evcEeaFWsKBBqDStg" name="leaveServer" visibility="public" method="_x1g84evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g89uvcEeaFWsKBBqDStg" name="client" type="_zgjXsOvbEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g89-vcEeaFWsKBBqDStg" name="removeGame" visibility="public" method="_x1g84uvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g8-OvcEeaFWsKBBqDStg" name="game" type="_ydeKEOvbEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g8-evcEeaFWsKBBqDStg" name="startServer" visibility="public" method="_x1g84-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g8-uvcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g8--vcEeaFWsKBBqDStg" name="run" visibility="public" method="_x1g85OvcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g8_OvcEeaFWsKBBqDStg" name="sendToView" visibility="public" method="_x1g85evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g8_evcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g8_uvcEeaFWsKBBqDStg" name="shutDown" visibility="public" method="_x1g85uvcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g8_-vcEeaFWsKBBqDStg" name="getServerSocket" visibility="public" method="_x1g85-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g9AOvcEeaFWsKBBqDStg" type="_x6FPkOsfEeagpPVreqOLZw" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g9AevcEeaFWsKBBqDStg" name="getClientHandlerList" visibility="public" method="_x1g86OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g9AuvcEeaFWsKBBqDStg" type="_zgjXsOvbEeaFWsKBBqDStg" direction="return">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1g9A-vcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1g9BOvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g9BevcEeaFWsKBBqDStg" name="getGameList" visibility="public" method="_x1g86evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g9BuvcEeaFWsKBBqDStg" type="_ydeKEOvbEeaFWsKBBqDStg" direction="return">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1g9B-vcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1g9COvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g9CevcEeaFWsKBBqDStg" name="accepter" visibility="public" method="_x1g86uvcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g9CuvcEeaFWsKBBqDStg" name="joinGame" visibility="public" method="_x1g86-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g9C-vcEeaFWsKBBqDStg" name="inputPlayer" type="_zgjXsOvbEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g9DOvcEeaFWsKBBqDStg" name="getPort" visibility="public" isStatic="true" method="_x1g87OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g9DevcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g9DuvcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1g9D-vcEeaFWsKBBqDStg" name="main" visibility="public" isStatic="true" method="_x1g87evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1g9EOvcEeaFWsKBBqDStg" name="args" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1g9EevcEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1g9EuvcEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_x1hj0OvcEeaFWsKBBqDStg" name="ServerHandler" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_x1hj0evcEeaFWsKBBqDStg" general="_9u5hcOsfEeagpPVreqOLZw"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1hj0uvcEeaFWsKBBqDStg" name="client" visibility="private" type="_x1gVtevcEeaFWsKBBqDStg" isUnique="false"/>
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_x1hj0-vcEeaFWsKBBqDStg" name="ServerHandler implements Runnable" client="_x1hj0OvcEeaFWsKBBqDStg" supplier="_-47L8OscEeaGGeTgDT8kcg" contract="_-47L8OscEeaGGeTgDT8kcg"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj1OvcEeaFWsKBBqDStg" name="ServerHandler" specification="_x1hj2uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    super(inSock.getInputStream(), inSock.getOutputStream());
    this.client = inputClient;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj1evcEeaFWsKBBqDStg" name="onFailure" specification="_x1hj3evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //exit the terminal and close its streams.
    if (!super.exit) {
        this.client.restart();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj1uvcEeaFWsKBBqDStg" name="atStart" specification="_x1hj3uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
//nada, wait for capabilities from server first
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj1-vcEeaFWsKBBqDStg" name="send" specification="_x1hj3-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    super.send(input);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj2OvcEeaFWsKBBqDStg" name="handleInput" specification="_x1hj4evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //System.out.println(&quot;server sends: &quot; + input); //for testing
    //split input around spaces
    String[] inputSplit = input.split(&quot; &quot;);
    if (inputSplit[0].equals(Protocol.ProtServer.SERVERCAPABILITIES)) {
        //respond with capabilities of the client
        send(this.client.getCapabilities());
        if (inputSplit.length > 7 &amp;&amp; inputSplit[7].equals(&quot;1&quot;) &amp;&amp; this.client.isOnline()) {
            this.client.canChat = true;
        } else {
            this.client.canChat = false;
        }
    } else if (inputSplit[0].equals(Protocol.ProtServer.NOTIFYMESSAGE) &amp;&amp; this.client.canChat) {
        this.client.atNotifyMessage(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.ASSIGNID)) {
        this.client.atAssignId(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.STARTGAME)) {
        this.client.atStartGame(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.TURNOFPLAYER)) {
        this.client.atTurnOfPlayer(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.NOTIFYMOVE)) {
        this.client.atNotifyMove(inputSplit);
    } else if (inputSplit[0].equals(Protocol.ProtServer.NOTIFYEND) &amp;&amp; inputSplit.length == 2 || inputSplit.length == 3) {
        this.client.atNotifyEnd(inputSplit);
    } else if (inputSplit[0].equals(&quot;error&quot;) &amp;&amp; inputSplit.length == 2) {
        this.client.sendToView(Protocol.getError(inputSplit[1]));
    } else if (inputSplit[0].equals(&quot;byebye&quot;)) {
        this.client.sendToView(&quot;Server connection dropped, restarting&quot;);
        this.client.restart();
    } else {
        this.client.sendToView(&quot;Server is sending an unknown command&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj2evcEeaFWsKBBqDStg" name="isYou" specification="_x1hj4-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return Integer.parseInt(inputId) == this.client.getPlayerId();
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj2uvcEeaFWsKBBqDStg" name="ServerHandler" visibility="private" method="_x1hj1OvcEeaFWsKBBqDStg" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1hj2-vcEeaFWsKBBqDStg" name="inputClient" type="_x1gVtevcEeaFWsKBBqDStg"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1hj3OvcEeaFWsKBBqDStg" name="inSock" type="_-4_dYuscEeaGGeTgDT8kcg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj3evcEeaFWsKBBqDStg" name="onFailure" visibility="public" method="_x1hj1evcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj3uvcEeaFWsKBBqDStg" name="atStart" visibility="public" method="_x1hj1uvcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj3-vcEeaFWsKBBqDStg" name="send" visibility="public" method="_x1hj1-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1hj4OvcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj4evcEeaFWsKBBqDStg" name="handleInput" visibility="public" method="_x1hj2OvcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1hj4uvcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj4-vcEeaFWsKBBqDStg" name="isYou" visibility="public" method="_x1hj2evcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1hj5OvcEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1hj5evcEeaFWsKBBqDStg" name="inputId" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_x1hj5uvcEeaFWsKBBqDStg" name="localgame" memberEnd="_x1hj6uvcEeaFWsKBBqDStg _x1hj6evcEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_x1hj5-vcEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_x1hj6OvcEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_x1hj6evcEeaFWsKBBqDStg" type="_x1gVtevcEeaFWsKBBqDStg" association="_x1hj5uvcEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_x1hj6uvcEeaFWsKBBqDStg" type="_x1g8zuvcEeaFWsKBBqDStg" association="_x1hj5uvcEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_x1hj6-vcEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_x1hj7OvcEeaFWsKBBqDStg" value="1"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_x1hj7evcEeaFWsKBBqDStg" name="CopyOf_ClientTUIView_1" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_x1hj7uvcEeaFWsKBBqDStg" general="_9u5hcOsfEeagpPVreqOLZw"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_x1hj7-vcEeaFWsKBBqDStg" name="client" visibility="private" isUnique="false"/>
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_x1hj8OvcEeaFWsKBBqDStg" name="implements" client="_x1hj7evcEeaFWsKBBqDStg" supplier="_71-Q8OsfEeagpPVreqOLZw" contract="_71-Q8OsfEeagpPVreqOLZw"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj8evcEeaFWsKBBqDStg" name="ClientTUIView" specification="_x1hj9evcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    super(System.in, System.out);
    this.client = client;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj8uvcEeaFWsKBBqDStg" name="showBoard" specification="_x1hj9-vcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    send(this.client.getBoard().toString());
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj8-vcEeaFWsKBBqDStg" name="handleInput" specification="_x1hj-OvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (input != null) {
        //split input around spaces
        String[] inputSplit = input.split(&quot; &quot;);
        if (inputSplit[0].equals(&quot;multi&quot;)) {
            send(&quot;Enter 'start &lt;playername> &lt;server ip> &lt;port>' to continue.&quot;);
            this.client.setOnline(true);
        } else if (inputSplit[0].equals(Protocol.ProtClient.SENDMESSAGE) &amp;&amp; this.client.canChat) {
            this.client.sendToServer(input);
        } else if (inputSplit[0].equals(&quot;ai&quot;) &amp;&amp; inputSplit.length == 1) {
            send(&quot;Enter 'start &lt;port> &lt;ai difficulty ('easy'/'medium'/'hard')>' to continue.&quot;);
            this.client.setOnline(false);
        } else if (inputSplit[0].equals(&quot;start&quot;) &amp;&amp; this.client.isOnline() &amp;&amp; inputSplit.length == 4) {
            send(&quot;connecting to server...&quot;);
            this.client.setPlayerName(inputSplit[1]);
            this.client.connectToServer(inputSplit[2], inputSplit[3]);
        } else if (inputSplit[0].equals(&quot;start&quot;) &amp;&amp; !this.client.isOnline() &amp;&amp; inputSplit.length == 3) {
            this.client.atAI(inputSplit);
            this.client.connectToServer(&quot;localhost&quot;, inputSplit[1]);
        } else if (inputSplit[0].equals(&quot;aitoggle&quot;)) {
            if (this.client.toggleAI()) {
                this.client.sendToView(&quot;ai is now on&quot;);
            } else {
                this.client.sendToView(&quot;ai is now off&quot;);
            }
        } else if (inputSplit[0].equals(&quot;hint&quot;)) {
            send(this.client.hint());
        } else if (inputSplit[0].equals(&quot;restart&quot;)) {
            this.client.restart();
        } else if (inputSplit[0].equals(&quot;exit&quot;)) {
            System.exit(0);
        } else if (inputSplit[0].equals(&quot;move&quot;) &amp;&amp; inputSplit.length == 3 &amp;&amp; this.client.isInGame()) {
            this.client.getServerHandler().send(Protocol.ProtClient.MAKEMOVE + &quot; &quot; + inputSplit[1] + &quot; &quot; + inputSplit[2]);
        } else {
            send(&quot;You entered: '&quot; + input + &quot;' which is not valid input or can only be done if it is your turn in the game.&quot;);
            if (this.client.isInGame()) {
                if (this.client.getCurrentTurnId() != this.client.getPlayerId()) {
                    send(&quot;Note that it is not your turn now&quot;);
                }
            } else {
                send(&quot;Note that you are not in game right now&quot;);
            }
        }
    } else {
        send(&quot;null input, y u do this?&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_x1hj9OvcEeaFWsKBBqDStg" name="atStart" specification="_x1hj-uvcEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    send(&quot;During the application you can enter:\n&quot; + &quot;'sendMessage &lt;message>' to chat in multiplayer\n&quot; + &quot;'hint' when in game to get a move suggested\n&quot; + &quot;'aitoggle' to enable/disable the computer playing for you\n&quot; + &quot;'exit' to exit the application or \n&quot; + &quot;'restart' to restart the application\n\n&quot;);
    send(&quot;Enter 'ai' to play against AI or &quot; + &quot;'multi' to play against other players&quot;);
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj9evcEeaFWsKBBqDStg" name="ClientTUIView" visibility="public" method="_x1hj8evcEeaFWsKBBqDStg" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1hj9uvcEeaFWsKBBqDStg" name="client"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj9-vcEeaFWsKBBqDStg" name="showBoard" visibility="public" method="_x1hj8uvcEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj-OvcEeaFWsKBBqDStg" name="handleInput" visibility="public" method="_x1hj8-vcEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_x1hj-evcEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_x1hj-uvcEeaFWsKBBqDStg" name="atStart" visibility="public" method="_x1hj9OvcEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_BO_oMOvdEeaFWsKBBqDStg" memberEnd="_BPA2UOvdEeaFWsKBBqDStg _BPA2UevdEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_BPAPQOvdEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_BPAPQevdEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_BPA2UevdEeaFWsKBBqDStg" type="_Y-A-4Ou0Eeao2KzjhbjEkg" association="_BO_oMOvdEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_BPA2UOvdEeaFWsKBBqDStg" type="_x1gVtevcEeaFWsKBBqDStg" association="_BO_oMOvdEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_g9FxoOvdEeaFWsKBBqDStg" name="Server" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_g9FxoevdEeaFWsKBBqDStg" general="_DIN-QOsaEeaRPtCCR8m55A"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9FxouvdEeaFWsKBBqDStg" name="serverSocket" visibility="private" type="_x6FPkOsfEeagpPVreqOLZw" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9Fxo-vdEeaFWsKBBqDStg" name="view" visibility="private" type="_9u46YOsfEeagpPVreqOLZw" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9FxpOvdEeaFWsKBBqDStg" name="running" visibility="public" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9FxpevdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>false</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9FxpuvdEeaFWsKBBqDStg" name="CAPABILITIES" visibility="public" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9Fxp-vdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>&quot; 2 0 4 4 4 4 1&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9FxqOvdEeaFWsKBBqDStg" name="clientHandlerList" visibility="private" type="_g9IN4OvdEeaFWsKBBqDStg" isUnique="false">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9FxqevdEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9FxquvdEeaFWsKBBqDStg" value="*"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9Fxq-vdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new ArrayList&lt;ClientHandler>()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9FxrOvdEeaFWsKBBqDStg" name="gameList" visibility="private" type="_g9G_wOvdEeaFWsKBBqDStg" isUnique="false">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9FxrevdEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9FxruvdEeaFWsKBBqDStg" value="*"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9Fxr-vdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new ArrayList&lt;Game>()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxsOvdEeaFWsKBBqDStg" name="Server" specification="_g9FxwOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
//new PingThread(this).start();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxsevdEeaFWsKBBqDStg" name="createView" specification="_g9FxwevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    try {
        this.view = new ServerTUIView(this);
        this.view.run();
    } catch (IOException e1) {
        System.out.println(&quot;Could not create TUI vor server.&quot;);
        System.exit(0);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxsuvdEeaFWsKBBqDStg" name="sendChat" specification="_g9FxwuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    String result = Protocol.ProtServer.NOTIFYMESSAGE + &quot; &quot; + name + &quot; &quot;;
    for (int i = 1; i &lt; inputSplit.length; i++) {
        result = result + inputSplit[i] + &quot; &quot;;
    }
    for (ClientHandler c : clientHandlerList) {
        c.send(result);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9Fxs-vdEeaFWsKBBqDStg" name="leaveServer" specification="_g9Fxx-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    clientHandlerList.remove(client);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxtOvdEeaFWsKBBqDStg" name="removeGame" specification="_g9FxyevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.gameList.remove(game);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxtevdEeaFWsKBBqDStg" name="startServer" specification="_g9Fxy-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.running) {
        sendToView(&quot;Server already running, exit and restart to run server on different port.&quot;);
    } else {
        // parse input - the port
        int port = getPort(input);
        try {
            if (port == 0) {
                sendToView(&quot;Could not create ServerSocket on port: &quot; + port);
                sendToView(&quot;Try again, note that port should not be in use and higher than 0.&quot;);
                this.running = false;
            } else {
                this.serverSocket = new ServerSocket(port);
                this.start();
                this.running = true;
            }
        } catch (IOException e1) {
            sendToView(&quot;Could not create ServerSocket on port: &quot; + port);
            sendToView(&quot;Try again, note that port should not be in use and higher than 0.&quot;);
            this.running = false;
        }
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxtuvdEeaFWsKBBqDStg" name="run" specification="_g9FxzevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    accepter();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9Fxt-vdEeaFWsKBBqDStg" name="sendToView" specification="_g9FxzuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.view != null) {
        this.view.send(input);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxuOvdEeaFWsKBBqDStg" name="shutDown" specification="_g9Fx0OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    for (ClientHandler c : this.clientHandlerList) {
        c.send(&quot;byebye&quot;);
    }
    this.running = false;
    if (this.view != null) {
        this.view.exit();
    }
    if (this.serverSocket != null) {
        try {
            this.serverSocket.close();
        } catch (IOException e) {
            sendToView(&quot;could not close serversocket&quot;);
        }
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxuevdEeaFWsKBBqDStg" name="getServerSocket" specification="_g9Fx0evdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.serverSocket;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxuuvdEeaFWsKBBqDStg" name="getClientHandlerList" specification="_g9Fx0-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.clientHandlerList;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9Fxu-vdEeaFWsKBBqDStg" name="getGameList" specification="_g9Fx1-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.gameList;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxvOvdEeaFWsKBBqDStg" name="accepter" specification="_g9Fx2-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    sendToView(&quot;Server started, ready to accept incoming connections&quot;);
    while (this.running) {
        Socket sock = null;
        try {
            sock = this.serverSocket.accept();
            sendToView(&quot;New client connected!&quot;);
        } catch (IOException e1) {
            sendToView(&quot;Could not accept connection on serversocket.&quot;);
        }
        if (!this.serverSocket.isClosed()) {
            try {
                ClientHandler clientHandler = new ClientHandler(this, sock);
                this.clientHandlerList.add(clientHandler);
                new Thread(clientHandler).start();
            } catch (IOException e1) {
                sendToView(&quot;Could not create client handler.&quot;);
            }
        }
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxvevdEeaFWsKBBqDStg" name="joinGame" specification="_g9Fx3OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //search for available games and start them &amp;&amp; and player if found
    Game game = null;
    int i = 0;
    //search for game available to join
    while (game == null &amp;&amp; i &lt; this.gameList.size()) {
        //game is available if it is not full
        if (!this.gameList.get(i).isFull()) {
            sendToView(&quot;game &quot; + i + &quot; was joined&quot;);
            game = this.gameList.get(i);
        }
        //continue
        i++;
    }
    //if no game found make a new one
    if (game == null) {
        sendToView(&quot;new game created&quot;);
        game = new Game(this);
        this.gameList.add(game);
    }
    //add the handler to the game        
    game.addPlayer(inputPlayer);
    //add the game to the handler 
    inputPlayer.setPlayerGame(game);
    //start the game if it is full
    if (game.isFull()) {
        game.start();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9FxvuvdEeaFWsKBBqDStg" name="getPort" specification="_g9Fx3uvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    int result = 0;
    try {
        result = Integer.parseInt(input);
    } catch (NumberFormatException e) {
        System.out.println(&quot;ERROR: &quot; + input + &quot; is not an integer&quot;);
    }
    return result;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9Fxv-vdEeaFWsKBBqDStg" name="main" specification="_g9Fx4evdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //create a new server
    Server aServer = new Server();
    aServer.createView();
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9FxwOvdEeaFWsKBBqDStg" name="Server" visibility="public" method="_g9FxsOvdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9FxwevdEeaFWsKBBqDStg" name="createView" visibility="public" method="_g9FxsevdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9FxwuvdEeaFWsKBBqDStg" name="sendChat" visibility="public" method="_g9FxsuvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fxw-vdEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9FxxOvdEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9FxxevdEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9FxxuvdEeaFWsKBBqDStg" name="name" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fxx-vdEeaFWsKBBqDStg" name="leaveServer" visibility="public" method="_g9Fxs-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9FxyOvdEeaFWsKBBqDStg" name="client" type="_g9IN4OvdEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9FxyevdEeaFWsKBBqDStg" name="removeGame" visibility="public" method="_g9FxtOvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9FxyuvdEeaFWsKBBqDStg" name="game" type="_g9G_wOvdEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fxy-vdEeaFWsKBBqDStg" name="startServer" visibility="public" method="_g9FxtevdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9FxzOvdEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9FxzevdEeaFWsKBBqDStg" name="run" visibility="public" method="_g9FxtuvdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9FxzuvdEeaFWsKBBqDStg" name="sendToView" visibility="public" method="_g9Fxt-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fxz-vdEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fx0OvdEeaFWsKBBqDStg" name="shutDown" visibility="public" method="_g9FxuOvdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fx0evdEeaFWsKBBqDStg" name="getServerSocket" visibility="public" method="_g9FxuevdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fx0uvdEeaFWsKBBqDStg" type="_x6FPkOsfEeagpPVreqOLZw" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fx0-vdEeaFWsKBBqDStg" name="getClientHandlerList" visibility="public" method="_g9FxuuvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fx1OvdEeaFWsKBBqDStg" type="_g9IN4OvdEeaFWsKBBqDStg" direction="return">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9Fx1evdEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9Fx1uvdEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fx1-vdEeaFWsKBBqDStg" name="getGameList" visibility="public" method="_g9Fxu-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fx2OvdEeaFWsKBBqDStg" type="_g9G_wOvdEeaFWsKBBqDStg" direction="return">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9Fx2evdEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9Fx2uvdEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fx2-vdEeaFWsKBBqDStg" name="accepter" visibility="public" method="_g9FxvOvdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fx3OvdEeaFWsKBBqDStg" name="joinGame" visibility="public" method="_g9FxvevdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fx3evdEeaFWsKBBqDStg" name="inputPlayer" type="_g9IN4OvdEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fx3uvdEeaFWsKBBqDStg" name="getPort" visibility="public" isStatic="true" method="_g9FxvuvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fx3-vdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fx4OvdEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9Fx4evdEeaFWsKBBqDStg" name="main" visibility="public" isStatic="true" method="_g9Fxv-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9Fx4uvdEeaFWsKBBqDStg" name="args" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9Fx4-vdEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9Fx5OvdEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_g9G_wOvdEeaFWsKBBqDStg" name="Game" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_g9G_wevdEeaFWsKBBqDStg" general="_DIN-QOsaEeaRPtCCR8m55A"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9G_wuvdEeaFWsKBBqDStg" name="playerList" visibility="private" type="_DIRooesaEeaRPtCCR8m55A" isUnique="false">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9G_w-vdEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9G_xOvdEeaFWsKBBqDStg" value="*"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9G_xevdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new ArrayList&lt;ClientHandler>()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9G_xuvdEeaFWsKBBqDStg" name="board" visibility="private" type="_g9I1AevdEeaFWsKBBqDStg" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9G_x-vdEeaFWsKBBqDStg" name="answered" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9G_yOvdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>true</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9G_yevdEeaFWsKBBqDStg" name="lock" visibility="private" type="_DIm_0-saEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9G_yuvdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new ReentrantLock()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9G_y-vdEeaFWsKBBqDStg" name="notAnswered" visibility="private" type="_DIqDIOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9G_zOvdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>lock.newCondition()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9G_zevdEeaFWsKBBqDStg" name="server" visibility="private" type="_DIsfYesaEeaRPtCCR8m55A" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9G_zuvdEeaFWsKBBqDStg" name="turnCounter" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9G_z-vdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>0</body>
        </defaultValue>
      </ownedAttribute>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_0OvdEeaFWsKBBqDStg" name="Game" specification="_g9G_3OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.board = new Board();
    this.server = inServer;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_0evdEeaFWsKBBqDStg" name="leaveGame" specification="_g9G_3uvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.isAlive()) {
        lock.lock();
        notAnswered.signal();
        lock.unlock();
    } else {
        this.playerList.remove(client);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_0uvdEeaFWsKBBqDStg" name="isFull" specification="_g9G_4OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (playerList.size() == 2) {
        return true;
    } else {
        return false;
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_0-vdEeaFWsKBBqDStg" name="addPlayer" specification="_g9G_4uvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    playerList.add(inputPlayer);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_1OvdEeaFWsKBBqDStg" name="getPlayerList" specification="_g9G_5OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.playerList;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_1evdEeaFWsKBBqDStg" name="makeMove" specification="_g9G_6OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (!answered &amp;&amp; playerList.get(whoseTurn()).equals(player)) {
        //0 --> black
        if (whoseTurn() == 0) {
            //try to make the move, if valid set answered true 
            if (board.setField(x, y, Mark.X)) {
                notifyMove(x, y, player.getPlayerId());
            } else {
                //invalid --> return error 5 (invalid move)
                player.send(&quot;error 5&quot;);
            }
        //1 --> white
        } else {
            //try to make the move, if valid set answered true 
            if (board.setField(x, y, Mark.O)) {
                notifyMove(x, y, player.getPlayerId());
            } else {
                //invalid --> return error 5 (invalid move)
                player.send(&quot;error 5&quot;);
            }
        }
    } else {
        //not his turn --> return error 5 (invalid move)
        player.send(&quot;error 5&quot;);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_1uvdEeaFWsKBBqDStg" name="notifyMove" specification="_g9G_7OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    lock.lock();
    for (ClientHandler c : this.playerList) {
        c.send(Protocol.ProtServer.NOTIFYMOVE + &quot; &quot; + id + &quot; &quot; + x + &quot; &quot; + y);
    }
    //set answered on true such that the game thread can continue
    this.answered = true;
    this.notAnswered.signal();
    lock.unlock();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_1-vdEeaFWsKBBqDStg" name="whoseTurn" specification="_g9G_8OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.turnCounter % this.playerList.size();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_2OvdEeaFWsKBBqDStg" name="gameEnd" specification="_g9G_8uvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //check for disconnected players, then winner, then draw
    if (this.playerList.get(0).disconnected) {
        notifyEnd(this.playerList.get(0).getPlayerId(), 3);
        return true;
    } else if (this.playerList.get(1).disconnected) {
        notifyEnd(this.playerList.get(1).getPlayerId(), 3);
        return true;
    } else if (this.board.isWinner(Mark.X)) {
        notifyEnd(this.playerList.get(0).getPlayerId(), 1);
        return true;
    } else if (this.board.isWinner(Mark.O)) {
        notifyEnd(this.playerList.get(1).getPlayerId(), 1);
        return true;
    //then check for draw
    } else if (this.turnCounter == 64) {
        notifyEnd();
        return true;
    } else if (this.answered == false) {
        notifyEnd(this.playerList.get(whoseTurn()).getPlayerId(), 3);
        return true;
    }
    //do nothing if not ended
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_2evdEeaFWsKBBqDStg" name="notifyEnd" specification="_g9G_9OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (reason == 1) {
        for (ClientHandler c : this.playerList) {
            c.send(Protocol.ProtServer.NOTIFYEND + &quot; 1 &quot; + playerId);
            c.onFailure();
        }
    } else if (reason == 3) {
        for (ClientHandler c : this.playerList) {
            c.send(Protocol.ProtServer.NOTIFYEND + &quot; 3 &quot; + playerId);
            c.onFailure();
        }
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_2uvdEeaFWsKBBqDStg" name="notifyEnd" specification="_g9G_9-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    for (ClientHandler c : this.playerList) {
        c.send(Protocol.ProtServer.NOTIFYEND + &quot; 2&quot;);
        c.onFailure();
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9G_2-vdEeaFWsKBBqDStg" name="run" specification="_g9G_-OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    lock.lock();
    //assign an id to each player (their index in the arrayList + 1)
    for (int i = 0; i &lt; this.playerList.size(); i++) {
        int id = i + 1;
        this.playerList.get(i).setPlayerId(id);
        this.playerList.get(i).send(Protocol.ProtServer.ASSIGNID + &quot; &quot; + Integer.toString(id));
    }
    //includes game specifications and opponent info
    for (ClientHandler c : this.playerList) {
        c.send(Protocol.ProtServer.STARTGAME + &quot; 4|4|4|4 &quot; + getPlayerList().get(0).getPlayerId() + &quot;|&quot; + getPlayerList().get(0).getPlayerName() + &quot;|&quot; + &quot;0000ff&quot; + &quot; &quot; + getPlayerList().get(1).getPlayerId() + &quot;|&quot; + getPlayerList().get(1).getPlayerName() + &quot;|&quot; + &quot;ff0000&quot;);
    }
    while (!gameEnd()) {
        //next turn, at top of loop such that not updated when game is ended
        this.turnCounter++;
        for (ClientHandler c : this.playerList) {
            c.send(Protocol.ProtServer.TURNOFPLAYER + &quot; &quot; + Integer.toString(playerList.get(whoseTurn()).getPlayerId()));
        }
        //set answered on false, is set true when the player whose turn it is makes a move
        this.answered = false;
        //or timeout after 20 seconds            
        try {
            this.notAnswered.await(120, TimeUnit.SECONDS);
        } catch (InterruptedException e) {
            for (ClientHandler c : this.playerList) {
                c.send(&quot;Game interrupted.&quot;);
            }
        }
    }
    this.server.removeGame(this);
    lock.unlock();
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_3OvdEeaFWsKBBqDStg" name="Game" visibility="public" method="_g9G_0OvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_3evdEeaFWsKBBqDStg" name="inServer" type="_DIsfYesaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_3uvdEeaFWsKBBqDStg" name="leaveGame" visibility="public" method="_g9G_0evdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_3-vdEeaFWsKBBqDStg" name="client" type="_DIRooesaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_4OvdEeaFWsKBBqDStg" name="isFull" visibility="public" method="_g9G_0uvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_4evdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_4uvdEeaFWsKBBqDStg" name="addPlayer" visibility="public" method="_g9G_0-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_4-vdEeaFWsKBBqDStg" name="inputPlayer" type="_DIRooesaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_5OvdEeaFWsKBBqDStg" name="getPlayerList" visibility="public" method="_g9G_1OvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_5evdEeaFWsKBBqDStg" type="_DIRooesaEeaRPtCCR8m55A" direction="return">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9G_5uvdEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9G_5-vdEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_6OvdEeaFWsKBBqDStg" name="makeMove" visibility="public" method="_g9G_1evdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_6evdEeaFWsKBBqDStg" name="x">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_6uvdEeaFWsKBBqDStg" name="y">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_6-vdEeaFWsKBBqDStg" name="player" type="_DIRooesaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_7OvdEeaFWsKBBqDStg" name="notifyMove" visibility="public" method="_g9G_1uvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_7evdEeaFWsKBBqDStg" name="x">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_7uvdEeaFWsKBBqDStg" name="y">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_7-vdEeaFWsKBBqDStg" name="id">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_8OvdEeaFWsKBBqDStg" name="whoseTurn" visibility="public" method="_g9G_1-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_8evdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_8uvdEeaFWsKBBqDStg" name="gameEnd" visibility="public" method="_g9G_2OvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_8-vdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_9OvdEeaFWsKBBqDStg" name="notifyEnd" visibility="public" method="_g9G_2evdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_9evdEeaFWsKBBqDStg" name="playerId">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9G_9uvdEeaFWsKBBqDStg" name="reason">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_9-vdEeaFWsKBBqDStg" name="notifyEnd" visibility="public" method="_g9G_2uvdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9G_-OvdEeaFWsKBBqDStg" name="run" visibility="public" method="_g9G_2-vdEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_g9Hm0OvdEeaFWsKBBqDStg" memberEnd="_g9Hm1OvdEeaFWsKBBqDStg _g9Hm0-vdEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_g9Hm0evdEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_g9Hm0uvdEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_g9Hm0-vdEeaFWsKBBqDStg" type="_g9G_wOvdEeaFWsKBBqDStg" association="_g9Hm0OvdEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_g9Hm1OvdEeaFWsKBBqDStg" type="_g9IN4OvdEeaFWsKBBqDStg" association="_g9Hm0OvdEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9Hm1evdEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9Hm1uvdEeaFWsKBBqDStg" value="2"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_g9Hm1-vdEeaFWsKBBqDStg" memberEnd="_g9Hm2-vdEeaFWsKBBqDStg _g9Hm2uvdEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_g9Hm2OvdEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_g9Hm2evdEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_g9Hm2uvdEeaFWsKBBqDStg" type="_g9FxoOvdEeaFWsKBBqDStg" association="_g9Hm1-vdEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_g9Hm2-vdEeaFWsKBBqDStg" type="_g9G_wOvdEeaFWsKBBqDStg" association="_g9Hm1-vdEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9Hm3OvdEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9Hm3evdEeaFWsKBBqDStg" value="*"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_g9IN4OvdEeaFWsKBBqDStg" name="ClientHandler" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_g9IN4evdEeaFWsKBBqDStg" general="_9u5hcOsfEeagpPVreqOLZw"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9IN4uvdEeaFWsKBBqDStg" name="server" visibility="private" isLeaf="true" type="_g9FxoOvdEeaFWsKBBqDStg" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9IN4-vdEeaFWsKBBqDStg" name="playerName" visibility="private" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9IN5OvdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;notSendYet&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9IN5evdEeaFWsKBBqDStg" name="playerId" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9IN5uvdEeaFWsKBBqDStg" name="game" visibility="private" type="_g9G_wOvdEeaFWsKBBqDStg" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9IN5-vdEeaFWsKBBqDStg" name="canChat" visibility="private" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9IN6OvdEeaFWsKBBqDStg" name="disconnected" visibility="public" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9IN6evdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>false</body>
        </defaultValue>
      </ownedAttribute>
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_g9IN6uvdEeaFWsKBBqDStg" name="ClientHandler implements Runnable" client="_g9IN4OvdEeaFWsKBBqDStg" supplier="_-47L8OscEeaGGeTgDT8kcg" contract="_-47L8OscEeaGGeTgDT8kcg"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN6-vdEeaFWsKBBqDStg" name="ClientHandler" specification="_g9IN9-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    super(inSock.getInputStream(), inSock.getOutputStream());
    this.server = inServer;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN7OvdEeaFWsKBBqDStg" name="setPlayerName" specification="_g9IN-uvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.playerName = input;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN7evdEeaFWsKBBqDStg" name="setPlayerId" specification="_g9IN_OvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.playerId = id;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN7uvdEeaFWsKBBqDStg" name="setPlayerGame" specification="_g9IN_uvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.game = inputGame;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN7-vdEeaFWsKBBqDStg" name="getPlayerName" specification="_g9IOAOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.playerName;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN8OvdEeaFWsKBBqDStg" name="getPlayerId" specification="_g9IOAuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.playerId;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN8evdEeaFWsKBBqDStg" name="getPlayerGame" specification="_g9IOBOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.game;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN8uvdEeaFWsKBBqDStg" name="setClientCapabilities" specification="_g9IOBuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    // this.clientCapabilities = inputSplit;
    this.playerName = inputSplit[2];
    if (inputSplit.length > 8 &amp;&amp; inputSplit[8].equals(&quot;1&quot;)) {
        this.canChat = true;
    } else {
        this.canChat = false;
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN8-vdEeaFWsKBBqDStg" name="send" specification="_g9IOCuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (!disconnected) {
        super.send(input);
    }
    //send all communication (except pings) to serverTUI as required
    if (!input.equals(&quot;ping&quot;)) {
        this.server.sendToView(&quot;sent(To &quot; + this.playerName + &quot;): &quot; + input);
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN9OvdEeaFWsKBBqDStg" name="atStart" specification="_g9IODOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //first action from the server, send capabilities as described in protocol
    send(Protocol.ProtServer.SERVERCAPABILITIES + Server.CAPABILITIES);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN9evdEeaFWsKBBqDStg" name="onFailure" specification="_g9IODevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.disconnected = true;
    if (this.game != null) {
        this.game.leaveGame(this);
    }
    if (this.server != null) {
        this.server.leaveServer(this);
    }
    //exit the terminal and close its streams.
    super.exit();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9IN9uvdEeaFWsKBBqDStg" name="handleInput" specification="_g9IODuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    //send communication to serverTUI as required
    this.server.sendToView(&quot;client (&quot; + this.playerName + &quot;): &quot; + input);
    //split input around spaces
    String[] inputSplit = input.split(&quot; &quot;);
    //check which command is given (always the first word)
    if (inputSplit[0].equals(Protocol.ProtClient.SENDCAPABILITIES)) {
        setClientCapabilities(inputSplit);
        this.server.joinGame(this);
    } else if (inputSplit[0].equals(Protocol.ProtClient.SENDMESSAGE) &amp;&amp; this.canChat) {
        this.server.sendChat(inputSplit, this.playerName);
    } else if (inputSplit[0].equals(Protocol.ProtClient.MAKEMOVE) &amp;&amp; inputSplit.length == 3) {
        try {
            int x = Integer.parseInt(inputSplit[1]);
            int y = Integer.parseInt(inputSplit[2]);
            this.game.makeMove(x, y, this);
        } catch (NumberFormatException e) {
            send(&quot;error 4&quot;);
        }
    } else {
        //error 4 ==> invalidCommand
        send(&quot;error 4&quot;);
    }
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IN9-vdEeaFWsKBBqDStg" name="ClientHandler" visibility="public" method="_g9IN6-vdEeaFWsKBBqDStg" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IN-OvdEeaFWsKBBqDStg" name="inServer" type="_g9FxoOvdEeaFWsKBBqDStg"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IN-evdEeaFWsKBBqDStg" name="inSock" type="_-4_dYuscEeaGGeTgDT8kcg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IN-uvdEeaFWsKBBqDStg" name="setPlayerName" visibility="public" method="_g9IN7OvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IN--vdEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IN_OvdEeaFWsKBBqDStg" name="setPlayerId" visibility="public" method="_g9IN7evdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IN_evdEeaFWsKBBqDStg" name="id">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IN_uvdEeaFWsKBBqDStg" name="setPlayerGame" visibility="public" method="_g9IN7uvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IN_-vdEeaFWsKBBqDStg" name="inputGame" type="_g9G_wOvdEeaFWsKBBqDStg"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IOAOvdEeaFWsKBBqDStg" name="getPlayerName" visibility="public" method="_g9IN7-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IOAevdEeaFWsKBBqDStg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IOAuvdEeaFWsKBBqDStg" name="getPlayerId" visibility="public" method="_g9IN8OvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IOA-vdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IOBOvdEeaFWsKBBqDStg" name="getPlayerGame" visibility="public" method="_g9IN8evdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IOBevdEeaFWsKBBqDStg" type="_g9G_wOvdEeaFWsKBBqDStg" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IOBuvdEeaFWsKBBqDStg" name="setClientCapabilities" visibility="public" method="_g9IN8uvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IOB-vdEeaFWsKBBqDStg" name="inputSplit" type="_DIE0UOsaEeaRPtCCR8m55A">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9IOCOvdEeaFWsKBBqDStg"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9IOCevdEeaFWsKBBqDStg" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IOCuvdEeaFWsKBBqDStg" name="send" visibility="public" method="_g9IN8-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IOC-vdEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IODOvdEeaFWsKBBqDStg" name="atStart" visibility="public" method="_g9IN9OvdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IODevdEeaFWsKBBqDStg" name="onFailure" visibility="public" method="_g9IN9evdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9IODuvdEeaFWsKBBqDStg" name="handleInput" visibility="public" method="_g9IN9uvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9IOD-vdEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_g9I09evdEeaFWsKBBqDStg" memberEnd="_g9I0-evdEeaFWsKBBqDStg _g9I0-OvdEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_g9I09uvdEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_g9I09-vdEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_g9I0-OvdEeaFWsKBBqDStg" type="_g9I1AevdEeaFWsKBBqDStg" association="_g9I09evdEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_g9I0-evdEeaFWsKBBqDStg" type="_g9G_wOvdEeaFWsKBBqDStg" association="_g9I09evdEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_g9I0-uvdEeaFWsKBBqDStg" memberEnd="_g9I0_uvdEeaFWsKBBqDStg _g9I0_evdEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_g9I0--vdEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_g9I0_OvdEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_g9I0_evdEeaFWsKBBqDStg" type="_g9FxoOvdEeaFWsKBBqDStg" association="_g9I0-uvdEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_g9I0_uvdEeaFWsKBBqDStg" type="_g9IN4OvdEeaFWsKBBqDStg" association="_g9I0-uvdEeaFWsKBBqDStg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g9I0_-vdEeaFWsKBBqDStg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g9I1AOvdEeaFWsKBBqDStg" value="*"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_g9I1AevdEeaFWsKBBqDStg" name="Board" visibility="public">
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9I1AuvdEeaFWsKBBqDStg" name="MAXFIELD" visibility="public" isLeaf="true" isStatic="true" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9I1A-vdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>3</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_g9I1BOvdEeaFWsKBBqDStg" name="fieldMap" visibility="private" type="_DJGIAusaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g9I1BevdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>new HashMap&lt;Field, Mark>()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1BuvdEeaFWsKBBqDStg" name="Board" specification="_g9I1GOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.reset();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1B-vdEeaFWsKBBqDStg" name="copy" specification="_g9I1GevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Board copy = new Board();
    for (int x = 0; x &lt;= MAXFIELD; x++) {
        for (int y = 0; y &lt;= MAXFIELD; y++) {
            for (int z = 0; z &lt;= MAXFIELD; z++) {
                Field field = new Field(x, y, z);
                if (!this.isEmptyField(field)) {
                    copy.fieldMap.put(field, this.getMark(field));
                }
            }
        }
    }
    return copy;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1COvdEeaFWsKBBqDStg" name="isField" specification="_g9I1G-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return field.x >= 0 &amp;&amp; field.x &lt;= MAXFIELD &amp;&amp; field.y >= 0 &amp;&amp; field.y &lt;= MAXFIELD &amp;&amp; field.z >= 0 &amp;&amp; field.z &lt;= MAXFIELD;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1CevdEeaFWsKBBqDStg" name="isReachableEmptyField" specification="_g9I1HuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field copy = field.copy();
    //check fields below
    while ((copy = this.walkField(copy, 0, 0, -1)) != null) {
        if (!this.fieldMap.containsKey(copy)) {
            return false;
        }
    }
    return this.isField(field) &amp;&amp; !this.fieldMap.containsKey(field);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1CuvdEeaFWsKBBqDStg" name="isEmptyField" specification="_g9I1IevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return !this.fieldMap.containsKey(field);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1C-vdEeaFWsKBBqDStg" name="getEmptyField" specification="_g9I1JOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field empty = new Field(x, y, 0);
    if (this.isReachableEmptyField(empty)) {
        return empty;
    } else {
        while ((empty = walkField(empty, 0, 0, 1)) != null) {
            if (this.isReachableEmptyField(empty)) {
                return empty;
            }
        }
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1DOvdEeaFWsKBBqDStg" name="setField" specification="_g9I1KOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.isReachableEmptyField(field)) {
        this.fieldMap.put(field, m);
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1DevdEeaFWsKBBqDStg" name="walkField" specification="_g9I1LOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field nextfield = new Field(field.x + xoff, field.y + yoff, field.z + zoff);
    if (this.isField(nextfield)) {
        return nextfield;
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1DuvdEeaFWsKBBqDStg" name="setField" specification="_g9I1MuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field newfield = this.getEmptyField(x, y);
    if (newfield != null) {
        return this.setField(newfield, m);
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1D-vdEeaFWsKBBqDStg" name="getMark" specification="_g9I1N-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.isField(field)) {
        return this.fieldMap.get(field);
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1EOvdEeaFWsKBBqDStg" name="reset" specification="_g9I1OuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    this.fieldMap.clear();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1EevdEeaFWsKBBqDStg" name="checkRow" specification="_g9I1O-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Field checker = start.copy();
    int count = 0;
    do {
        if (this.isEmptyField(checker) || !this.getMark(checker).equals(m)) {
            return false;
        }
        count++;
        checker = this.walkField(checker, xdir, ydir, zdir);
    } while (checker != null);
    if (count == MAXFIELD + 1) {
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1EuvdEeaFWsKBBqDStg" name="checkZcolums" specification="_g9I1QuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    for (int x = 0; x &lt;= MAXFIELD; x++) {
        for (int y = 0; y &lt;= MAXFIELD; y++) {
            Field zchecker = new Field(x, y, 0);
            if (this.checkRow(zchecker, 0, 0, 1, m)) {
                return true;
            }
        }
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1E-vdEeaFWsKBBqDStg" name="checkPlanes" specification="_g9I1RevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    for (int i = 0; i &lt;= MAXFIELD; i++) {
        //check all x-y planes
        for (int z = 0; z &lt;= MAXFIELD; z++) {
            Field xchecker = new Field(0, i, z);
            Field ychecker = new Field(i, 0, z);
            if (this.checkRow(xchecker, 1, 0, 0, m) || this.checkRow(ychecker, 0, 1, 0, m)) {
                return true;
            }
        }
        //check diagonal planes
        //startpoint x axis
        Field yzchecker = new Field(i, 0, 0);
        //startpoint y axis
        Field xzchecker = new Field(0, i, 0);
        //opposite startpoint x axis
        Field yzdownchecker = new Field(i, MAXFIELD, 0);
        //opposite startpoint y axis
        Field xzdownchecker = new Field(MAXFIELD, i, 0);
        //check cross-planes
        Field crosschecker = new Field(0, 0, i);
        Field crossdownchecker = new Field(0, MAXFIELD, i);
        if (this.checkRow(yzchecker, 0, 1, 1, m) || this.checkRow(xzchecker, 1, 0, 1, m) || this.checkRow(yzdownchecker, 0, -1, 1, m) || this.checkRow(xzdownchecker, -1, 0, 1, m) || this.checkRow(crosschecker, 1, 1, 0, m) || this.checkRow(crossdownchecker, 1, -1, 0, m)) {
            return true;
        }
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1FOvdEeaFWsKBBqDStg" name="isWinner" specification="_g9I1SOvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    return this.checkPlanes(m) || this.checkZcolums(m);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1FevdEeaFWsKBBqDStg" name="getWinner" specification="_g9I1S-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    Mark m = Mark.X;
    if (this.isWinner(m) &amp;&amp; !this.isWinner(m.other())) {
        return m;
    } else if (this.isWinner(m.other())) {
        return m.other();
    } else {
        return null;
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1FuvdEeaFWsKBBqDStg" name="hasEnded" specification="_g9I1TevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    if (this.isWinner(Mark.X) || this.isWinner(Mark.O) || this.fieldMap.size() == MAXFIELD * MAXFIELD * MAXFIELD) {
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g9I1F-vdEeaFWsKBBqDStg" name="toString" specification="_g9I1T-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    String result = &quot;&quot;;
    for (int y = MAXFIELD; y >= 0; y--) {
        for (int z = 0; z &lt;= MAXFIELD; z++) {
            result = result + y;
            for (int x = 0; x &lt;= MAXFIELD; x++) {
                Field out = new Field(x, y, z);
                if (this.isEmptyField(out)) {
                    result = result + &quot;[ ]&quot;;
                } else {
                    result = result + &quot;[&quot; + this.getMark(out).toString() + &quot;]&quot;;
                }
            }
            result = result + &quot;   &quot;;
        }
        result = result + &quot;\n&quot;;
    }
    return result;
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1GOvdEeaFWsKBBqDStg" name="Board" visibility="public" method="_g9I1BuvdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1GevdEeaFWsKBBqDStg" name="copy" visibility="public" method="_g9I1B-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1GuvdEeaFWsKBBqDStg" type="_g9I1AevdEeaFWsKBBqDStg" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1G-vdEeaFWsKBBqDStg" name="isField" visibility="public" method="_g9I1COvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1HOvdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1HevdEeaFWsKBBqDStg" name="field"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1HuvdEeaFWsKBBqDStg" name="isReachableEmptyField" visibility="public" method="_g9I1CevdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1H-vdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1IOvdEeaFWsKBBqDStg" name="field"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1IevdEeaFWsKBBqDStg" name="isEmptyField" visibility="public" method="_g9I1CuvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1IuvdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1I-vdEeaFWsKBBqDStg" name="field"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1JOvdEeaFWsKBBqDStg" name="getEmptyField" visibility="public" method="_g9I1C-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1JevdEeaFWsKBBqDStg" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1JuvdEeaFWsKBBqDStg" name="x">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1J-vdEeaFWsKBBqDStg" name="y">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1KOvdEeaFWsKBBqDStg" name="setField" visibility="public" method="_g9I1DOvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1KevdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1KuvdEeaFWsKBBqDStg" name="field"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1K-vdEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1LOvdEeaFWsKBBqDStg" name="walkField" visibility="public" method="_g9I1DevdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1LevdEeaFWsKBBqDStg" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1LuvdEeaFWsKBBqDStg" name="field"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1L-vdEeaFWsKBBqDStg" name="xoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1MOvdEeaFWsKBBqDStg" name="yoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1MevdEeaFWsKBBqDStg" name="zoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1MuvdEeaFWsKBBqDStg" name="setField" visibility="public" method="_g9I1DuvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1M-vdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1NOvdEeaFWsKBBqDStg" name="x">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1NevdEeaFWsKBBqDStg" name="y">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1NuvdEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1N-vdEeaFWsKBBqDStg" name="getMark" visibility="public" method="_g9I1D-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1OOvdEeaFWsKBBqDStg" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1OevdEeaFWsKBBqDStg" name="field"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1OuvdEeaFWsKBBqDStg" name="reset" visibility="public" method="_g9I1EOvdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1O-vdEeaFWsKBBqDStg" name="checkRow" visibility="public" method="_g9I1EevdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1POvdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1PevdEeaFWsKBBqDStg" name="start"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1PuvdEeaFWsKBBqDStg" name="xdir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1P-vdEeaFWsKBBqDStg" name="ydir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1QOvdEeaFWsKBBqDStg" name="zdir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1QevdEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1QuvdEeaFWsKBBqDStg" name="checkZcolums" visibility="public" method="_g9I1EuvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1Q-vdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1ROvdEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1RevdEeaFWsKBBqDStg" name="checkPlanes" visibility="public" method="_g9I1E-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1RuvdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1R-vdEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1SOvdEeaFWsKBBqDStg" name="isWinner" visibility="public" method="_g9I1FOvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1SevdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1SuvdEeaFWsKBBqDStg" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1S-vdEeaFWsKBBqDStg" name="getWinner" visibility="public" method="_g9I1FevdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1TOvdEeaFWsKBBqDStg" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1TevdEeaFWsKBBqDStg" name="hasEnded" visibility="public" method="_g9I1FuvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1TuvdEeaFWsKBBqDStg" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_g9I1T-vdEeaFWsKBBqDStg" name="toString" visibility="public" method="_g9I1F-vdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_g9I1UOvdEeaFWsKBBqDStg" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_ycb9YOvdEeaFWsKBBqDStg" name="ServerTUIView" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_ycb9YevdEeaFWsKBBqDStg" general="_9u5hcOsfEeagpPVreqOLZw"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_ycb9YuvdEeaFWsKBBqDStg" name="server" visibility="private" isLeaf="true" isUnique="false"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_ycb9Y-vdEeaFWsKBBqDStg" name="START" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ycb9ZOvdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;start&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_ycb9ZevdEeaFWsKBBqDStg" name="EXIT" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ycb9ZuvdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;exit&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_ycb9Z-vdEeaFWsKBBqDStg" name="HELP" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ycb9aOvdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;help&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_ycb9aevdEeaFWsKBBqDStg" name="SWITCH" visibility="private" isLeaf="true" isStatic="true" type="_DIE0UOsaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_ycb9auvdEeaFWsKBBqDStg" name="defaultValue">
          <language>JAVA</language>
          <body>&quot;switch&quot;</body>
        </defaultValue>
      </ownedAttribute>
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_ycb9a-vdEeaFWsKBBqDStg" name="implements" client="_ycb9YOvdEeaFWsKBBqDStg" supplier="_71-Q8esfEeagpPVreqOLZw" contract="_71-Q8esfEeagpPVreqOLZw"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ycb9bOvdEeaFWsKBBqDStg" name="ServerTUIView" specification="_ycb9b-vdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    super(System.in, System.out);
    this.server = inServer;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ycb9bevdEeaFWsKBBqDStg" name="atStart" specification="_ycb9cevdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    send(&quot;Enter 'start &lt;port>' to start the server.&quot;);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ycb9buvdEeaFWsKBBqDStg" name="handleInput" specification="_ycb9cuvdEeaFWsKBBqDStg">
        <language>JAVA</language>
        <body>
    String[] inputSplit = input.split(&quot; &quot;);
    if (input.equals(EXIT)) {
        super.send(&quot;Server is shutting down...&quot;);
        server.shutDown();
    } else if (inputSplit[0].equals(START) &amp;&amp; inputSplit.length == 2) {
        this.server.startServer(inputSplit[1]);
    } else if (input.equals(HELP)) {
        super.send(&quot;&quot;);
        super.send(&quot;VALID COMMANDS&quot;);
        super.send(&quot;Command:'&quot; + START + &quot;' ==> starts the server on port.&quot;);
        super.send(&quot;Command:'&quot; + EXIT + &quot;' ==> shutdown the server.&quot;);
        super.send(&quot;&quot;);
        super.send(&quot;Enter a command below.&quot;);
    } else if (input.equals(SWITCH)) {
        super.send(&quot;&quot;);
    } else {
        super.send(&quot;Invalid command, type 'HELP' to see valid commands.&quot;);
    }
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_ycb9b-vdEeaFWsKBBqDStg" name="ServerTUIView" visibility="public" method="_ycb9bOvdEeaFWsKBBqDStg" raisedException="_-5EV4uscEeaGGeTgDT8kcg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_ycb9cOvdEeaFWsKBBqDStg" name="inServer"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_ycb9cevdEeaFWsKBBqDStg" name="atStart" visibility="public" method="_ycb9bevdEeaFWsKBBqDStg"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_ycb9cuvdEeaFWsKBBqDStg" name="handleInput" visibility="public" method="_ycb9buvdEeaFWsKBBqDStg">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_ycb9c-vdEeaFWsKBBqDStg" name="input" type="_DIE0UOsaEeaRPtCCR8m55A"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_1SdIQOvdEeaFWsKBBqDStg" memberEnd="_1SdvUuvdEeaFWsKBBqDStg _1SdvU-vdEeaFWsKBBqDStg">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_1SdvUOvdEeaFWsKBBqDStg" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_1SdvUevdEeaFWsKBBqDStg" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_1SdvU-vdEeaFWsKBBqDStg" type="_g9FxoOvdEeaFWsKBBqDStg" association="_1SdIQOvdEeaFWsKBBqDStg"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_1SdvUuvdEeaFWsKBBqDStg" type="_ycb9YOvdEeaFWsKBBqDStg" association="_1SdIQOvdEeaFWsKBBqDStg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_TW0eUOvfEea_C-H5NfTs0A" memberEnd="_TW3hoOvfEea_C-H5NfTs0A _TW4IsOvfEea_C-H5NfTs0A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_TW2TgOvfEea_C-H5NfTs0A" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_TW26kOvfEea_C-H5NfTs0A" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_TW4IsOvfEea_C-H5NfTs0A" type="_Ml3rwOvbEeaFWsKBBqDStg" association="_TW0eUOvfEea_C-H5NfTs0A"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_TW3hoOvfEea_C-H5NfTs0A" type="_RaO10OvfEea_C-H5NfTs0A" association="_TW0eUOvfEea_C-H5NfTs0A"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_WVRzgOvfEea_C-H5NfTs0A" memberEnd="_WVTBoevfEea_C-H5NfTs0A _WVTosOvfEea_C-H5NfTs0A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_WVSakOvfEea_C-H5NfTs0A" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_WVTBoOvfEea_C-H5NfTs0A" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_WVTosOvfEea_C-H5NfTs0A" type="_RaO10OvfEea_C-H5NfTs0A" association="_WVRzgOvfEea_C-H5NfTs0A"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_WVTBoevfEea_C-H5NfTs0A" type="_ydeKEOvbEeaFWsKBBqDStg" association="_WVRzgOvfEea_C-H5NfTs0A"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_YdKtEOvfEea_C-H5NfTs0A" memberEnd="_YdLUIevfEea_C-H5NfTs0A _YdLUIuvfEea_C-H5NfTs0A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_YdKtEevfEea_C-H5NfTs0A" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_YdLUIOvfEea_C-H5NfTs0A" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_YdLUIuvfEea_C-H5NfTs0A" type="_RaO10OvfEea_C-H5NfTs0A" association="_YdKtEOvfEea_C-H5NfTs0A"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_YdLUIevfEea_C-H5NfTs0A" type="_BwkckOsfEeagpPVreqOLZw" association="_YdKtEOvfEea_C-H5NfTs0A">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_ZM-ZYOvfEea_C-H5NfTs0A"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_ZND48OvfEea_C-H5NfTs0A" value="*"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_cOUDcOvfEea_C-H5NfTs0A" memberEnd="_cOUqguvfEea_C-H5NfTs0A _cOVRkOvfEea_C-H5NfTs0A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_cOUqgOvfEea_C-H5NfTs0A" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_cOUqgevfEea_C-H5NfTs0A" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_cOVRkOvfEea_C-H5NfTs0A" type="_QNhLEOvfEea_C-H5NfTs0A" association="_cOUDcOvfEea_C-H5NfTs0A"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_j0bgQOvfEea_C-H5NfTs0A" name="Board" visibility="public">
      <generalization xmi:type="uml:Generalization" xmi:id="_j0bgQevfEea_C-H5NfTs0A" general="_MmtZQOvbEeaFWsKBBqDStg"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_j0bgQuvfEea_C-H5NfTs0A" name="MAXFIELD" visibility="public" isLeaf="true" isStatic="true" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_j0bgQ-vfEea_C-H5NfTs0A" name="defaultValue">
          <language>JAVA</language>
          <body>3</body>
        </defaultValue>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_j0bgROvfEea_C-H5NfTs0A" name="fieldMap" visibility="private" type="_DJGIAusaEeaRPtCCR8m55A" isUnique="false">
        <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_j0bgRevfEea_C-H5NfTs0A" name="defaultValue">
          <language>JAVA</language>
          <body>new HashMap&lt;Field, Mark>()</body>
        </defaultValue>
      </ownedAttribute>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgRuvfEea_C-H5NfTs0A" name="Board" specification="_j0bgWOvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    this.reset();
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgR-vfEea_C-H5NfTs0A" name="copy" specification="_j0bgWevfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Board copy = new Board();
    for (int x = 0; x &lt;= MAXFIELD; x++) {
        for (int y = 0; y &lt;= MAXFIELD; y++) {
            for (int z = 0; z &lt;= MAXFIELD; z++) {
                Field field = new Field(x, y, z);
                if (!this.isEmptyField(field)) {
                    copy.fieldMap.put(field, this.getMark(field));
                }
            }
        }
    }
    return copy;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgSOvfEea_C-H5NfTs0A" name="isField" specification="_j0bgW-vfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    return field.x >= 0 &amp;&amp; field.x &lt;= MAXFIELD &amp;&amp; field.y >= 0 &amp;&amp; field.y &lt;= MAXFIELD &amp;&amp; field.z >= 0 &amp;&amp; field.z &lt;= MAXFIELD;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgSevfEea_C-H5NfTs0A" name="isReachableEmptyField" specification="_j0bgXuvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Field copy = field.copy();
    //check fields below
    while ((copy = this.walkField(copy, 0, 0, -1)) != null) {
        if (!this.fieldMap.containsKey(copy)) {
            return false;
        }
    }
    return this.isField(field) &amp;&amp; !this.fieldMap.containsKey(field);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgSuvfEea_C-H5NfTs0A" name="isEmptyField" specification="_j0bgYevfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    return !this.fieldMap.containsKey(field);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgS-vfEea_C-H5NfTs0A" name="getEmptyField" specification="_j0bgZOvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Field empty = new Field(x, y, 0);
    if (this.isReachableEmptyField(empty)) {
        return empty;
    } else {
        while ((empty = walkField(empty, 0, 0, 1)) != null) {
            if (this.isReachableEmptyField(empty)) {
                return empty;
            }
        }
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgTOvfEea_C-H5NfTs0A" name="setField" specification="_j0bgaOvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    if (this.isReachableEmptyField(field)) {
        this.fieldMap.put(field, m);
        //use observer pattern to signal board change
        setChanged();
        notifyObservers(&quot;boardchanged&quot;);
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgTevfEea_C-H5NfTs0A" name="walkField" specification="_j0bgbOvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Field nextfield = new Field(field.x + xoff, field.y + yoff, field.z + zoff);
    if (this.isField(nextfield)) {
        return nextfield;
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgTuvfEea_C-H5NfTs0A" name="setField" specification="_j0bgcuvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Field newfield = this.getEmptyField(x, y);
    if (newfield != null) {
        return this.setField(newfield, m);
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgT-vfEea_C-H5NfTs0A" name="getMark" specification="_j0bgd-vfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    if (this.isField(field)) {
        return this.fieldMap.get(field);
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgUOvfEea_C-H5NfTs0A" name="reset" specification="_j0bgeuvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    this.fieldMap.clear();
    setChanged();
    notifyObservers(&quot;boardchanged&quot;);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgUevfEea_C-H5NfTs0A" name="checkRow" specification="_j0bge-vfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Field checker = start.copy();
    int count = 0;
    do {
        if (this.isEmptyField(checker) || !this.getMark(checker).equals(m)) {
            return false;
        }
        count++;
        checker = this.walkField(checker, xdir, ydir, zdir);
    } while (checker != null);
    if (count == MAXFIELD + 1) {
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgUuvfEea_C-H5NfTs0A" name="checkZcolums" specification="_j0bgguvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    for (int x = 0; x &lt;= MAXFIELD; x++) {
        for (int y = 0; y &lt;= MAXFIELD; y++) {
            Field zchecker = new Field(x, y, 0);
            if (this.checkRow(zchecker, 0, 0, 1, m)) {
                return true;
            }
        }
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgU-vfEea_C-H5NfTs0A" name="checkPlanes" specification="_j0bghevfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    for (int i = 0; i &lt;= MAXFIELD; i++) {
        //check all x-y planes
        for (int z = 0; z &lt;= MAXFIELD; z++) {
            Field xchecker = new Field(0, i, z);
            Field ychecker = new Field(i, 0, z);
            if (this.checkRow(xchecker, 1, 0, 0, m) || this.checkRow(ychecker, 0, 1, 0, m)) {
                return true;
            }
        }
        //check diagonal planes
        //startpoint x axis
        Field yzchecker = new Field(i, 0, 0);
        //startpoint y axis
        Field xzchecker = new Field(0, i, 0);
        //opposite startpoint x axis
        Field yzdownchecker = new Field(i, MAXFIELD, 0);
        //opposite startpoint y axis
        Field xzdownchecker = new Field(MAXFIELD, i, 0);
        //check cross-planes
        Field crosschecker = new Field(0, 0, i);
        Field crossdownchecker = new Field(0, MAXFIELD, i);
        if (this.checkRow(yzchecker, 0, 1, 1, m) || this.checkRow(xzchecker, 1, 0, 1, m) || this.checkRow(yzdownchecker, 0, -1, 1, m) || this.checkRow(xzdownchecker, -1, 0, 1, m) || this.checkRow(crosschecker, 1, 1, 0, m) || this.checkRow(crossdownchecker, 1, -1, 0, m)) {
            return true;
        }
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgVOvfEea_C-H5NfTs0A" name="isWinner" specification="_j0bgiOvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    return this.checkPlanes(m) || this.checkZcolums(m);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgVevfEea_C-H5NfTs0A" name="getWinner" specification="_j0bgi-vfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Mark m = Mark.X;
    if (this.isWinner(m) &amp;&amp; !this.isWinner(m.other())) {
        return m;
    } else if (this.isWinner(m.other())) {
        return m.other();
    } else {
        return null;
    }
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgVuvfEea_C-H5NfTs0A" name="hasEnded" specification="_j0bgjevfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    if (this.isWinner(Mark.X) || this.isWinner(Mark.O) || this.fieldMap.size() == MAXFIELD * MAXFIELD * MAXFIELD) {
        return true;
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0bgV-vfEea_C-H5NfTs0A" name="toString" specification="_j0bgj-vfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    String result = &quot;&quot;;
    for (int y = MAXFIELD; y >= 0; y--) {
        for (int z = 0; z &lt;= MAXFIELD; z++) {
            result = result + y;
            for (int x = 0; x &lt;= MAXFIELD; x++) {
                Field out = new Field(x, y, z);
                if (this.isEmptyField(out)) {
                    result = result + &quot;[ ]&quot;;
                } else {
                    result = result + &quot;[&quot; + this.getMark(out).toString() + &quot;]&quot;;
                }
            }
            result = result + &quot;   &quot;;
        }
        result = result + &quot;\n&quot;;
    }
    return result;
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgWOvfEea_C-H5NfTs0A" name="Board" visibility="public" method="_j0bgRuvfEea_C-H5NfTs0A"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgWevfEea_C-H5NfTs0A" name="copy" visibility="public" method="_j0bgR-vfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgWuvfEea_C-H5NfTs0A" type="_j0bgQOvfEea_C-H5NfTs0A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgW-vfEea_C-H5NfTs0A" name="isField" visibility="public" method="_j0bgSOvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgXOvfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgXevfEea_C-H5NfTs0A" name="field" type="_j0cuYOvfEea_C-H5NfTs0A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgXuvfEea_C-H5NfTs0A" name="isReachableEmptyField" visibility="public" method="_j0bgSevfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgX-vfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgYOvfEea_C-H5NfTs0A" name="field" type="_j0cuYOvfEea_C-H5NfTs0A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgYevfEea_C-H5NfTs0A" name="isEmptyField" visibility="public" method="_j0bgSuvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgYuvfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgY-vfEea_C-H5NfTs0A" name="field" type="_j0cuYOvfEea_C-H5NfTs0A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgZOvfEea_C-H5NfTs0A" name="getEmptyField" visibility="public" method="_j0bgS-vfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgZevfEea_C-H5NfTs0A" type="_j0cuYOvfEea_C-H5NfTs0A" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgZuvfEea_C-H5NfTs0A" name="x">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgZ-vfEea_C-H5NfTs0A" name="y">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgaOvfEea_C-H5NfTs0A" name="setField" visibility="public" method="_j0bgTOvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgaevfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgauvfEea_C-H5NfTs0A" name="field" type="_j0cuYOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bga-vfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgbOvfEea_C-H5NfTs0A" name="walkField" visibility="public" method="_j0bgTevfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgbevfEea_C-H5NfTs0A" type="_j0cuYOvfEea_C-H5NfTs0A" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgbuvfEea_C-H5NfTs0A" name="field" type="_j0cuYOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgb-vfEea_C-H5NfTs0A" name="xoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgcOvfEea_C-H5NfTs0A" name="yoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgcevfEea_C-H5NfTs0A" name="zoff">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgcuvfEea_C-H5NfTs0A" name="setField" visibility="public" method="_j0bgTuvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgc-vfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgdOvfEea_C-H5NfTs0A" name="x">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgdevfEea_C-H5NfTs0A" name="y">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgduvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgd-vfEea_C-H5NfTs0A" name="getMark" visibility="public" method="_j0bgT-vfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgeOvfEea_C-H5NfTs0A" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgeevfEea_C-H5NfTs0A" name="field" type="_j0cuYOvfEea_C-H5NfTs0A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgeuvfEea_C-H5NfTs0A" name="reset" visibility="public" method="_j0bgUOvfEea_C-H5NfTs0A"/>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bge-vfEea_C-H5NfTs0A" name="checkRow" visibility="public" method="_j0bgUevfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgfOvfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgfevfEea_C-H5NfTs0A" name="start" type="_j0cuYOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgfuvfEea_C-H5NfTs0A" name="xdir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgf-vfEea_C-H5NfTs0A" name="ydir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bggOvfEea_C-H5NfTs0A" name="zdir">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bggevfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgguvfEea_C-H5NfTs0A" name="checkZcolums" visibility="public" method="_j0bgUuvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgg-vfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bghOvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bghevfEea_C-H5NfTs0A" name="checkPlanes" visibility="public" method="_j0bgU-vfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bghuvfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgh-vfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgiOvfEea_C-H5NfTs0A" name="isWinner" visibility="public" method="_j0bgVOvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgievfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgiuvfEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgi-vfEea_C-H5NfTs0A" name="getWinner" visibility="public" method="_j0bgVevfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgjOvfEea_C-H5NfTs0A" type="_BwkckOsfEeagpPVreqOLZw" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgjevfEea_C-H5NfTs0A" name="hasEnded" visibility="public" method="_j0bgVuvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgjuvfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0bgj-vfEea_C-H5NfTs0A" name="toString" visibility="public" method="_j0bgV-vfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0bgkOvfEea_C-H5NfTs0A" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_j0cuYOvfEea_C-H5NfTs0A" name="Field" visibility="public">
      <ownedAttribute xmi:type="uml:Property" xmi:id="_j0cuYevfEea_C-H5NfTs0A" name="x" visibility="public" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_j0cuYuvfEea_C-H5NfTs0A" name="y" visibility="public" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_j0cuY-vfEea_C-H5NfTs0A" name="z" visibility="public" isUnique="false">
        <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
      </ownedAttribute>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_j0cuZOvfEea_C-H5NfTs0A" type="_YdKtEOvfEea_C-H5NfTs0A"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0cuZevfEea_C-H5NfTs0A" name="Field" specification="_j0cua-vfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    this.x = newx;
    this.y = newy;
    this.z = newz;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0cuZuvfEea_C-H5NfTs0A" name="equals" specification="_j0cub-vfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    if (o instanceof Field) {
        return this.hashCode() == ((Field) o).hashCode();
    }
    return false;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0cuZ-vfEea_C-H5NfTs0A" name="hashCode" specification="_j0cucuvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    return x * 100 + y * 10 + z;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0cuaOvfEea_C-H5NfTs0A" name="copy" specification="_j0cudOvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    return new Field(this.x, this.y, this.z);
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0cuaevfEea_C-H5NfTs0A" name="getMove" specification="_j0cuduvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    return this.x + &quot; &quot; + this.y;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_j0cuauvfEea_C-H5NfTs0A" name="toString" specification="_j0cueOvfEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    return &quot;(&quot; + this.x + &quot;,&quot; + this.y + &quot;,&quot; + this.z + &quot;)&quot;;
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0cua-vfEea_C-H5NfTs0A" name="Field" visibility="public" method="_j0cuZevfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cubOvfEea_C-H5NfTs0A" name="newx">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cubevfEea_C-H5NfTs0A" name="newy">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cubuvfEea_C-H5NfTs0A" name="newz">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0cub-vfEea_C-H5NfTs0A" name="equals" visibility="public" method="_j0cuZuvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cucOvfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_vAIV4I7PEdySGvm5GN66HA"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cucevfEea_C-H5NfTs0A" name="o" type="_DJg-w-saEeaRPtCCR8m55A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0cucuvfEea_C-H5NfTs0A" name="hashCode" visibility="public" method="_j0cuZ-vfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cuc-vfEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0cudOvfEea_C-H5NfTs0A" name="copy" visibility="public" method="_j0cuaOvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cudevfEea_C-H5NfTs0A" type="_j0cuYOvfEea_C-H5NfTs0A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0cuduvfEea_C-H5NfTs0A" name="getMove" visibility="public" method="_j0cuaevfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cud-vfEea_C-H5NfTs0A" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_j0cueOvfEea_C-H5NfTs0A" name="toString" visibility="public" method="_j0cuauvfEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_j0cueevfEea_C-H5NfTs0A" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_vZKHsOvfEea_C-H5NfTs0A" memberEnd="_vZKuwuvfEea_C-H5NfTs0A _vZKuw-vfEea_C-H5NfTs0A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_vZKuwOvfEea_C-H5NfTs0A" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_vZKuwevfEea_C-H5NfTs0A" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_vZKuw-vfEea_C-H5NfTs0A" type="_j0bgQOvfEea_C-H5NfTs0A" association="_vZKHsOvfEea_C-H5NfTs0A"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_vZKuwuvfEea_C-H5NfTs0A" type="_BwkckOsfEeagpPVreqOLZw" association="_vZKHsOvfEea_C-H5NfTs0A">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_wZJlEOvfEea_C-H5NfTs0A"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_wZMBUOvfEea_C-H5NfTs0A" value="*"/>
      </ownedEnd>
    </packagedElement>
    <packagedElement xmi:type="uml:Association" xmi:id="_xf8OAOvfEea_C-H5NfTs0A" memberEnd="_xf81EuvfEea_C-H5NfTs0A _xf9cIOvfEea_C-H5NfTs0A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_xf81EOvfEea_C-H5NfTs0A" source="org.eclipse.papyrus">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_xf81EevfEea_C-H5NfTs0A" key="nature" value="UML_Nature"/>
      </eAnnotations>
      <ownedEnd xmi:type="uml:Property" xmi:id="_xf9cIOvfEea_C-H5NfTs0A" type="_j0cuYOvfEea_C-H5NfTs0A" association="_xf8OAOvfEea_C-H5NfTs0A"/>
      <ownedEnd xmi:type="uml:Property" xmi:id="_xf81EuvfEea_C-H5NfTs0A" type="_vZKHsOvfEea_C-H5NfTs0A" association="_xf8OAOvfEea_C-H5NfTs0A"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_1v-DUOvgEea_C-H5NfTs0A" name="Hard" visibility="public">
      <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_1v-DUevgEea_C-H5NfTs0A" name="implements" client="_1v-DUOvgEea_C-H5NfTs0A" supplier="_qb8WIOs3Eea7AqSsB_lc7w" contract="_qb8WIOs3Eea7AqSsB_lc7w"/>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_1v-DUuvgEea_C-H5NfTs0A" name="getName" specification="_1v-DWOvgEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    return &quot;hard&quot;;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_1v-DU-vgEea_C-H5NfTs0A" name="determineMove" specification="_1v-DWuvgEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Map&lt;Field, Integer> result = this.getResultMap(board, m);
    //Choose candidate with highest potential score
    int maxValue = Collections.max(result.values());
    Iterator&lt;Map.Entry&lt;Field, Integer>> it = result.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry&lt;Field, Integer> item = it.next();
        if (item.getValue().intValue() &lt; maxValue) {
            it.remove();
        }
    }
    it = result.entrySet().iterator();
    int next = (int) (Math.random() * new Double(result.size()));
    int count = 0;
    while (it.hasNext()) {
        Map.Entry&lt;Field, Integer> item = it.next();
        if (count == next) {
            return item.getKey();
        }
        count++;
    }
    return null;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_1v-DVOvgEea_C-H5NfTs0A" name="getMoves" specification="_1v-DXuvgEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    ArrayList&lt;Field> moves = new ArrayList&lt;Field>();
    for (int x = 0; x &lt;= Board.MAXFIELD; x++) {
        for (int y = 0; y &lt;= Board.MAXFIELD; y++) {
            Field empty = board.getEmptyField(x, y);
            if (empty != null) {
                moves.add(empty);
            }
        }
    }
    return moves;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_1v-DVevgEea_C-H5NfTs0A" name="getFutureImpact" specification="_1v-DY-vgEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    int result = 0;
    ArrayList&lt;Field> moves = this.getMoves(board);
    for (Field field : moves) {
        Board myboard = board.copy();
        Board enemboard = board.copy();
        myboard.setField(field, m);
        enemboard.setField(field, m.other());
        if (myboard.isWinner(m)) {
            result += 50;
        } else if (enemboard.isWinner(m.other())) {
            result -= 50;
        }
    }
    return result;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_1v-DVuvgEea_C-H5NfTs0A" name="getResultMap" specification="_1v-DZ-vgEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    Map&lt;Field, Integer> result = new HashMap&lt;Field, Integer>();
    ArrayList&lt;Field> moves = this.getMoves(board);
    for (Field field : moves) {
        Board myboard = board.copy();
        Board enemboard = board.copy();
        myboard.setField(field, m);
        enemboard.setField(field, m.other());
        if (myboard.isWinner(m)) {
            result.put(field, new Integer(500));
        } else if (enemboard.isWinner(m.other())) {
            result.put(field, new Integer(100));
        } else {
            result.put(field, new Integer(countSurroundings(field, board, m) + getFutureImpact(myboard, m)));
        }
    //result.put(field, result.get(field) + getFutureImpact(myboard, m));
    }
    return result;
</body>
      </ownedBehavior>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_1v-DV-vgEea_C-H5NfTs0A" name="countSurroundings" specification="_1v-Da-vgEea_C-H5NfTs0A">
        <language>JAVA</language>
        <body>
    int result = 0;
    for (int z = -1; z &lt;= 1; z++) {
        for (int i = -1; i &lt;= 1; i++) {
            for (int a = -1; a &lt;= 1; a++) {
                Field neighbour = board.walkField(field, i, a, z);
                //next to field of same color
                if (neighbour != null) {
                    Mark nextmark = board.getMark(neighbour);
                    if (nextmark != null &amp;&amp; nextmark.equals(m)) {
                        result++;
                    }
                } else if (//next to boundary
                neighbour == null) {
                    result++;
                }
            }
        }
    }
    return result;
</body>
      </ownedBehavior>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_1v-DWOvgEea_C-H5NfTs0A" name="getName" visibility="public" method="_1v-DUuvgEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DWevgEea_C-H5NfTs0A" type="_DIE0UOsaEeaRPtCCR8m55A" direction="return"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_1v-DWuvgEea_C-H5NfTs0A" name="determineMove" visibility="public" method="_1v-DU-vgEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DW-vgEea_C-H5NfTs0A" type="_QNhLEOvfEea_C-H5NfTs0A" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DXOvgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DXevgEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_1v-DXuvgEea_C-H5NfTs0A" name="getMoves" visibility="public" method="_1v-DVOvgEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DX-vgEea_C-H5NfTs0A" type="_QNhLEOvfEea_C-H5NfTs0A" direction="return">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_1v-DYOvgEea_C-H5NfTs0A"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_1v-DYevgEea_C-H5NfTs0A" value="*"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DYuvgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_1v-DY-vgEea_C-H5NfTs0A" name="getFutureImpact" visibility="public" method="_1v-DVevgEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DZOvgEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DZevgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DZuvgEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_1v-DZ-vgEea_C-H5NfTs0A" name="getResultMap" visibility="public" method="_1v-DVuvgEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DaOvgEea_C-H5NfTs0A" type="_DJGIAusaEeaRPtCCR8m55A" direction="return"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DaevgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DauvgEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
      <ownedOperation xmi:type="uml:Operation" xmi:id="_1v-Da-vgEea_C-H5NfTs0A" name="countSurroundings" visibility="public" method="_1v-DV-vgEea_C-H5NfTs0A">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DbOvgEea_C-H5NfTs0A" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DbevgEea_C-H5NfTs0A" name="field" type="_QNhLEOvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-DbuvgEea_C-H5NfTs0A" name="board" type="_RaO10OvfEea_C-H5NfTs0A"/>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_1v-Db-vgEea_C-H5NfTs0A" name="m" type="_BwkckOsfEeagpPVreqOLZw"/>
      </ownedOperation>
    </packagedElement>
    <profileApplication xmi:type="uml:ProfileApplication" xmi:id="_DHeXYOsaEeaRPtCCR8m55A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_DHflgOsaEeaRPtCCR8m55A" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="http://www.eclipse.org/papyrus/PapyrusJava/1#/"/>
      </eAnnotations>
      <appliedProfile xmi:type="uml:Profile" href="pathmap://PapyrusJava_PROFILES/PapyrusJava.profile.uml#_j9REUByGEduN1bTiWJ0lyw"/>
    </profileApplication>
    <profileApplication xmi:type="uml:ProfileApplication" xmi:id="_DH-tsOsaEeaRPtCCR8m55A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_DH-tsesaEeaRPtCCR8m55A" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="http://www.eclipse.org/papyrus/Codegen/1#/"/>
      </eAnnotations>
      <appliedProfile xmi:type="uml:Profile" href="pathmap://Codegen_PROFILES/Codegen.profile.uml#_fPDsIBa-EearhdjjJ6cVzQ"/>
    </profileApplication>
    <profileApplication xmi:type="uml:ProfileApplication" xmi:id="_DH_UwOsaEeaRPtCCR8m55A">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_DH_70OsaEeaRPtCCR8m55A" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="http://www.eclipse.org/uml2/5.0.0/UML/Profile/Standard#/"/>
      </eAnnotations>
      <appliedProfile xmi:type="uml:Profile" href="pathmap://UML_PROFILES/Standard.profile.uml#_0"/>
    </profileApplication>
  </uml:Model>
  <PapyrusJava:External xmi:id="_DIH3oOsaEeaRPtCCR8m55A" name="java.lang.String" base_Classifier="_DIE0UOsaEeaRPtCCR8m55A"/>
  <PapyrusJava:External xmi:id="_DIQagOsaEeaRPtCCR8m55A" name="java.lang.Thread" base_Classifier="_DIN-QOsaEeaRPtCCR8m55A"/>
  <PapyrusJava:External xmi:id="_DITd0OsaEeaRPtCCR8m55A" name="ss.project.server.ClientHandler" base_Classifier="_DIRooesaEeaRPtCCR8m55A"/>
  <PapyrusJava:External xmi:id="_DIo1AOsaEeaRPtCCR8m55A" name="java.util.concurrent.locks.Lock" base_Classifier="_DIm_0-saEeaRPtCCR8m55A"/>
  <PapyrusJava:External xmi:id="_DIr4UOsaEeaRPtCCR8m55A" name="java.util.concurrent.locks.Condition" base_Classifier="_DIqDIOsaEeaRPtCCR8m55A"/>
  <PapyrusJava:External xmi:id="_DIuUkOsaEeaRPtCCR8m55A" name="ss.project.server.Server" base_Classifier="_DIsfYesaEeaRPtCCR8m55A"/>
  <PapyrusJava:External xmi:id="_DJH9MOsaEeaRPtCCR8m55A" name="java.util.Map" base_Classifier="_DJGIAusaEeaRPtCCR8m55A"/>
  <PapyrusJava:External xmi:id="_DJiz8OsaEeaRPtCCR8m55A" name="java.lang.Object" base_Classifier="_DJg-w-saEeaRPtCCR8m55A"/>
  <PapyrusJava:External xmi:id="_57g2wOscEeaGGeTgDT8kcg" name="ss.project.view.ClientView" base_Classifier="_57dzcescEeaGGeTgDT8kcg"/>
  <PapyrusJava:External xmi:id="_-4590OscEeaGGeTgDT8kcg" name="ss.project.view.Terminal" base_Classifier="_-43hkOscEeaGGeTgDT8kcg"/>
  <PapyrusJava:External xmi:id="_-49BIOscEeaGGeTgDT8kcg" name="java.lang.Runnable" base_Classifier="_-47L8OscEeaGGeTgDT8kcg"/>
  <PapyrusJava:External xmi:id="_-5BSkOscEeaGGeTgDT8kcg" name="java.net.Socket" base_Classifier="_-4_dYuscEeaGGeTgDT8kcg"/>
  <PapyrusJava:External xmi:id="_-5GyIOscEeaGGeTgDT8kcg" name="java.io.IOException" base_Classifier="_-5EV4uscEeaGGeTgDT8kcg"/>
  <PapyrusJava:External xmi:id="_x6Hr0OsfEeagpPVreqOLZw" name="java.net.ServerSocket" base_Classifier="_x6FPkOsfEeagpPVreqOLZw"/>
  <PapyrusJava:External xmi:id="_x6KIEOsfEeagpPVreqOLZw" name="ss.project.view.View" base_Classifier="_x6IS4OsfEeagpPVreqOLZw"/>
  <PapyrusJava:External xmi:id="_2PKZcOsfEeagpPVreqOLZw" name="java.lang.Exception" base_Classifier="_2PIkQOsfEeagpPVreqOLZw"/>
  <PapyrusJava:External xmi:id="_9u7WoOsfEeagpPVreqOLZw" name="ss.project.view.Terminal" base_Classifier="_9u5hcOsfEeagpPVreqOLZw"/>
  <standard:Create xmi:id="_9vBdQOsfEeagpPVreqOLZw" base_BehavioralFeature="_9u_BAOsfEeagpPVreqOLZw"/>
  <PapyrusJava:External xmi:id="_RPkrwOsgEeagpPVreqOLZw" name="ss.project.view.ClientView" base_Classifier="_71-Q8OsfEeagpPVreqOLZw"/>
  <standard:Create xmi:id="_RPnvEOsgEeagpPVreqOLZw" base_BehavioralFeature="_RPlS0esgEeagpPVreqOLZw"/>
  <PapyrusJava:External xmi:id="_t8rZUOs0Eea7AqSsB_lc7w" name="ss.project.game.Mark" base_Classifier="_BwkckOsfEeagpPVreqOLZw"/>
  <PapyrusJava:External xmi:id="_4jVkEOs2Eea7AqSsB_lc7w" name="ss.project.view.View" base_Classifier="_71-Q8esfEeagpPVreqOLZw"/>
  <PapyrusJava:External xmi:id="_jZwFwOs3Eea7AqSsB_lc7w" name="Difficulty" base_Classifier="_qb8WIOs3Eea7AqSsB_lc7w"/>
  <standard:Create xmi:id="_jZyiAOs3Eea7AqSsB_lc7w" base_BehavioralFeature="_jZws0es3Eea7AqSsB_lc7w"/>
  <PapyrusJava:External xmi:id="_L9F8N-s5Eea7AqSsB_lc7w" name="Difficulty" base_Classifier="_L9C44Os5Eea7AqSsB_lc7w"/>
  <standard:Create xmi:id="_L9GjMOs5Eea7AqSsB_lc7w" base_BehavioralFeature="_L9Df6us5Eea7AqSsB_lc7w"/>
  <standard:Create xmi:id="_egdw--s5Eea7AqSsB_lc7w" base_BehavioralFeature="_egbUeOs5Eea7AqSsB_lc7w"/>
  <PapyrusJava:External xmi:id="_ege-0Os5Eea7AqSsB_lc7w" name="ss.project.view.View" base_Classifier="_egb7gOs5Eea7AqSsB_lc7w"/>
  <standard:Create xmi:id="_ege-0es5Eea7AqSsB_lc7w" base_BehavioralFeature="_egb7lus5Eea7AqSsB_lc7w"/>
  <PapyrusJava:External xmi:id="_egfl4Os5Eea7AqSsB_lc7w" name="ClientView" base_Classifier="_egcikOs5Eea7AqSsB_lc7w"/>
  <PapyrusJava:External xmi:id="_FBhtAOuNEeanyfTPa8UQ4w" name="java.io.BufferedReader" base_Classifier="_FBbmYOuNEeanyfTPa8UQ4w"/>
  <PapyrusJava:External xmi:id="_FBq28OuNEeanyfTPa8UQ4w" name="java.io.BufferedWriter" base_Classifier="_FBmlgOuNEeanyfTPa8UQ4w"/>
  <PapyrusJava:External xmi:id="_FB2dIOuNEeanyfTPa8UQ4w" name="java.io.InputStream" base_Classifier="_FB0A4OuNEeanyfTPa8UQ4w"/>
  <PapyrusJava:External xmi:id="_FB45YOuNEeanyfTPa8UQ4w" name="java.io.OutputStream" base_Classifier="_FB3EMOuNEeanyfTPa8UQ4w"/>
  <standard:Create xmi:id="_FB78sOuNEeanyfTPa8UQ4w" base_BehavioralFeature="_FB5gcOuNEeanyfTPa8UQ4w"/>
  <standard:Create xmi:id="_Y-EpQOu0Eeao2KzjhbjEkg" base_BehavioralFeature="_Y-A-5eu0Eeao2KzjhbjEkg"/>
  <standard:Create xmi:id="_2o5TYOu0Eeao2KzjhbjEkg" base_BehavioralFeature="_2o23LOu0Eeao2KzjhbjEkg"/>
  <PapyrusJava:External xmi:id="_2o7IkOu0Eeao2KzjhbjEkg" name="ss.project.view.Terminal" base_Classifier="_2o23IOu0Eeao2KzjhbjEkg"/>
  <PapyrusJava:External xmi:id="_MmBcwOvbEeaFWsKBBqDStg" name="java.util.Observer" base_Classifier="_Ml6IAOvbEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_MmdhoOvbEeaFWsKBBqDStg" name="ComputerPlayer" base_Classifier="_jZtpgOs3Eea7AqSsB_lc7w"/>
  <standard:Create xmi:id="_MmogwOvbEeaFWsKBBqDStg" base_BehavioralFeature="_MmkPUOvbEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_MmwckOvbEeaFWsKBBqDStg" name="java.util.Observable" base_Classifier="_MmtZQOvbEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_cdTegOvbEeaFWsKBBqDStg" name="Client" base_Classifier="_Ml3rwOvbEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_cdXI4OvbEeaFWsKBBqDStg" base_BehavioralFeature="_cdUFkevbEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_ydmF4OvbEeaFWsKBBqDStg" base_BehavioralFeature="_ydibguvbEeaFWsKBBqDStg"/>
  <PapyrusJava:Synchronized xmi:id="_yduBsOvbEeaFWsKBBqDStg" base_Operation="_ydq-YOvbEeaFWsKBBqDStg"/>
  <PapyrusJava:Synchronized xmi:id="_yd0IUOvbEeaFWsKBBqDStg" base_Operation="_ydxFAOvbEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_zgnCEOvbEeaFWsKBBqDStg" name="Server" base_Classifier="_zgkl0evbEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_zgqscOvbEeaFWsKBBqDStg" name="ss.project.game.Game" base_Classifier="_ydeKEOvbEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_zgu94OvbEeaFWsKBBqDStg" base_BehavioralFeature="_zgr6kevbEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_0ZhnEOvbEeaFWsKBBqDStg" name="ClientHandler" base_Classifier="_zgjXsOvbEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_0ZmfkOvbEeaFWsKBBqDStg" base_BehavioralFeature="_0ZjcQ-vbEeaFWsKBBqDStg"/>
  <PapyrusJava:Synchronized xmi:id="_0ZxesOvbEeaFWsKBBqDStg" base_Operation="_0ZvpgOvbEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_x1knIOvcEeaFWsKBBqDStg" base_BehavioralFeature="_x1fut-vcEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_x1l1QOvcEeaFWsKBBqDStg" name="Server" base_Classifier="_x1g8zuvcEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_x1l1QevcEeaFWsKBBqDStg" base_BehavioralFeature="_x1g87uvcEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_x1mcUOvcEeaFWsKBBqDStg" base_BehavioralFeature="_x1hj9evcEeaFWsKBBqDStg"/>
  <PapyrusJava:Synchronized xmi:id="_x1nDYOvcEeaFWsKBBqDStg" base_Operation="_x1g9CuvcEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_x1nqcOvcEeaFWsKBBqDStg" base_BehavioralFeature="_x1hj2uvcEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_x1oRgOvcEeaFWsKBBqDStg" name="Client" base_Classifier="_x1gVtevcEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_x1oRgevcEeaFWsKBBqDStg" base_BehavioralFeature="_x1gV5evcEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_x1o4kOvcEeaFWsKBBqDStg" name="Board" base_Classifier="_x1fuoOvcEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_g9NGYOvdEeaFWsKBBqDStg" base_BehavioralFeature="_g9I1GOvdEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_g9NtcOvdEeaFWsKBBqDStg" name="Server" base_Classifier="_g9FxoOvdEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_g9NtcevdEeaFWsKBBqDStg" name="ClientHandler" base_Classifier="_g9IN4OvdEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_g9OUgOvdEeaFWsKBBqDStg" base_BehavioralFeature="_g9FxwOvdEeaFWsKBBqDStg"/>
  <PapyrusJava:Synchronized xmi:id="_g9OUgevdEeaFWsKBBqDStg" base_Operation="_g9Fx3OvdEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_g9O7kOvdEeaFWsKBBqDStg" name="ss.project.game.Game" base_Classifier="_g9G_wOvdEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_g9PioOvdEeaFWsKBBqDStg" base_BehavioralFeature="_g9G_3OvdEeaFWsKBBqDStg"/>
  <PapyrusJava:Synchronized xmi:id="_g9PioevdEeaFWsKBBqDStg" base_Operation="_g9G_6OvdEeaFWsKBBqDStg"/>
  <PapyrusJava:Synchronized xmi:id="_g9QJsOvdEeaFWsKBBqDStg" base_Operation="_g9G_4uvdEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_g9QwwOvdEeaFWsKBBqDStg" base_BehavioralFeature="_g9IN9-vdEeaFWsKBBqDStg"/>
  <PapyrusJava:External xmi:id="_g9QwwevdEeaFWsKBBqDStg" name="Board" base_Classifier="_g9I1AevdEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_ycdykOvdEeaFWsKBBqDStg" base_BehavioralFeature="_ycb9b-vdEeaFWsKBBqDStg"/>
  <standard:Create xmi:id="_QNvNgOvfEea_C-H5NfTs0A" base_BehavioralFeature="_QNof0OvfEea_C-H5NfTs0A"/>
  <standard:Create xmi:id="_RaacAOvfEea_C-H5NfTs0A" base_BehavioralFeature="_RaWxoOvfEea_C-H5NfTs0A"/>
  <PapyrusJava:External xmi:id="_RahwwOvfEea_C-H5NfTs0A" name="ss.project.game.Field" base_Classifier="_QNhLEOvfEea_C-H5NfTs0A"/>
  <standard:Create xmi:id="_j0fKoOvfEea_C-H5NfTs0A" base_BehavioralFeature="_j0cua-vfEea_C-H5NfTs0A"/>
  <PapyrusJava:External xmi:id="_j0g_0OvfEea_C-H5NfTs0A" name="Field" base_Classifier="_j0cuYOvfEea_C-H5NfTs0A"/>
  <standard:Create xmi:id="_j0iN8OvfEea_C-H5NfTs0A" base_BehavioralFeature="_j0bgWOvfEea_C-H5NfTs0A"/>
  <PapyrusJava:External xmi:id="_Th860OvgEea_C-H5NfTs0A" name="ss.project.game.Board" base_Classifier="_RaO10OvfEea_C-H5NfTs0A"/>
</xmi:XMI>
